(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6be589d7"],{"0495":function(t,i,e){"use strict";e("0d55")},"0cfc":function(t,i,e){"use strict";var a=e("5530"),s=function(){var t=this,i=t._self._c;return i("router-link",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:Object(a["a"])({href:"/body/"+t.item.id},t.reporter),caller:"body_index"},expression:"{\n        data: {\n            href: '/body/' + item.id,\n            ...reporter,\n        },\n        caller: 'body_index',\n    }"}],class:["m-body-item",{onlyPic:t.onlyPic,noName:t.noName}],attrs:{to:"/".concat(t.item.id),target:"_blank"}},[t.imgLink?i("img",{staticClass:"u-pic",attrs:{src:t.showThumb(t.imgLink),loading:"lazy"}}):i("img",{staticClass:"u-pic",attrs:{src:e("b43d")}}),t.item.star?i("i",{staticClass:"u-mark u-mark--star"},[t._v("编辑推荐")]):t._e(),~~t.item.price_type&&t.item.price_count?i("i",{staticClass:"u-mark u-mark--pay"},[t._v("付费")]):t._e(),i("div",{staticClass:"m-op"},[i("div",{staticClass:"u-title"},[t._v(t._s(t.item.title))]),i("a",{staticClass:"u-author",attrs:{href:t.authorLink(t.item.user_id)},on:{click:function(i){return i.stopPropagation(),t.onAuthorClick.apply(null,arguments)}}},[t._v(" 作者: "+t._s(t.item.original?t.author:t.item.author_name||"匿名")+" ")])])])},n=[],o=(e("65c2"),e("85e4")),r={name:"item",props:["item","reporter","onlyPic","noName"],data:function(){return{markmap:{newbie:"热门",advanced:"推荐",recommended:"精选"}}},computed:{author:function(){return this.item.display_name||"匿名"},imgLink:function(){var t;return null===(t=this.item.images)||void 0===t?void 0:t[0]}},methods:{showThumb:function(t){return Object(o["getThumbnail"])(t,360)},authorLink:o["authorLink"],onAuthorClick:function(){this.item.original||window.open(this.item.author_link,"_blank")}}},c=r,l=(e("0495"),e("2877")),u=Object(l["a"])(c,s,n,!1,null,null,null);i["a"]=u.exports},"0d55":function(t,i,e){},"12c0":function(t,i,e){},"51eb":function(t,i,e){"use strict";var a=e("825a"),s=e("485a"),n=TypeError;t.exports=function(t){if(a(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw n("Incorrect hint");return s(this,t)}},8172:function(t,i,e){"use strict";var a=e("e065"),s=e("57b9");a("toPrimitive"),s()},"84c2":function(t){t.exports=JSON.parse('{"a":{"1":"成男","2":"成女","5":"正太","6":"萝莉"}}')},9929:function(t,i,e){"use strict";e("ea82")},"9a5b":function(t,i,e){"use strict";e("12c0")},a0b6:function(t,i,e){t.exports=e.p+"img/box.44b43359.svg"},a15b:function(t,i,e){"use strict";var a=e("23e7"),s=e("e330"),n=e("44ad"),o=e("fc6a"),r=e("a640"),c=s([].join),l=n!==Object,u=l||!r("join",",");a({target:"Array",proto:!0,forced:u},{join:function(t){return c(o(this),void 0===t?",":t)}})},a478:function(t,i,e){"use strict";e.r(i);e("b0c0");var a=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"p-face-single"},[i("div",{staticClass:"m-navigation"},[i("el-button",{staticClass:"u-goback",attrs:{size:"medium",plain:""},on:{click:t.goBack}},[t._v("返回列表")]),i("div",{staticClass:"u-right-btn"},[t.isSinglePage&&t.isEditor?i("div",{staticClass:"u-op m-face-btn-box"},[i("div",{staticClass:"m-face-btn-box"},[i("el-button",{staticClass:"u-btn",class:t.isStar?"off":"on",attrs:{type:"danger",icon:t.isStar?"el-icon-star-on":"el-icon-star-off",size:"medium"},on:{click:t.starSet}},[t._v(" "+t._s(t.starText)+" ")]),i("el-button",{staticClass:"u-btn",class:1!==t.status?"top":"bottom",attrs:{type:"danger",icon:1!==t.status?"el-icon-top":"el-icon-bottom",size:"medium"},on:{click:t.statusSet}},[t._v(" "+t._s(t.statusText)+" ")])],1)]):t._e(),i("div",{staticClass:"m-face-btn-box"},[i("a",{attrs:{href:t.publish_link}},[i("el-button",{staticClass:"u-publish u-btn",attrs:{type:"primary",size:"medium",icon:"el-icon-edit"}},[t._v("发布")])],1)])])],1),i("div",{staticClass:"m-header"},[i("div",{staticClass:"m-avatar"},[t.post.original?i("Avatar",{staticClass:"u-avatar",attrs:{uid:t.post.user_id,url:t.post.user_avatar,frame:t.post.user_avatar_frame}}):t._e()],1),i("div",{staticClass:"m-header-info"},[i("h2",[t._v(t._s(t.post.title||"无标题"))]),i("div",{staticClass:"u-author"},[t._v(" By "),t.post.original?i("a",{staticClass:"u-name",attrs:{href:t.authorLink(t.post.user_id),target:"_blank"}},[t._v(t._s(t.post.display_name))]):t.post.author_link?i("a",{staticClass:"u-name",attrs:{href:t.post.author_link,target:"_blank"}},[t._v(t._s(t.post.author_name))]):i("span",{staticClass:"u-name"},[t._v(t._s(t.post.author_name))]),i("time",{staticClass:"u-time"},[t._v(t._s(t.post.updated_at))]),t.canEdit?i("a",{attrs:{href:t.editLink("face",t.post.id),target:"_blank"}},[i("i",{staticClass:"el-icon-edit-outline u-edit-icon"}),t._v(" 编辑 ")]):t._e()]),i("div",{staticClass:"u-meta"},[t.post.star?i("i",{staticClass:"u-mark"},[t._v("★ 编辑推荐")]):t._e(),t.post.is_fr?i("i",{staticClass:"u-fr"},[t._v("首发")]):t._e(),t.post.original?i("i",{staticClass:"u-original"},[t._v("原创")]):t._e(),i("i",{staticClass:"u-client",class:t.post.client||"std"},[t._v(t._s(t.showClientLabel(t.post.client)))]),t.post.body_type?i("i",{staticClass:"u-bodytype",class:"u-bodytype-"+t.post.body_type},[t._v(t._s(t.showBodyTypeLabel(t.post.body_type)))]):t._e()])]),t.topicText?i("div",{staticClass:"m-topic"},[t._v(t._s(t.topicText))]):t._e()]),i("div",{staticClass:"m-face-content"},[t.previewSrcList&&t.previewSrcList.length>0?i("div",{staticClass:"m-single-pics m-single-content-box"},[i("div",{staticClass:"u-bg"},[i("img",{attrs:{src:t.showPic(t.activePic)}}),i("div",{staticClass:"u-mask"})]),i("el-carousel",{staticClass:"m-carousel",attrs:{interval:4e3,type:"card",arrow:"always"},on:{change:t.carouselChange}},t._l(t.previewSrcList,(function(e,a){return i("el-carousel-item",{key:a},[i("div",{staticClass:"m-face-pic"},[i("el-image",{ref:"previewImage",refInFor:!0,staticClass:"u-pic",attrs:{fit:"contain",src:t.showPic(e),"preview-src-list":t.resolveImageArr(t.previewSrcList)},on:{"!click":function(i){return t.handlePreviewImage(a)}}})],1)])})),1)],1):t._e(),t.post.price_type&&0!=t.post.price_type&&!t.has_buy?i("div",{staticClass:"m-face-pay"},[i("div",{staticClass:"m-face-pay-info"},[i("span",{staticClass:"u-text"},[t._v("该脸型数据售价：")]),i("el-tag",{attrs:{effect:"dark",color:"#ffad31",round:""}},[1==t.post.price_type?i("span",[t._v(t._s(t.post.price_count)+" 盒币")]):t._e(),2==t.post.price_type?i("span",[t._v(t._s(t.post.price_count)+" 金箔")]):t._e()]),i("el-button",{staticClass:"u-btn",attrs:{type:"primary",size:"small",icon:"el-icon-shopping-cart-2",loading:t.payBtnLoading},on:{click:t.facePay}},[t._v(" 购买 ")])],1),i("img",{staticClass:"u-box-img",attrs:{src:e("a0b6"),alt:""}})]):t._e()]),t.post.remark?i("div",{staticClass:"m-desc"},[i("el-divider",{attrs:{"content-position":"left"}},[i("i",{staticClass:"el-icon-collection-tag"}),t._v(" 说明")]),t.post.remark?i("div",{staticClass:"u-desc"},[t._v(t._s(t.post.remark))]):t._e()],1):t._e(),t.has_buy&&t.facedata?i("div",{staticClass:"m-single-data m-single-content-box"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("独家数据分析")]),t.facedata?i("facedata",{attrs:{data:t.facedata,type:"face"}}):t._e()],1):t._e(),t.has_buy&&t.downFileList&&t.downFileList.length>0?i("div",{staticClass:"m-face-files m-single-content-box"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("原始文件列表")]),i("ul",{staticClass:"m-face-files-list"},t._l(t.downFileList,(function(e){return i("li",{key:e.id},[i("div",[i("span",{staticClass:"u-label"},[t._v("名称: "),i("em",[t._v(t._s(e.name))])]),i("span",{staticClass:"u-label"},[t._v("版本 : "),i("em",[t._v(t._s(e.created_at))])]),e.describe?i("span",{staticClass:"u-label"},[t._v("备注 ： "),i("em",[t._v(t._s(e.describe))])]):t._e()]),i("el-button",{staticClass:"u-action",attrs:{icon:"el-icon-download",size:"mini",type:"primary",round:""},on:{click:function(i){return t.getDownUrl(e.uuid)}}},[t._v("下载")])],1)})),0)],1):t._e(),i("div",{staticClass:"m-author m-single-content-box"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("上传作者")]),i("div",{staticClass:"u-author-info"},[i("Avatar",{staticClass:"u-avatar",attrs:{uid:t.post.user_id,url:t.post.user_avatar,frame:t.post.user_avatar_frame}}),i("a",{attrs:{href:t.authorLink(t.post.user_id),target:"_blank"}},[i("div",{staticClass:"u-name"},[t._v(t._s(t.post.display_name))])])],1)],1),i("div",{staticClass:"m-random-list m-single-content-box"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("作者其他作品")]),i("div",{staticClass:"u-list"},t._l(t.randomList,(function(t){return i("faceItem",{key:t.id,attrs:{item:t,noName:!0}})})),1)],1),t.pvxbodyList.length?i("div",{staticClass:"m-random-list m-single-content-box"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("脸型搭配 & 其他体型数据")]),i("div",{staticClass:"u-list"},[i("faceItem",{attrs:{item:t.face}}),t._l(t.pvxbodyList,(function(t){return i("bodyItem",{key:t.id,attrs:{item:t,onlyPic:!0}})}))],2)],1):t._e(),i("Thx",{staticClass:"m-thx m-single-content-box",attrs:{postId:t.id,postType:"face",postTitle:t.post.title||"无标题",userId:t.post.user_id,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,client:t.post.client}}),i("div",{staticClass:"m-single-content-box"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("讨论")]),i("Comment",{attrs:{id:t.id,category:"face"}})],1)],1)},s=[],n=e("5530"),o=(e("b64b"),e("caad"),e("14d9"),e("ac1f"),e("841c"),e("d3b7"),e("4e82"),e("d81d"),e("f0d2")),r=e("85e4"),c=e("9616"),l=e("e0bb"),u=e("23d8"),d=e("c9d2"),m=e("84c2"),f=e("65c2"),p=e("5a0c"),v=e.n(p),h=e("0cfc"),_=e("cb31"),g=["single"],b={name:"single",components:{facedata:l["a"],Comment:u["a"],faceItem:_["a"],bodyItem:h["a"]},data:function(){return{loading:!1,search:"",post:{},stat:{},has_buy:!1,client_map:f["__clients"],downFileList:[],downloadParams:{pageIndex:1,pageSize:10,total:0},payBtnLoading:!1,randomList:[],carouselActive:0,isEditor:d["a"].isEditor(),topic_info:null,face:{},pvxbodyList:[]}},computed:{publish_link:function(){return Object(r["publishLink"])("face")},id:function(){return~~this.$route.params.id},isAuthor:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.user_id)==d["a"].getInfo().uid||!1},facedata:function(){var t,i=(null===(t=this.post)||void 0===t?void 0:t.data)||"";return i.indexOf("\\")>-1?JSON.parse(i):i},previewSrcList:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.images)||[]},canEdit:function(){var t;return d["a"].isEditor()||(null===(t=this.post)||void 0===t?void 0:t.user_id)==d["a"].getInfo().uid},activePic:function(){return this.previewSrcList[this.carouselActive]},isSinglePage:function(){return g.includes(this.$route.name)},status:function(){var t;return(null===(t=this.$store.state.faceSingle)||void 0===t?void 0:t.status)||1},statusText:function(){return 1!==this.status?"上架":"下架"},isStar:function(){var t;return(null===(t=this.$store.state.faceSingle)||void 0===t?void 0:t.star)||0},starText:function(){return this.isStar?"取消精选":"精选"},topicText:function(){return this.topic_info?"".concat(v()(this.topic_info.created_at).format("YYYY年MM月DD日"),"荣登头条榜"):""}},created:function(){this.getData()},methods:{imgLink:function(t){return(null===t||void 0===t?void 0:t[0])||f["__imgPath"]+"image/face/null2.png"},showAvatar:function(t){return Object(r["showAvatar"])(t,"l")},showThumbnail:function(t){return Object(r["resolveImagePath"])(t)},authorLink:r["authorLink"],editLink:r["editLink"],getFaceList:function(){this.$router.push({name:"list",query:{title:this.search}})},goBack:function(){document.title="捏脸分享 - JX3BOX",this.$router.push({name:"list"})},showClientLabel:function(t){return this.client_map[t]},showBodyTypeLabel:function(t){return m["a"][t]},carouselChange:function(t){this.carouselActive=t},handlePreviewImage:function(t){var i=this;setTimeout((function(){var e=i.$refs.previewImage[t].$children[0];e&&e.reset(),e&&(e.index=t)}),0)},getData:function(){var t=this;this.id&&(this.loading=!0,Object(o["f"])(this.id).then((function(i){t.post=t.$store.state.faceSingle=i.data.data,document.title=t.post.title,t.getAccessoryList(),t.getRandomFaceList(),t.getRandomList(),t.getSliders()})).catch((function(i){t.loading=!1})),Object(c["a"])("face",this.id).then((function(i){t.stat=i.data})),Object(c["b"])("face",this.id))},downloadPageQuery:function(t){this.downloadParams.pageIndex=t,this.getAccessoryList()},getAccessoryList:function(){var t=this;Object(o["c"])(this.id,this.downloadParams).then((function(i){var e=i.data.data;t.has_buy=e.has_buy,e.has_buy&&(t.downFileList=e.list,t.downloadParams.total=e.page.total)})).finally((function(){t.loading=!1}))},getDownUrl:function(t){Object(o["d"])(this.id,t).then((function(t){var i;window.location.href=Object(r["resolveImagePath"])(null===(i=t.data.data)||void 0===i?void 0:i.url)}))},facePay:function(){var t=this;d["a"].isLogin()?this.$confirm("确认购买此捏脸？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var i=t.post,e={postType:"face",PostId:i.id,priceType:i.price_type,priceCount:i.price_count,accessUserId:i.user_id,payUserId:d["a"].getInfo().uid};t.payBtnLoading=!0,Object(o["m"])(e).then((function(i){var e=i.data.data.id,a=setInterval(Object(o["j"])(e).then((function(i){t.getPayFaceStatus(i.data.data.pay_status,a)}),1e3))})).catch((function(i){var e,a;40019==(null===(e=i.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.code)&&t.$confirm("余额不足，是否前往充值？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.open("/vip/cny","_blank")})).catch((function(){}))})).finally((function(){t.payBtnLoading=!1}))})).catch((function(){})):d["a"].toLogin()},getPayFaceStatus:function(t,i){1==t?(this.payBtnLoading=!1,clearInterval(i),this.getData(),this.$notify.success({title:"成功",message:"购买成功"})):2==t&&(this.payBtnLoading=!1,clearInterval(i),this.$notify.error({title:"失败",message:"支付失败"}))},getRandomFaceList:function(){var t=this,i=this.post.user_id;Object(o["g"])({user_id:i,limit:8}).then((function(i){i.data.data.list&&i.data.data.list.length>0&&(t.randomList=i.data.data.list)}))},getRandomList:function(){var t=this,i=this.post,e=i.body_type,a=i.client,s=i.display_name;Object(o["h"])({body_type:e,client:a,limit:8}).then((function(i){var e=i.data.data,a=e.face,o=e.pvxbodyList;t.face=Object(n["a"])(Object(n["a"])({},a),{},{author_name:s}),t.pvxbodyList=o||[]}))},showPic:function(t){return Object(r["resolveImagePath"])(t)},starSet:function(){var t=this;this.$confirm("确认"+(this.isStar?"取消精选":"精选")+"该捏脸？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(i,e,a){"confirm"===i?(e.confirmButtonLoading=!0,t.isStar?Object(o["a"])(t.id).then((function(){t.$store.state.faceSingle.star=0,a(),t.$notify({title:"成功",message:"取消精选成功",type:"success"})})).finally((function(){e.confirmButtonLoading=!1})):Object(o["o"])(t.id).then((function(){t.$store.state.faceSingle.star=1,a(),t.$notify({title:"成功",message:"精选成功",type:"success"})})).finally((function(){e.confirmButtonLoading=!1}))):(e.confirmButtonLoading=!1,a())}})},statusSet:function(){var t=this;this.$confirm("确认"+(1==this.status?"下架":"上架")+"该捏脸？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:function(i,e,a){"confirm"===i?(e.confirmButtonLoading=!0,1==t.status?Object(o["k"])(t.id,t.isEditor).then((function(){t.$store.state.faceSingle.status=2,a(),t.$notify({title:"成功",message:"下架成功",type:"success"})})).finally((function(){e.confirmButtonLoading=!1})):Object(o["l"])(t.id,t.isEditor).then((function(){t.$store.state.faceSingle.status=1,a(),t.$notify({title:"成功",message:"上架成功",type:"success"})})).finally((function(){e.confirmButtonLoading=!1}))):(e.confirmButtonLoading=!1,a())}})},getSliders:function(){var t=this;Object(o["i"])("slider",this.post.client,10,this.post.id).then((function(i){var e;if(null!==(e=i.data.data)&&void 0!==e&&e.list){var a=i.data.data.list.sort((function(t,i){return v()(i.created_at).isAfter(v()(t.created_at))?1:-1}));t.topic_info=a[0]}}))},resolveImageArr:function(t){return t.map((function(t){return Object(r["resolveImagePath"])(t)}))}}},y=b,C=(e("9a5b"),e("2877")),k=Object(C["a"])(y,a,s,!1,null,null,null);i["default"]=k.exports},ade3:function(t,i,e){"use strict";e.d(i,"a",(function(){return o}));var a=e("53ca");e("8172"),e("efec"),e("a4d3"),e("e01a"),e("d3b7"),e("d9e2"),e("a9e3");function s(t,i){if("object"!==Object(a["a"])(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var s=e.call(t,i||"default");if("object"!==Object(a["a"])(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}function n(t){var i=s(t,"string");return"symbol"===Object(a["a"])(i)?i:String(i)}function o(t,i,e){return i=n(i),i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}},b43d:function(t,i,e){t.exports=e.p+"img/body_null.bb04768a.png"},cb31:function(t,i,e){"use strict";var a=e("5530"),s=function(){var t=this,i=t._self._c;return i("router-link",{directives:[{name:"reporter",rawName:"v-reporter",value:{data:Object(a["a"])({href:"/face/"+t.item.id},t.reporter),caller:"face_index"},expression:"{ data: { href: '/face/' + item.id, ...reporter }, caller: 'face_index' }"}],class:["m-face-item",{noName:t.noName}],attrs:{to:"/".concat(t.item.id),target:"_blank"}},[i("div",{staticClass:"m-img"},[i("img",{staticClass:"u-pic",attrs:{src:t.showThumb(t.imgLink),loading:"lazy"}}),t.item.star?i("i",{staticClass:"u-mark u-mark--star"},[t._v("编辑推荐")]):t._e(),~~t.item.price_type&&t.item.price_count?i("i",{staticClass:"u-mark u-mark--pay"},[t._v("付费")]):t._e()]),i("div",{staticClass:"m-op"},[i("div",{staticClass:"u-title"},[t._v(t._s(t.item.title))]),i("a",{staticClass:"u-author",attrs:{href:t.authorLink(t.item.user_id)},on:{click:function(i){return i.stopPropagation(),t.onAuthorClick.apply(null,arguments)}}},[t._v(" 作者："+t._s(t.item.original?t.author:t.item.author_name||"匿名")+" ")])])])},n=[],o=e("65c2"),r=e("85e4"),c={name:"faceItem",props:["item","reporter","noName"],data:function(){return{markmap:{newbie:"热门",advanced:"推荐",recommended:"精选"}}},computed:{author:function(){return this.item.display_name||"匿名"},imgLink:function(){var t;return(null===(t=this.item.images)||void 0===t?void 0:t[0])||o["__imgPath"]+"image/face/null2.png"}},methods:{showThumb:function(t){return Object(r["getThumbnail"])(t,360)},authorLink:r["authorLink"],onAuthorClick:function(){this.item.original||window.open(this.item.author_link,"_blank")}}},l=c,u=(e("9929"),e("2877")),d=Object(u["a"])(l,s,n,!1,null,null,null);i["a"]=d.exports},ea82:function(t,i,e){},efec:function(t,i,e){"use strict";var a=e("1a2d"),s=e("cb2d"),n=e("51eb"),o=e("b622"),r=o("toPrimitive"),c=Date.prototype;a(c,r)||s(c,r,n)}}]);
//# sourceMappingURL=chunk-6be589d7.12537caa.js.map