{"version":3,"sources":["webpack:///./src/views/horse/Index.vue","webpack:///src/views/horse/Index.vue","webpack:///./src/views/horse/Index.vue?d340","webpack:///./src/views/horse/Index.vue?4b3b","webpack:///./src/views/horse/Index.vue?0dde"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","searchProps","on","$event","searchEvent","_l","listAll","list","index","key","_v","_s","options","find","item","type","toList","scopedSlots","_u","fn","data","staticRenderFns","components","PvxSearch","HorseCross","HorseCard","query","page","pageSize","client","computed","$store","state","methods","iconLink","getHorses","_this","params","Object","assign","Promise","resole","reject","then","res","newList","map","MagicAttributes","length","mItem","iconUrl","icon","catch","err","getFeedList","_this2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","getFeeds","arr","start","tip","indexOf","end","feed","slice","feeds","JSON","parse","stringify","newArr","forEach","findIndex","nItem","id","push","label","stop","getAttrList","_this3","_callee2","_context2","getAttrs","newData","keys","deleteNull","$router","mounted","_this4","type0","type1","type2","all","component"],"mappings":"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","file":"js/chunk-31ea0f95.7d323e99.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"horse-home-wrapper\"},[_c('PvxSearch',{attrs:{\"items\":_vm.searchProps},on:{\"search\":function($event){return _vm.searchEvent($event)}}}),_c('div',{staticClass:\"list-wrapper\"},_vm._l((_vm.listAll),function(list,index){return _c('div',{key:index,staticClass:\"list-item-wrapper\"},[_c('div',{staticClass:\"title-header\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.searchProps[0].options.find((item) => item.type === index) ? _vm.searchProps[0].options.find((item) => item.type === index).name : \"全部\")+\" \")]),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.toList(index)}}},[_vm._v(\"查看全部\")])]),_c('horse-cross',{attrs:{\"list\":list},scopedSlots:_vm._u([{key:\"default\",fn:function(data){return [_c('HorseCard',{attrs:{\"item\":data.item}})]}}],null,true)})],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"horse-home-wrapper\" v-loading=\"loading\">\n        <PvxSearch :items=\"searchProps\" @search=\"searchEvent($event)\"></PvxSearch>\n        <div class=\"list-wrapper\">\n            <div class=\"list-item-wrapper\" v-for=\"(list, index) in listAll\" :key=\"index\">\n                <div class=\"title-header\">\n                    <div class=\"title\">\n                        {{\n                            searchProps[0].options.find((item) => item.type === index)\n                                ? searchProps[0].options.find((item) => item.type === index).name\n                                : \"全部\"\n                        }}\n                    </div>\n                    <a href=\"javascript:;\" @click=\"toList(index)\">查看全部</a>\n                    <!-- <router-link :to=\"`/list?type=${index}`\">查看全部</router-link> -->\n                </div>\n                <horse-cross :list=\"list\">\n                    <template v-slot=\"data\">\n                        <HorseCard :item=\"data.item\"></HorseCard>\n                    </template>\n                </horse-cross>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getHorses, getFeeds, getAttrs } from \"@/service/horse\";\nimport PvxSearch from \"@/components/PvxSearch.vue\";\nimport HorseCross from \"@/components/horse/HorseCross.vue\";\nimport HorseCard from \"@/components/horse/HorseCard\";\nimport { iconLink } from \"@jx3box/jx3box-common/js/utils\";\nimport { deleteNull } from \"@/utils/index\";\nexport default {\n    name: \"HorseHome\",\n    components: { PvxSearch, HorseCross, HorseCard },\n    data() {\n        return {\n            loading: false,\n            query: {\n                page: 1,\n                pageSize: 20,\n                client: this.client,\n            },\n            listAll: [],\n            searchProps: [\n                {\n                    key: \"type\",\n                    name: \"类型\",\n                    type: \"radio\",\n                    options: [\n                        {\n                            type: \"\",\n                            name: \"全部\",\n                        },\n                        {\n                            type: 0,\n                            name: \"普通坐骑\",\n                        },\n                        {\n                            type: 1,\n                            name: \"奇趣坐骑\",\n                        },\n                        {\n                            type: 2,\n                            name: \"马具\",\n                        },\n                    ],\n                },\n                {\n                    type: \"filter\",\n                    key: \"filter\",\n                    name: \"过滤\",\n                    options: [\n                        {\n                            key: \"feed\",\n                            type: \"checkbox\",\n                            name: \"喂食饲料\",\n                            options: [],\n                        },\n                        {\n                            key: \"attr\",\n                            type: \"checkbox\",\n                            name: \"属性\",\n                            options: [],\n                        },\n                    ],\n                },\n                {\n                    key: \"keyword\",\n                    name: \"名称/ID\",\n                },\n            ],\n        };\n    },\n    computed: {\n        client() {\n            return this.$store.state.client;\n        },\n    },\n    methods: {\n        iconLink,\n        getHorses(type) {\n            const query = this.query;\n            const params = Object.assign({ type: type }, query);\n            return new Promise((resole, reject) => {\n                getHorses(params)\n                    .then((res) => {\n                        let newList = res.data.list.map((item) => {\n                            if (item.MagicAttributes && item.MagicAttributes.length) {\n                                item.MagicAttributes.map((mItem) => {\n                                    mItem.iconUrl = this.iconLink(mItem.icon);\n                                    return mItem;\n                                });\n                            }\n                            return item;\n                        });\n                        resole(newList);\n                    })\n                    .catch((err) => {\n                        reject(err);\n                    });\n            });\n        },\n        async getFeedList() {\n            await getFeeds().then((res) => {\n                const arr = res.data.map((item) => {\n                    const start = item.tip.indexOf(\"【\");\n                    const end = item.tip.indexOf(\"】\");\n                    item.feed = item.tip.slice(start + 1, end);\n                    return item;\n                });\n                this.feeds = JSON.parse(JSON.stringify(arr));\n                const newArr = [];\n                arr.forEach((item) => {\n                    const index = newArr.findIndex((nItem) => nItem.feed === item.feed);\n                    if (index > -1) {\n                        newArr[index].id += \",\" + item.id;\n                    } else {\n                        newArr.push(item);\n                    }\n                });\n\n                const options = newArr.map((item) => {\n                    return {\n                        label: item.feed,\n                        value: item.id,\n                    };\n                });\n                this.searchProps[1].options[0].options = options;\n            });\n        },\n        async getAttrList() {\n            await getAttrs().then((res) => {\n                const data = res.data;\n                const options = data.map((item) => {\n                    return {\n                        label: item.name,\n                        value: item.name,\n                    };\n                });\n                this.searchProps[1].options[1].options = options;\n            });\n        },\n        searchEvent(data) {\n            const newData = Object.assign({}, data);\n            if (Object.keys(deleteNull(newData)).length) {\n                this.$router.push({ name: \"list\", params: deleteNull(newData) });\n            }\n        },\n        toList(type) {\n            this.$router.push({ name: \"list\", params: { type } });\n        },\n    },\n    mounted() {\n        const type0 = this.getHorses(0),\n            type1 = this.getHorses(1),\n            type2 = this.getHorses(2);\n        this.loading = true;\n        Promise.all([type0, type1, type2])\n            .then((data) => {\n                this.loading = false;\n                this.listAll = data;\n            })\n            .catch(() => {\n                this.loading = false;\n            });\n        this.getAttrList();\n        this.getFeedList();\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/horse/index.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=244bf455&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=244bf455&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=style&index=0&id=244bf455&prod&lang=less&\""],"sourceRoot":""}