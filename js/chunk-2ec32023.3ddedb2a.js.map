{"version":3,"sources":["webpack:///./src/views/share/ShareSingle.vue?aa12","webpack:///./src/service/share.js","webpack:///./src/views/share/ShareSingle.vue","webpack:///src/views/share/ShareSingle.vue","webpack:///./src/views/share/ShareSingle.vue?a921","webpack:///./src/views/share/ShareSingle.vue?e649","webpack:///./src/service/face.js"],"names":["getPosts","params","query","type","Object","assign","$cms","get","getPost","id","concat","setPost","data","put","render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","on","goBack","_v","_s","title","author_link","author_name","class","client","showClientLabel","post_date","update_date","views","canEdit","edit_link","_e","meta","pics","length","_l","item","i","key","$event","showOriginImage","showImage","url","previewSrcList","origin_author","facedata","post_type","author_id","staticRenderFns","components","Comment","post","stat","client_map","std","origin","all","computed","$route","_this$post","post_author","_this$post2","author","_this$post3","authorLink","_this$post4","_this$post5","editLink","ID","_this$post6","_this$post6$post_meta","post_meta","_this$post7","_this$post7$post_meta","_this$post8","_this$post9","_this$post10","post_title","_this$post11","User","getInfo","uid","isEditor","$store","state","_this$post12","showDate","Date","_this$post13","post_modified","_this$stat","_this$meta","map","resolveImagePath","methods","getData","_this","then","res","document","finally","getStat","postStat","$router","push","val","console","log","created","beforeRouteEnter","to","from","next","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","vm","wrap","_context","prev","getFaceOld","sent","location","href","stop","_x","apply","arguments","component","getFaceList","$next","getOneFaceInfo","setStar","cancelStar","onlineFace","isAdmin","offlineFace","deleteFace","delete","payFace","$pay","postType","PostId","priceType","priceCount","payUserId","accessUserId","loopPayStatus","getAccessoryList","postId","getDownUrl","uuid","getRandomFace","getSliders","per","undefined","_params","source_type","mute"],"mappings":"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","file":"js/chunk-2ec32023.3ddedb2a.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./ShareSingle.vue?vue&type=style&index=0&id=fb6b657a&prod&lang=less&\"","import { $cms } from \"@jx3box/jx3box-common/js/https\";\n\nfunction getMyPost(params) {\n    return $cms().get(\"/api/cms/posts/my\", {\n        params: params,\n    });\n}\n\nfunction getPosts(params) {\n    let query = {\n        type: \"share\",\n    };\n    if (params) {\n        query = Object.assign(query, params);\n    }\n    return $cms().get(\"/api/cms/posts\", {\n        params: query,\n    });\n}\nfunction getPost(id) {\n    return $cms().get(`/api/cms/post/${id}`);\n}\n\nfunction getMyPostCount() {\n    return $cms().get(\"/api/cms/posts/user/my/count\");\n}\n\nfunction setPost(id, data) {\n    return $cms().put(`/api/cms/post/${id}/setting`, data);\n}\n\nexport { getPosts, getPost, getMyPostCount, getMyPost, setPost };\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"v-share-single\"},[_c('div',{staticClass:\"m-navigation\"},[_c('el-button',{staticClass:\"u-goback\",attrs:{\"size\":\"medium\",\"icon\":\"el-icon-arrow-left\",\"plain\":\"\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返回列表\")])],1),_c('div',{staticClass:\"m-header\"},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"u-info\"},[_c('div',{staticClass:\"u-info-margin\"},[_c('i',{staticClass:\"el-icon-user-solid\"}),_c('a',{staticClass:\"u-name\",attrs:{\"target\":\"_blank\",\"href\":_vm.author_link}},[_vm._v(_vm._s(_vm.author_name))])]),_c('div',{staticClass:\"u-info-client u-info-margin\"},[_c('i',{staticClass:\"u-label-client\"},[_vm._v(\"适用客户端\")]),_c('span',{staticClass:\"u-client\",class:_vm.client},[_vm._v(_vm._s(_vm.showClientLabel(_vm.client)))])]),_c('span',{staticClass:\"u-info-margin\"},[_c('i',{staticClass:\"el-icon-date\"}),_c('time',[_vm._v(_vm._s(_vm.post_date))])]),_c('span',{staticClass:\"u-info-date u-info-margin\"},[_c('i',{staticClass:\"el-icon-date\"}),_c('time',[_vm._v(_vm._s(_vm.update_date))])]),_c('span',{staticClass:\"u-info-margin\"},[_c('i',{staticClass:\"el-icon-view\"}),_vm._v(\" \"+_vm._s(_vm.views)+\" \")]),(_vm.canEdit)?_c('a',{staticClass:\"u-info-margin\",attrs:{\"href\":_vm.edit_link}},[_c('i',{staticClass:\"u-icon-edit el-icon-edit-outline\"}),_c('span',[_vm._v(\"编辑\")])]):_vm._e()]),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"JX3BOX\")])],1),(_vm.meta.pics && _vm.meta.pics.length)?_c('div',{staticClass:\"m-single-pics\"},[_c('el-carousel',{staticClass:\"m-carousel\",attrs:{\"interval\":4000,\"type\":\"card\",\"arrow\":\"always\"}},_vm._l((_vm.meta.pics),function(item,i){return _c('el-carousel-item',{key:i},[_c('div',{staticClass:\"m-face-pic\",on:{\"click\":function($event){return _vm.showOriginImage(i)}}},[_c('el-image',{staticClass:\"u-pic\",attrs:{\"fit\":\"contain\",\"src\":_vm.showImage(item.url),\"preview-src-list\":_vm.previewSrcList}})],1)])}),1)],1):_vm._e(),_c('div',{staticClass:\"u-single-author\"},[_vm._v(\" 作者：\"),_c('b',[_vm._v(_vm._s(_vm.origin_author))])]),_c('div',{staticClass:\"m-single-data\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\" 独家数据分析 \")]),(_vm.facedata)?_c('facedata',{attrs:{\"data\":_vm.facedata}}):_vm._e()],1),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":_vm.post_type,\"postTitle\":_vm.title,\"userId\":_vm.author_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true}}),_c('div',[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"讨论\")]),_c('Comment',{attrs:{\"id\":_vm.id,\"category\":_vm.post_type}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"v-share-single\" v-loading=\"loading\">\n        <div class=\"m-navigation\">\n            <el-button class=\"u-goback\" size=\"medium\" icon=\"el-icon-arrow-left\" @click=\"goBack\" plain\n                >返回列表</el-button\n            >\n        </div>\n        <div class=\"m-header\">\n            <h2>{{ title }}</h2>\n            <div class=\"u-info\">\n                <div class=\"u-info-margin\">\n                    <i class=\"el-icon-user-solid\"></i>\n                    <a class=\"u-name\" target=\"_blank\" :href=\"author_link\">{{ author_name }}</a>\n                </div>\n                <div class=\"u-info-client u-info-margin\">\n                    <i class=\"u-label-client\">适用客户端</i>\n                    <span class=\"u-client\" :class=\"client\">{{ showClientLabel(client) }}</span>\n                </div>\n                <span class=\"u-info-margin\">\n                    <i class=\"el-icon-date\"> </i>\n                    <time>{{ post_date }}</time>\n                </span>\n                <span class=\"u-info-date u-info-margin\">\n                    <i class=\"el-icon-date\"> </i>\n                    <time>{{ update_date }}</time>\n                </span>\n                <span class=\"u-info-margin\">\n                    <i class=\"el-icon-view\"></i>\n                    {{ views }}\n                </span>\n                <a class=\"u-info-margin\" :href=\"edit_link\" v-if=\"canEdit\">\n                    <i class=\"u-icon-edit el-icon-edit-outline\"></i>\n                    <span>编辑</span>\n                </a>\n            </div>\n            <el-divider content-position=\"left\">JX3BOX</el-divider>\n        </div>\n\n        <div class=\"m-single-pics\" v-if=\"meta.pics && meta.pics.length\">\n            <el-carousel class=\"m-carousel\" :interval=\"4000\" type=\"card\" arrow=\"always\">\n                <el-carousel-item v-for=\"(item, i) in meta.pics\" :key=\"i\">\n                    <div class=\"m-face-pic\" @click=\"showOriginImage(i)\">\n                        <el-image\n                            fit=\"contain\"\n                            :src=\"showImage(item.url)\"\n                            class=\"u-pic\"\n                            :preview-src-list=\"previewSrcList\"\n                        >\n                        </el-image>\n                    </div>\n                </el-carousel-item>\n            </el-carousel>\n        </div>\n        <div class=\"u-single-author\">\n            作者：<b>{{ origin_author }}</b>\n        </div>\n        <div class=\"m-single-data\">\n            <el-divider content-position=\"left\"> 独家数据分析 </el-divider>\n            <facedata v-if=\"facedata\" :data=\"facedata\" />\n        </div>\n        <!-- 点赞 -->\n        <Thx\n            class=\"m-thx\"\n            :postId=\"id\"\n            :postType=\"post_type\"\n            :postTitle=\"title\"\n            :userId=\"author_id\"\n            :adminBoxcoinEnable=\"true\"\n            :userBoxcoinEnable=\"true\"\n        />\n        <!-- 评论 -->\n        <div>\n            <el-divider content-position=\"left\">讨论</el-divider>\n            <Comment :id=\"id\" :category=\"post_type\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport { resolveImagePath } from \"@jx3box/jx3box-common/js/utils\";\nimport { getPost } from \"@/service/share.js\";\nimport { getStat, postStat } from \"@jx3box/jx3box-common/js/stat\";\nimport facedata from \"@jx3box/jx3box-facedat/src/Facedat.vue\";\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport { __Links } from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { showDate } from \"@jx3box/jx3box-common/js/moment\";\nimport { editLink, authorLink } from \"@jx3box/jx3box-common/js/utils.js\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { getFaceOld } from \"@/service/face\"\nexport default {\n    name: \"single\",\n    components: { facedata, Comment },\n    data: function () {\n        return {\n            loading: false,\n            post: {},\n            stat: {},\n            client_map: {\n                std: \"重制\",\n                origin: \"缘起\",\n                all: \"双端\",\n            },\n        };\n    },\n    computed: {\n        id: function () {\n            return this.$route.params.id;\n        },\n\n        author_id: function () {\n            return this.post?.post_author || 0;\n        },\n        author_name: function () {\n            return this.post?.author || \"匿名\";\n        },\n        author_link: function () {\n            return authorLink(this.post?.post_author);\n        },\n        edit_link: function () {\n            return editLink(this.post?.post_type, this.post?.ID);\n        },\n        origin_author: function () {\n            return this.post?.post_meta?.author || \"匿名\";\n        },\n        facedata: function () {\n            return this.post?.post_meta?.data || \"\";\n        },\n        meta: function () {\n            return this.post?.post_meta || \"\";\n        },\n        post_type: function () {\n            return this.post?.post_type || \"share\";\n        },\n        title() {\n            return this.post?.post_title || \"无标题\";\n        },\n        canEdit: function () {\n            return this.post?.post_author == User.getInfo().uid || User.isEditor();\n        },\n        client() {\n            return this.$store.state.client;\n        },\n        post_date: function () {\n            return showDate(new Date(this.post?.post_date));\n        },\n        update_date: function () {\n            return showDate(new Date(this.post?.post_modified));\n        },\n        views: function () {\n            return this.stat?.views || \"-\";\n        },\n        previewSrcList: function () {\n            return this.meta?.pics.map((item) => resolveImagePath(item.url));\n        },\n    },\n    methods: {\n        getData() {\n            if (this.id) {\n                this.loading = true;\n                getPost(this.id)\n                    .then((res) => {\n                        this.post = this.$store.state.post = res.data.data;\n                        document.title = this.post.post_title;\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n\n                getStat(\"share\", this.id).then((res) => {\n                    this.stat = res.data;\n                });\n                postStat(\"share\", this.id);\n            }\n        },\n        goBack() {\n            this.$router.push({ name: \"list\" });\n        },\n        showClientLabel: function (val) {\n            return this.client_map[val];\n        },\n        showImage: function (val) {\n            return resolveImagePath(val);\n        },\n        showOriginImage: function (i) {\n            console.log(i);\n        },\n    },\n    created: function () {\n        this.getData();\n    },\n    beforeRouteEnter(to, from, next) {\n        next(async (vm) => {\n            const res = await getFaceOld(vm.id);\n            location.href = '/face/' + res.data.data\n        });\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/share/single.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./ShareSingle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./ShareSingle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ShareSingle.vue?vue&type=template&id=fb6b657a&\"\nimport script from \"./ShareSingle.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareSingle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareSingle.vue?vue&type=style&index=0&id=fb6b657a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $next, $pay, $cms } from \"@jx3box/jx3box-common/js/https\";\n\n/**\n * 获取捏脸列表\n * @param {*} params 参数\n */\nfunction getFaceList(params) {\n    return $next().get(\"/api/face\", { params });\n}\n\n/**\n * 兼容旧版的接口\n */\nfunction getFaceOld(id) {\n    return $next().get(`/api/face/old/${id}`);\n}\n\n/**\n * 获取一个捏脸\n * @param {int} id\n */\nfunction getOneFaceInfo(id) {\n    return $next().get(`/api/face/${id}`);\n}\n/**\n * 管理员设置一个精选\n * @param {int} id\n */\nfunction setStar(id) {\n    return $next().put(`/api/face/${id}/manager/set/star`);\n}\n/**\n * 管理员取消一个精选\n * @param {int} id\n */\nfunction cancelStar(id) {\n    return $next().put(`/api/face/${id}/manager/cancel/star`);\n}\n/**\n * 管理员/作者上架捏脸\n * @param {int} id\n * @param {Boolean} isAdmin\n */\nfunction onlineFace(id, isAdmin) {\n    if (isAdmin) {\n        return $next().put(`/api/face/${id}/manager/online`);\n    }\n    return $next().put(`/api/face/${id}/online`);\n}\n/**\n * 管理员/作者下架捏脸\n * @param {int} id\n * @param {Boolean} isAdmin\n */\nfunction offlineFace(id, isAdmin) {\n    if (isAdmin) {\n        return $next().put(`/api/face/${id}/manager/offline`);\n    }\n    return $next().put(`/api/face/${id}/offline`);\n}\n\n/**\n * 删除一个捏脸，软删除\n * @param id\n */\nfunction deleteFace(id) {\n    return $next().delete(`/api/face/${id}`);\n}\n/**\n * 购买捏脸\n * postType {string} 捏脸固定填face\n * PostId {int}  捏脸的主键id， 【可以从捏脸列表中获取id】\n * priceType {string} 支付方式。【可以从捏脸列表中获取 priceType】\n * priceCount {int} 支付数量 【可以从捏脸列表中获取 priceCount】\n * payUserId {int} 购买人的id  【当前登录用户】\n * accessUserId {int} 出售人的id  【可以从捏脸列表中获取 user_id】\n */\nfunction payFace(params) {\n    return $pay().post(\n        `/api/buy-licence/article/${params.postType}/${params.PostId}/pay/${params.priceType}/${params.priceCount}/from/${params.payUserId}/to/${params.accessUserId}`,\n        {}\n    );\n}\n/**\n * 循环获取支付结果\n * @param {Object} id  购买记录id\n */\nfunction loopPayStatus(id) {\n    return $pay().get(`/api/buy-licence/result/${id}`);\n}\n/**\n * 获取附件列表\n * @param {int} postId\n * @param {Object} params\n */\nfunction getAccessoryList(postId, params) {\n    return $next().get(`/api/charge_attachment/face/${postId}`, {\n        params: params,\n    });\n}\n\n/**\n * 获取最新一个附件（没有被作者或者管理删除的最新一个版本）\n * @param {int} postId\n * @param {Object} params\n */\nfunction getNewAccessory(postId, params) {\n    return $next().get(`/api/charge_attachment/face/${postId}/lastest`, {\n        params: params,\n    });\n}\n/**\n * 获取下载地址\n * @param {int} postId\n * @param {Object} uuid\n */\nfunction getDownUrl(postId, uuid) {\n    return $next().get(`/api/charge_attachment/download/face/${postId}/${uuid}`);\n}\n\n/**\n * 获取下载历史（当文章被删除后，或者附件被删除后,曾经下载过的数据，可以通过这个接口查询重新下载）\n * @param params\n * @returns {Promise<AxiosResponse<any>>}\n */\nfunction getDownHistory(params) {\n    return $next().get(`/api/charge_attachment/download-history`, {\n        params: params,\n    });\n}\nfunction getRandomFace(params) {\n    return $next().get(`/api/face/random`, {\n        params: params,\n    });\n}\n// 捏脸海报\nfunction getSliders(type, client, per = 10) {\n    let _params = {\n        client: client,\n        type: type,\n        source_type: \"face\",\n    };\n    if (per) {\n        _params.per = per;\n    }\n    return $cms({ mute: true }).get(`/api/cms/news/v2`, {\n        params: _params,\n    });\n}\nexport {\n    getFaceList,\n    getOneFaceInfo,\n    setStar,\n    cancelStar,\n    onlineFace,\n    offlineFace,\n    deleteFace,\n    payFace,\n    loopPayStatus,\n    getAccessoryList,\n    getNewAccessory,\n    getDownUrl,\n    getDownHistory,\n    getRandomFace,\n    getFaceOld,\n    getSliders,\n};\n"],"sourceRoot":""}