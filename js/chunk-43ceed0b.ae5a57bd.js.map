{"version":3,"sources":["webpack:///./src/views/face/Parse.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/bus.js","webpack:///node_modules/@jx3box/jx3box-facedat/src/Upload.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue?8ad8","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue?55fa","webpack:///src/views/face/Parse.vue","webpack:///./src/views/face/Parse.vue?99e2","webpack:///./src/views/face/Parse.vue?3bdc","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue?1f12","webpack:///./src/views/face/Parse.vue?7582"],"names":["render","_vm","this","_c","_self","staticClass","class","on","done","_v","handleSuccess","directives","name","rawName","value","expression","attrs","json","staticRenderFns","support","resetData","filename","uploadData","selectData","_m","props","components","data","file","object","computed","methods","i","fileInput","document","getElementById","dispatchEvent","MouseEvent","e","target","files","parseData","vm","fr","FileReader","onload","console","log","parseFace","result","ex","$notify","error","title","message","$emit","JSON","stringify","type","onerror","readAsArrayBuffer","filters","created","mounted","window","component","Facedat","Upload"],"mappings":"kJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,eAAeC,MAAM,CAAEC,GAAIN,EAAIO,OAAQ,CAACL,EAAG,KAAK,CAACE,YAAY,sBAAsB,CAACJ,EAAIQ,GAAG,aAAaN,EAAG,SAAS,CAACI,GAAG,CAAC,QAAUN,EAAIS,iBAAiBP,EAAG,UAAU,CAACQ,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAASC,MAAOb,EAAIO,KAAMO,WAAW,SAASV,YAAY,uBAAuBW,MAAM,CAAC,KAAOf,EAAIgB,KAAK,MAAO,MAAU,MAE1bC,EAAkB,G,YCFlBlB,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAAEJ,EAAIkB,QAAShB,EAAG,MAAM,CAACE,YAAY,YAAY,CAAGJ,EAAIO,KAA8R,CAACL,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,YAAY,CAACE,YAAY,UAAUW,MAAM,CAAC,KAAO,wBAAwBT,GAAG,CAAC,MAAQN,EAAImB,YAAY,CAACnB,EAAIQ,GAAG,UAAUN,EAAG,WAAW,CAACa,MAAM,CAAC,MAAQ,SAAWf,EAAIoB,SAAS,KAAO,UAAU,YAAY,OAAO,IAAhhB,CAAClB,EAAG,QAAQ,CAACE,YAAY,UAAUW,MAAM,CAAC,KAAO,OAAO,GAAK,YAAY,OAAS,qBAAqBT,GAAG,CAAC,OAASN,EAAIqB,cAAcnB,EAAG,YAAY,CAACE,YAAY,QAAQW,MAAM,CAAC,KAAO,UAAU,KAAO,mBAAmBT,GAAG,CAAC,MAAQN,EAAIsB,aAAa,CAACtB,EAAIQ,GAAG,YAAYR,EAAIuB,GAAG,KAAiQ,GAAGrB,EAAG,WAAW,CAACE,YAAY,eAAeW,MAAM,CAAC,MAAQ,SAAS,KAAO,UAAU,YAAc,oCAAoC,YAAY,OAAO,IAEv1BE,EAAkB,CAAC,WAAY,IAAIjB,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,IAAI,CAACE,YAAY,SAASW,MAAM,CAAC,KAAO,YAAY,OAAS,WAAW,CAACb,EAAG,IAAI,CAACE,YAAY,uBAAuBJ,EAAIQ,GAAG,oB,kCCDzL,IAAI,aAAI,IACL,I,YCmCA,GACfG,KAAA,SACAa,MAAA,GACAC,WAAA,GACAC,KAAA,WACA,OACAR,SAAA,EAEAS,KAAA,GACAX,KAAA,GACAY,OAAA,GAEArB,MAAA,IAGAsB,SAAA,CACAT,SAAA,WACA,YAAAO,MAAA,KAAAA,KAAAhB,OAGAmB,QAAA,CAEAR,WAAA,SAAAS,GACA,IAAAC,EAAAC,SAAAC,eAAA,aACAF,EAAAG,cAAA,IAAAC,WAAA,WAEAf,WAAA,SAAAgB,GACA,IAAAV,EAAAU,EAAAC,OAAAC,MAAA,GACA,KAAAZ,OACA,KAAAa,UAAAb,IAGAa,UAAA,SAAAb,GACA,GAAAA,EAAA,CACA,IAAAc,EAAA,KAGAC,EAAA,IAAAC,WACAD,EAAAE,OAAA,SAAAP,GACAQ,QAAAC,IAAA,oBACA,IACAL,EAAAb,OAAAmB,eAAAV,EAAAC,OAAAU,QAEA,MAAAC,GASA,OARAJ,QAAAC,IAAAG,GACAR,EAAAS,QAAAC,MAAA,CACAC,MAAA,KACAC,QAAA,gBAEAZ,EAAAa,MAAA,QACA3B,KAAAc,EAAAd,OAKA,GAAAc,EAAAb,OACA,IACAa,EAAAzB,KAAAuC,KAAAC,UAAAf,EAAAb,QACAa,EAAAS,QAAA,CACAE,MAAA,KACAC,QAAA,SACAI,KAAA,YAEAhB,EAAAlC,MAAA,EACAkC,EAAAa,MAAA,WACA3B,KAAAc,EAAAd,KACAX,KAAAyB,EAAAzB,KACAY,OAAAa,EAAAb,SAEA,MAAAS,GACAI,EAAAS,QAAAC,MAAA,CACAC,MAAA,KACAC,QAAA,WAEAZ,EAAAa,MAAA,QACA3B,KAAAc,EAAAd,SAKAe,EAAAgB,QAAA,SAAArB,GACAI,EAAAS,QAAAC,MAAA,CACAC,MAAA,KACAC,QAAA,YAGAX,EAAAiB,kBAAAhC,KAGAR,UAAA,WACA,KAAAZ,MAAA,EAEA,KAAAoB,KAAA,GACA,KAAAX,KAAA,GACA,KAAAY,OAAA,GACA,KAAA0B,MAAA,WACA3B,KAAA,GACAX,KAAA,GACAY,OAAA,OAIAgC,QAAA,GACAC,QAAA,aACAC,QAAA,WACA,KAAA5C,UAAA6C,OAAApB,aC9I+U,I,wBCQ3UqB,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCLA,G,UAAA,CACfrD,KAAA,gBACAa,MAAA,GACAE,KAAA,WACA,OACAA,KAAA,GACAnB,MAAA,IAGAsB,SAAA,CACAb,KAAA,WACA,YAAAU,MAAA,KAAAA,KAAAV,OAGAc,QAAA,CACArB,cAAA,SAAAiB,GACA,KAAAA,OACA,OAAAA,QAAA,IAAAA,KAAAV,KACA,KAAAT,MAAA,EAEA,KAAAA,MAAA,IAIAuD,QAAA,aAEArC,WAAA,CACAwC,eACAC,YC1C4Z,ICQxZ,G,UAAY,eACd,EACAnE,EACAkB,GACA,EACA,KACA,KACA,OAIa,e,6CCnBf,W,kCCAA,W","file":"js/chunk-43ceed0b.ae5a57bd.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-facedata\"},[_c('div',{staticClass:\"m-face-parse\",class:{ on: _vm.done }},[_c('h1',{staticClass:\"m-face-parse-title\"},[_vm._v(\"捏脸数据解析器\")]),_c('Upload',{on:{\"success\":_vm.handleSuccess}}),_c('Facedat',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.done),expression:\"done\"}],staticClass:\"m-face-parse-preview\",attrs:{\"data\":_vm.json,\"lock\":false}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"c-facedat-upload\"},[(_vm.support)?_c('div',{staticClass:\"u-upload\"},[(!_vm.done)?[_c('input',{staticClass:\"u-input\",attrs:{\"type\":\"file\",\"id\":\"face_file\",\"accept\":\".dat,.jx3dat,.ini\"},on:{\"change\":_vm.uploadData}}),_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload2\"},on:{\"click\":_vm.selectData}},[_vm._v(\"上传脸型数据\")]),_vm._m(0)]:[_c('div',{staticClass:\"u-result\"},[_c('el-button',{staticClass:\"u-reset\",attrs:{\"icon\":\"el-icon-refresh-left\"},on:{\"click\":_vm.resetData}},[_vm._v(\"清空重置\")]),_c('el-alert',{attrs:{\"title\":'当前文件为：' + _vm.filename,\"type\":\"success\",\"show-icon\":\"\"}})],1)]],2):_c('el-alert',{staticClass:\"u-notsupport\",attrs:{\"title\":\"浏览器不支持\",\"type\":\"warning\",\"description\":\"你的浏览器太老旧不支持本地读取,请更换chrome或其它现代浏览器\",\"show-icon\":\"\"}})],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('a',{staticClass:\"u-help\",attrs:{\"href\":\"/tool/746\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-collection\"}),_vm._v(\" 游戏脸型导入导出指南 \")])\n}]\n\nexport { render, staticRenderFns }","import Vue from \"vue\";\nconst Bus = new Vue({});\nexport default Bus;\n\n// Use like\n// Bus.$emit(事件名,数据);\n// Bus.$on(事件名,data => {});\n","<template>\n    <div class=\"c-facedat-upload\">\n        <div class=\"u-upload\" v-if=\"support\">\n            <template v-if=\"!done\">\n                <input class=\"u-input\" type=\"file\" id=\"face_file\" accept=\".dat,.jx3dat,.ini\" @change=\"uploadData\" />\n                <el-button\n                    class=\"u-btn\"\n                    type=\"primary\"\n                    @click=\"selectData\"\n                    icon=\"el-icon-upload2\"\n                >上传脸型数据</el-button>\n                <a class=\"u-help\" href=\"/tool/746\" target=\"_blank\">\n                    <i class=\"el-icon-collection\"></i> 游戏脸型导入导出指南\n                </a>\n            </template>\n            <template v-else>\n                <div class=\"u-result\">\n                    <el-button class=\"u-reset\" @click=\"resetData\" icon=\"el-icon-refresh-left\">清空重置</el-button>\n                    <el-alert :title=\"'当前文件为：' + filename\" type=\"success\" show-icon></el-alert>\n                </div>\n            </template>\n        </div>\n        <el-alert\n            v-else\n            class=\"u-notsupport\"\n            title=\"浏览器不支持\"\n            type=\"warning\"\n            description=\"你的浏览器太老旧不支持本地读取,请更换chrome或其它现代浏览器\"\n            show-icon\n        ></el-alert>\n    </div>\n</template>\n\n<script>\nimport Bus from \"./bus.js\";\nimport { parseFace } from \"./faceParser.js\";\n\nexport default {\n    name: \"Upload\",\n    props: [],\n    components: {},\n    data: function () {\n        return {\n            support: true,\n\n            file: \"\", //文件对象\n            json: \"\", //json data\n            object: \"\", //js object\n\n            done: false,\n        };\n    },\n    computed: {\n        filename: function () {\n            return this.file && this.file.name;\n        },\n    },\n    methods: {\n        // 上传数据\n        selectData: function (i) {\n            let fileInput = document.getElementById(\"face_file\");\n            fileInput.dispatchEvent(new MouseEvent(\"click\"));\n        },\n        uploadData: function (e) {\n            let file = e.target.files[0];\n            this.file = file;\n            this.parseData(file);\n        },\n        // 读取与读取数据\n        parseData: function (file) {\n            if (!file) return; //空数据不读取\n            const vm = this;\n\n            // 读入 File 转 ArrayBuffer 进行读取\n            let fr = new FileReader();\n            fr.onload = function (e) {\n                console.log(\"读取成功...开始执行分析...\");\n                try {\n                    vm.object = parseFace(e.target.result);\n                }\n                catch(ex) {\n                    console.log(ex);\n                    vm.$notify.error({\n                        title: \"错误\",\n                        message: \"无法读取数据\",\n                    });\n                    vm.$emit(\"fail\", {\n                        file: vm.file,\n                    });\n                    return;\n                }\n                // 读取成功才分析\n                if (vm.object) {\n                    try {\n                        vm.json = JSON.stringify(vm.object);\n                        vm.$notify({\n                            title: \"成功\",\n                            message: \"数据读取成功\",\n                            type: \"success\",\n                        });\n                        vm.done = true;\n                        vm.$emit(\"success\", {\n                            file: vm.file,\n                            json: vm.json,\n                            object: vm.object,\n                        });\n                    } catch (e) {\n                        vm.$notify.error({\n                            title: \"错误\",\n                            message: \"无法读取数据\",\n                        });\n                        vm.$emit(\"fail\", {\n                            file: vm.file,\n                        });\n                    }\n                }\n            };\n            fr.onerror = function (e) {\n                vm.$notify.error({\n                    title: \"错误\",\n                    message: \"文件读取异常\",\n                });\n            };\n            fr.readAsArrayBuffer(file);\n        },\n        // 重置上传\n        resetData: function () {\n            this.done = false;\n\n            this.file = \"\";\n            this.json = \"\";\n            this.object = \"\";\n            this.$emit(\"success\", {\n                file: \"\",\n                json: \"\",\n                object: \"\",\n            });\n        },\n    },\n    filters: {},\n    created: function () {},\n    mounted: function () {\n        this.support = !!window.FileReader;\n    },\n};\n</script>\n\n<style lang=\"less\">\n.c-facedat-upload {\n    .u-tip {\n        .fz(12px);\n        color: #999;\n    }\n    .mt(20px);\n    .u-input {\n        .none;\n    }\n    .u-upload {\n        .x;\n    }\n    .u-help {\n        .fz(12px,3);\n        color: @color-link;\n        .underline(@color-link);\n        i {\n            .fz(14px);\n            .y(-1px);\n        }\n    }\n    .u-btn {\n        .db;\n        margin: 0 auto;\n        .size(200px,50px);\n    }\n    .u-file {\n        .fz(14px,2);\n        color: #49c10f;\n        .bold;\n    }\n    .u-reset {\n        .mb(10px);\n    }\n}\n</style>","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upload.vue?vue&type=template&id=a23e7312&\"\nimport script from \"./Upload.vue?vue&type=script&lang=js&\"\nexport * from \"./Upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Upload.vue?vue&type=style&index=0&id=a23e7312&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"m-facedata\">\n        <div class=\"m-face-parse\" :class=\"{ on: done }\">\n            <h1 class=\"m-face-parse-title\">捏脸数据解析器</h1>\n            <Upload @success=\"handleSuccess\" />\n            <Facedat class=\"m-face-parse-preview\" :data=\"json\" :lock=\"false\" v-show=\"done\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport Facedat from \"@jx3box/jx3box-facedat/src/Facedat\";\nimport Upload from \"@jx3box/jx3box-facedat/src/Upload\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nexport default {\n    name: \"FacedataParse\",\n    props: [],\n    data: function () {\n        return {\n            data: \"\",\n            done: false,\n        };\n    },\n    computed: {\n        json: function () {\n            return this.data && this.data.json;\n        },\n    },\n    methods: {\n        handleSuccess: function (data) {\n            this.data = data;\n            if (data?.json) {\n                this.done = true;\n            } else {\n                this.done = false;\n            }\n        },\n    },\n    mounted: function () {\n    },\n    components: {\n        Facedat,\n        Upload,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/face/parse.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Parse.vue?vue&type=template&id=77e56b24&\"\nimport script from \"./Parse.vue?vue&type=script&lang=js&\"\nexport * from \"./Parse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Parse.vue?vue&type=style&index=0&id=77e56b24&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Upload.vue?vue&type=style&index=0&id=a23e7312&prod&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=style&index=0&id=77e56b24&prod&lang=less&\""],"sourceRoot":""}