(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-256323e2"],{"2ba9":function(t,e,i){},"466d":function(t,e,i){"use strict";var n=i("c65b"),s=i("d784"),r=i("825a"),a=i("50c4"),o=i("577e"),u=i("1d80"),c=i("dc4a"),l=i("8aa5"),d=i("14c3");s("match",(function(t,e,i){return[function(e){var i=u(this),s=void 0==e?void 0:c(e,t);return s?n(s,e,i):new RegExp(e)[t](o(i))},function(t){var n=r(this),s=o(t),u=i(e,n,s);if(u.done)return u.value;if(!n.global)return d(n,s);var c=n.unicode;n.lastIndex=0;var f,v=[],p=0;while(null!==(f=d(n,s))){var h=o(f[0]);v[p]=h,""===h&&(n.lastIndex=l(s,a(n.lastIndex),c)),p++}return 0===p?null:v}]}))},"4fadd":function(t,e,i){var n=i("d039"),s=i("861d"),r=i("c6b6"),a=i("d86b"),o=Object.isExtensible,u=n((function(){o(1)}));t.exports=u||a?function(t){return!!s(t)&&((!a||"ArrayBuffer"!=r(t))&&(!o||o(t)))}:o},"5fdf":function(t,e,i){},6062:function(t,e,i){"use strict";var n=i("6d61"),s=i("6566");n("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),s)},6566:function(t,e,i){"use strict";var n=i("9bf2").f,s=i("7c73"),r=i("e2cc"),a=i("0366"),o=i("19aa"),u=i("2266"),c=i("7dd0"),l=i("2626"),d=i("83ab"),f=i("f183").fastKey,v=i("69f3"),p=v.set,h=v.getterFor;t.exports={getConstructor:function(t,e,i,c){var l=t((function(t,n){o(t,v),p(t,{type:e,index:s(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=n&&u(n,t[c],{that:t,AS_ENTRIES:i})})),v=l.prototype,_=h(e),m=function(t,e,i){var n,s,r=_(t),a=b(t,e);return a?a.value=i:(r.last=a={index:s=f(e,!0),key:e,value:i,previous:n=r.last,next:void 0,removed:!1},r.first||(r.first=a),n&&(n.next=a),d?r.size++:t.size++,"F"!==s&&(r.index[s]=a)),t},b=function(t,e){var i,n=_(t),s=f(e);if("F"!==s)return n.index[s];for(i=n.first;i;i=i.next)if(i.key==e)return i};return r(v,{clear:function(){var t=this,e=_(t),i=e.index,n=e.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete i[n.index],n=n.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,i=_(e),n=b(e,t);if(n){var s=n.next,r=n.previous;delete i.index[n.index],n.removed=!0,r&&(r.next=s),s&&(s.previous=r),i.first==n&&(i.first=s),i.last==n&&(i.last=r),d?i.size--:e.size--}return!!n},forEach:function(t){var e,i=_(this),n=a(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:i.first){n(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!b(this,t)}}),r(v,i?{get:function(t){var e=b(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),d&&n(v,"size",{get:function(){return _(this).size}}),l},setStrong:function(t,e,i){var n=e+" Iterator",s=h(e),r=h(n);c(t,e,(function(t,e){p(this,{type:n,target:t,state:s(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,i=t.last;while(i&&i.removed)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),l(e)}}},"6d61":function(t,e,i){"use strict";var n=i("23e7"),s=i("da84"),r=i("e330"),a=i("94ca"),o=i("6eeb"),u=i("f183"),c=i("2266"),l=i("19aa"),d=i("1626"),f=i("861d"),v=i("d039"),p=i("1c7e"),h=i("d44e"),_=i("7156");t.exports=function(t,e,i){var m=-1!==t.indexOf("Map"),b=-1!==t.indexOf("Weak"),w=m?"set":"add",k=s[t],y=k&&k.prototype,x=k,g={},C=function(t){var e=r(y[t]);o(y,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(b&&!f(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return b&&!f(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!f(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})},O=a(t,!d(k)||!(b||y.forEach&&!v((function(){(new k).entries().next()}))));if(O)x=i.getConstructor(e,t,m,w),u.enable();else if(a(t,!0)){var j=new x,E=j[w](b?{}:-0,1)!=j,z=v((function(){j.has(1)})),I=p((function(t){new k(t)})),P=!b&&v((function(){var t=new k,e=5;while(e--)t[w](e,e);return!t.has(-0)}));I||(x=e((function(t,e){l(t,y);var i=_(new k,t,x);return void 0!=e&&c(e,i[w],{that:i,AS_ENTRIES:m}),i})),x.prototype=y,y.constructor=x),(z||P)&&(C("delete"),C("has"),m&&C("get")),(P||E)&&C(w),b&&y.clear&&delete y.clear}return g[t]=x,n({global:!0,forced:x!=k},g),h(x,t),b||i.setStrong(x,t,m),x}},acda:function(t,e,i){"use strict";i("5fdf")},ad91:function(t,e,i){"use strict";i("2ba9")},bb2f:function(t,e,i){var n=i("d039");t.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bd8e:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-wiki"},[t.wiki_post&&t.wiki_post.post?i("div",{staticClass:"m-wiki-post-panel"},[i("WikiPanel",{attrs:{"wiki-post":t.wiki_post}},[i("template",{slot:"head-title"},[i("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"31.531",height:"31.531",viewBox:"0 0 31.531 31.531","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[i("path",{attrs:{d:"M11.872 24.961l-2.539.412a2.59 2.59 0 01-1.961-.468 2.606 2.606 0 01-1.043-1.72l-.223-1.482-4.407 4.407a.835.835 0 00.438 1.413l2.801.523.523 2.801a.838.838 0 001.413.438l5.755-5.755-.422-.427a.471.471 0 00-.335-.142z"}}),i("path",{attrs:{d:"M19.91 23.932l2.458.404a1.554 1.554 0 001.794-1.303l.37-2.458c.075-.492.383-.917.829-1.141l2.224-1.111a1.564 1.564 0 00.686-2.111L27.129 14a1.518 1.518 0 010-1.403l1.144-2.211c.19-.37.227-.802.098-1.199a1.57 1.57 0 00-.785-.911l-2.223-1.112a1.53 1.53 0 01-.829-1.14l-.37-2.458a1.556 1.556 0 00-.624-1.026 1.555 1.555 0 00-1.17-.279l-2.457.405a1.52 1.52 0 01-1.335-.434L16.828.459A1.568 1.568 0 0015.766 0a1.566 1.566 0 00-1.061.459l-1.75 1.773a1.52 1.52 0 01-1.335.434l-2.457-.405a1.554 1.554 0 00-1.17.279 1.556 1.556 0 00-.624 1.026l-.37 2.458a1.532 1.532 0 01-.83 1.14L3.947 8.276a1.568 1.568 0 00-.785.912c-.129.396-.093.829.097 1.199l1.144 2.211c.229.439.229.964 0 1.403l-1.143 2.21a1.563 1.563 0 00.687 2.111l2.224 1.111c.446.224.753.649.829 1.141l.37 2.458c.062.412.288.783.624 1.026a1.55 1.55 0 001.17.277l2.458-.404c.489-.082.987.08 1.335.436l1.75 1.771a1.55 1.55 0 001.059.459 1.55 1.55 0 001.059-.459l1.75-1.771a1.517 1.517 0 011.335-.435zm-4.144-1.39c-5.205-.026-9.431-4.266-9.431-9.477 0-5.21 4.226-9.451 9.431-9.478 5.205.026 9.432 4.268 9.432 9.478-.001 5.211-4.227 9.451-9.432 9.477z"}}),i("path",{attrs:{d:"M15.766 4.955c-4.444.028-8.05 3.648-8.05 8.097 0 4.447 3.606 8.068 8.05 8.096 4.444-.027 8.05-3.648 8.05-8.096-.001-4.448-3.606-8.069-8.05-8.097zM29.833 26.11l-4.407-4.407-.223 1.482a2.615 2.615 0 01-3.004 2.188l-2.539-.412a.468.468 0 00-.335.143l-.422.427 5.755 5.755a.838.838 0 001.413-.438l.522-2.801 2.801-.523a.837.837 0 00.439-1.414z"}})]),i("span",{staticClass:"u-txt"},[t._v(t._s(t.title))])]),i("template",{slot:"head-actions"},[i("a",{staticClass:"el-button el-button--primary",attrs:{href:t.publish_url}},[i("i",{staticClass:"el-icon-edit"}),i("span",[t._v("完善"+t._s(t.title))])])]),i("template",{slot:"body"},[t.compatible?i("div",{staticClass:"m-wiki-compatible"},[i("i",{staticClass:"el-icon-warning-outline"}),t._v(" 暂无怀旧服攻略，以下为正式服攻略，仅作参考，"),i("a",{staticClass:"s-link",attrs:{href:t.publish_url}},[t._v("参与修订")]),t._v("。 ")]):t._e(),i("Article",{attrs:{content:t.wiki_post.post.content}}),i("div",{staticClass:"m-wiki-signature"},[i("i",{staticClass:"el-icon-edit"}),t._v(" 本次修订由 "),i("b",[t._v(t._s(t.user_name))]),t._v(" 提交于"+t._s(t.updated_at)+" ")]),i("Thx",{staticClass:"m-thx",attrs:{postId:t.id,postType:t.type,adminBoxcoinEnable:!1,userBoxcoinEnable:!1}})],1)],2),i("WikiRevisions",{attrs:{type:t.source_type,"source-id":t.source_id,isGame:!0}})],1):t._e(),t.is_empty?i("div",{staticClass:"m-wiki-post-empty"},[i("i",{staticClass:"el-icon-s-opportunity"}),i("span",[t._v("暂无攻略，我要")]),i("a",{staticClass:"s-link",attrs:{href:t.publish_url}},[t._v("完善攻略")])]):t._e()])},s=[],r=(i("99af"),i("a974")),a=i("662c"),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("WikiPanel",{staticClass:"c-wiki-revisions",attrs:{scene:"detail"}},[i("template",{slot:"head-title"},[i("i",{staticClass:"el-icon-time"}),i("span",[t._v("历史版本")])]),i("template",{slot:"body"},[i("div",{staticClass:"m-revisions-panel"},[t.versions&&t.versions.length?t._e():i("div",{staticClass:"u-empty"},[null===t.versions?i("span",[t._v("🎉 数据加载中...")]):t._e(),!1===t.versions?i("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.versions&&!t.versions.length?i("span",[t._v("💧 暂无数据")]):t._e()]),t.versions&&t.versions.length?i("table",{staticClass:"m-histories"},[i("tr",[i("th",[t._v("版本")]),i("th",[t._v("更新时间")]),i("th",[t._v("贡献者")]),i("th",[t._v("修订说明")])]),t._l(t.versions,(function(e,n){return i("tr",{key:n,staticClass:"history"},[i("td",[i("a",{attrs:{href:t.link(t.type,e.source_id+"/"+e.id)},domProps:{textContent:t._s("v"+(t.versions.length-n))},on:{click:function(i){return t.redirectRevision(e,i)}}})]),i("td",{domProps:{textContent:t._s(t.ts2str(e.updated))}}),i("td",[i("a",{attrs:{href:e.user_id?t.author_url(e.user_id):null},domProps:{textContent:t._s(e.user_nickname)}})]),i("td",{domProps:{textContent:t._s(e.remark)}})])}))],2):t._e()])])],2)},u=[],c=(i("caad"),i("2532"),i("fb6a"),i("ac1f"),i("5319"),i("4328")),l=i.n(c),d=i("41cb");let f={newest(t,e,i=1,n="std"){if(e)return Object(d["b"])()({method:"GET",url:"/api/wiki/post",params:{type:t,source_id:e,supply:i,client:n}})},newests(t){return Object(d["b"])()({method:"GET",url:"/api/wiki/posts/newest",params:{type:t}})},versions(t,e){if(e)return Object(d["b"])()({method:"GET",url:"/api/wiki/post/versions",params:{type:t,source_id:e}})},view(t,e={}){return t?Object(d["b"])()({method:"GET",url:"/api/wiki/post/"+t,params:e}):null},save(t){return Object(d["b"])()({method:"POST",url:"/api/wiki/post",data:l.a.stringify({post:t})})},myList(t){return Object(d["b"])()({method:"GET",url:"/api/my/wiki/posts",params:t})},myRemove(t){return t?Object(d["b"])()({method:"PUT",url:`/api/my/wiki/post/${t}/remove`}):null}};var v=i("85e4"),p=i("65c2"),h={name:"WikiRevisions",props:["type","sourceId","isGame"],data:function(){return{versions:null}},computed:{baseUrl:function(){return location.href.includes("classic")||location.href.includes("origin")?p["__OriginRoot"]:p["__Root"]},prefix:function(){return this.isGame?this.baseUrl.slice(0,-1):""}},methods:{link:function(t,e){return this.prefix+Object(v["getLink"])(t,e)},author_url:function(t){return this.prefix+Object(v["authorLink"])(t)},ts2str:v["ts2str"],redirectRevision:function(t,e){!this.isGame&&this.$router&&(e.preventDefault(),this.$router.replace({path:"/view/".concat(t.source_id,"/").concat(t.id)}))}},components:{WikiPanel:a["a"]},watch:{sourceId:{immediate:!0,handler:function(){var t=this;this.sourceId&&f.versions(this.type,this.sourceId).then((function(e){e=e.data,t.versions=200===e.code&&e.data.versions}),(function(){t.versions=!1}))}}}},_=h,m=(i("ad91"),i("2877")),b=Object(m["a"])(_,o,u,!1,null,null,null),w=b.exports,k={name:"Wiki",components:{WikiPanel:a["a"],WikiRevisions:w,Article:r["a"]},props:["title","source_type","source_id","type","id"],data:function(){return{wiki_post:null,compatible:!1}},computed:{post_content:function(){var t;return null===(t=this.wiki_post)||void 0===t?void 0:t.post},is_empty:function(){var t;return!(null!==(t=this.wiki_post)&&void 0!==t&&t.post)},isRevision:function(){return!!this.$route.params.post_id},client:function(){return this.$store.state.client},params:function(){return{type:this.source_type,source_id:this.id,supply:1,client:this.client}},user_name:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_nickname},updated_at:function(){var t,e;return Object(v["ts2str"])(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.updated)},publish_url:function(){return Object(v["publishLink"])("".concat(this.source_type,"/").concat(this.source_id))}},methods:{loadData:function(){var t=this;"std"==this.client?f.newest(this.source_type,this.source_id,1,"std").then((function(e){var i;t.wiki_post=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data,console.log("获取正式服攻略")})):f.newest(this.source_type,this.source_id,1,"origin").then((function(e){var i;t.wiki_post=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data,console.log("获取怀旧服攻略")})).then((function(){t.post_content||f.newest(t.source_type,t.source_id,1,"std").then((function(e){var i;t.wiki_post=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data,t.compatible=!0,console.log("兼容：获取正式服攻略")}))}))}},watch:{source_id:{immediate:!0,handler:function(t){t&&this.loadData()}}},mounted:function(){}},y=k,x=(i("acda"),Object(m["a"])(y,n,s,!1,null,null,null));e["a"]=x.exports},d86b:function(t,e,i){var n=i("d039");t.exports=n((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},f183:function(t,e,i){var n=i("23e7"),s=i("e330"),r=i("d012"),a=i("861d"),o=i("1a2d"),u=i("9bf2").f,c=i("241c"),l=i("057f"),d=i("4fadd"),f=i("90e3"),v=i("bb2f"),p=!1,h=f("meta"),_=0,m=function(t){u(t,h,{value:{objectID:"O"+_++,weakData:{}}})},b=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,h)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[h].objectID},w=function(t,e){if(!o(t,h)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[h].weakData},k=function(t){return v&&p&&d(t)&&!o(t,h)&&m(t),t},y=function(){x.enable=function(){},p=!0;var t=c.f,e=s([].splice),i={};i[h]=1,t(i).length&&(c.f=function(i){for(var n=t(i),s=0,r=n.length;s<r;s++)if(n[s]===h){e(n,s,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},x=t.exports={enable:y,fastKey:b,getWeakData:w,onFreeze:k};r[h]=!0}}]);
//# sourceMappingURL=chunk-256323e2.4ae441d6.js.map