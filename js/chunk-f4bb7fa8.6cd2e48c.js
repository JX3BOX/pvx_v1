(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4bb7fa8"],{"03a6":function(t,e,i){},"23d0":function(t,e,i){"use strict";i("5f92")},"2efc":function(t,e,i){"use strict";i("b0c0"),i("a9e3");var a=function(){var t=this,e=t._self._c;return e("a",{staticClass:"m-horse-card",class:"u-quality-bg--"+t.item.Quality,attrs:{href:t.getLink(t.item),target:"_blank"}},[15===t.item.SubType?e("el-image",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item)}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("img",{attrs:{src:t.getImgSrc(t.item,!0)},on:{error:t.replaceByDefault}})])]):e("item-icon",{attrs:{item_id:String(t.item.ItemID),isLink:!1,size:160,onlyIcon:!0}}),e("div",{staticClass:"u-name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"u-desc"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"u-img"},[t._l(t.MagicAttributes,(function(i,a){return e("el-tooltip",{key:a,attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])})),t.count?e("span",{staticClass:"u-more"},[t._v("+"+t._s(t.count))]):t._e()],2)],1)},n=[],o=(i("99af"),i("fb6a"),i("ac1f"),i("466d"),i("5319"),i("ed08")),s=i("bf15"),r=i("65c2"),c={props:{item:{type:Object,required:!0}},components:{ItemIcon:s["a"]},inject:["__imgRoot","__imgRoot2"],data:function(){return{}},computed:{isPhone:function(){return Object(o["b"])()},client:function(){return this.$store.state.client},MagicAttributes:function(){return this.isPhone&&this.item.MagicAttributes,this.item.MagicAttributes.length<=4?this.item.MagicAttributes:this.item.MagicAttributes.slice(0,3)||[]},count:function(){return this.isPhone||this.item.MagicAttributes.length<=4?0:this.item.MagicAttributes.slice(3).length}},methods:{replaceByDefault:function(t){t.target.src=i("d47d")},getLink:function(t){var e=t.ItemID,i=15===t.SubType?1:2;return"/horse/".concat(e,"?type=").concat(i)},getImgSrc:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e?this.client:"std",a=t.ImgPath;if(a){var n=a.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),o=null===n||void 0===n?void 0:n[1].replace(/\\/g,"/");return"default"==(null===n||void 0===n?void 0:n[1])?this.__imgRoot+"homeland/".concat(i)+"/default/default.png":this.__imgRoot+"homeland/".concat(i)+o+".png"}return"".concat(r["__cdn"],"/design/horse/").concat(i,"/").concat(t.ID,".png")},getType:function(t){var e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e}}},u=c,m=(i("c91a"),i("2877")),p=Object(m["a"])(u,a,n,!1,null,null,null);e["a"]=p.exports},"4c43":function(t){t.exports=JSON.parse('{"__Domain":"www.jx3box.com","__Origin":"origin.jx3box.com","__Root":"https://www.jx3box.com/","__OriginRoot":"https://origin.jx3box.com/","__Github":"https://github.jx3box.com/","__server":"https://server.jx3box.com/","__sso":"https://sso.jx3box.com/","__cms":"https://cms.jx3box.com/","__node":"https://node.jx3box.com/","__spider":"https://spider.jx3box.com/","__spider2":"https://spider2.jx3box.com/","__next":"https://next2.jx3box.com/","__pay":"https://pay.jx3box.com/","__team":"https://team.api.jx3box.com/","__lua":"https://lua.jx3box.com/","__down":"https://down.jx3box.com/","__dbm":"https://dbm.jx3box.com/","__helperUrl":"https://helper.jx3box.com/","__os":"https://os.jx3box.com/","__jx3":"https://xn--3-4g8a959k.com/","__cdn":"https://cdn.jx3box.com/","__ossRoot":"https://oss.jx3box.com/","__ossMirror":"https://cdn.jx3box.com/","__staticPath":{"origin":"https://oss.jx3box.com/static/","github":"https://jx3box.github.io/","jsdelivr":"https://cdn.jsdelivr.net/gh/JX3BOX/","mirror":"https://cdn.jx3box.com/static/"},"__dataPath":"https://data.jx3box.com/","__imgPath":"https://img.jx3box.com/","__iconPath":"https://icon.jx3box.com/","__clients":{"std":"重制","origin":"缘起","all":"双端"},"__postType":{"macro":"宏库","bps":"职业","pvp":"竞技","fb":"副本","tool":"工具","bbs":"茶馆","notice":"公告","jx3dat":"插件"},"__wikiType":{"achievement":"成就","item":"物品","knowledge":"通识","quest":"任务"},"__appType":{"face":"捏脸","pz":"配装","joke":"骚话","emotion":"表情","collection":"小册","item_plan":"清单","question":"题目","paper":"试卷","calendar":"日历","battle":"战斗"},"__gameType":{"pet":"宠物","adventure":"奇遇","furniture":"家具","horse":"坐骑","book":"书籍","exterior":"外观","reputation":"声望"},"__sourceType":{"cms_types":["macro","jx3dat","fb","bps","tool","bbs","notice","house","share","joke","emotion","feedback","collection","face"],"pvx_types":["pet","adventure","furniture","horse","book","exterior","reputation"],"wiki_types":["cj","achievement","item","item_plan","wiki","knowledge","quest"],"app_types":["pz","calendar","battle"],"exam_types":["question","paper"],"db_types":["skill","buff","npc","doodad"],"dbm_types":["vpk"],"team_types":["org","role","raid","apply"],"vip_types":["mall"]},"__visibleMap":{"0":"公开","1":"仅自己可见","2":"仅亲友可见","3":"密码可见","4":"付费可见","5":"粉丝可见"},"__userGroup":{"0":"游客","1":"待验证用户","8":"邮箱验证用户","16":"手机验证用户","32":"特约签约作者","64":"编辑","128":"管理员","256":"开发组","512":"超级管理"},"__userLevel":{"1":[0,600],"2":[600,900],"3":[900,1800],"4":[1800,3600],"5":[3600,7200],"6":[7200,999999]},"__userLevelColor":{"1":"#32d3c4","2":"#86c0fb","3":"#33d9ff","4":"#ffdb2a","5":"#ffa739","6":"#ff70b2","7":"#ff3399","8":"#f93c3c"},"__Links":{"account":{"login":"/account/login","register":"/account/register","email_verify":"/account/email_verify","login_callback":"/account/login_callback"},"dashboard":{"home":"/dashboard","msg":"/dashboard/msg","feed":"/dashboard/feed","fav":"/dashboard/fav","profile":"/dashboard/profile","connect":"/dashboard/connect","work":"/publish","publish":"/publish"}},"default_avatar":"https://cdn.jx3box.com/image/common/avatar.png","feedback":"https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=o8LHzsrN48nbkMHM243AzM4"}')},"5f92":function(t,e,i){},"7f8c":function(t,e,i){},abab:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"component",staticClass:"c-map"},[e("div",{ref:"wrapper",staticClass:"u-map__wrapper",style:t.wrapperSize},[e("div",{staticClass:"u-map__inner",style:t.innerStyle},[e("img",{staticClass:"u-map-img",attrs:{refs:"img",src:t.mapImg,draggable:"false"}}),t.overview?e("div",{staticClass:"u-map-title__wrapper"},[t._t("title",(function(){return[e("div",{staticClass:"u-map-title"},[t._v(t._s(t.mapName))])]}),{title:t.mapName})],2):t._e(),t._l(t.datas,(function(i,a){return[e("div",{key:a,staticClass:"u-map-point__wrapper",style:t.pointStyle(i),attrs:{"data-index":a}},[t._t("point",(function(){return[e("el-popover",{attrs:{"popper-class":"u-map-point__popover",placement:"top",width:"200",trigger:"hover"}},[t._t("popover",(function(){return[e("div",[t.overview?t._e():e("div",{staticClass:"u-map-title"},[t._v(t._s(t.mapName))]),e("div",[t._v(t._s(i.title))]),e("div",{domProps:{innerHTML:t._s(i.content)}})])]}),{data:i}),e("span",{staticClass:"u-map-point",attrs:{slot:"reference"},slot:"reference"})],2)]}),{data:i})],2)]}))],2)])])},n=[],o=i("5530"),s=(i("99af"),i("7db0"),i("d81d"),i("a9e3"),i("b64b"),i("d3b7"),i("0643"),i("76d6"),i("fffc"),i("a573"),i("4c43"));const{__imgPath:r}=s,c=()=>fetch(r+"/map/data/map_scales.json").then(t=>t.json());var u={name:"Jx3boxMap",props:{mapId:{type:Number,default:1},datas:{type:Array,default:function(){return[]}},overview:{type:Boolean,default:!0},focus:{type:Number,default:void 0},trimBorder:{type:Boolean,default:!1},mapDraggable:{type:Boolean,default:!1},pointDraggable:{type:Boolean,default:!1},mapFollow:{type:Boolean,default:!0}},data:function(){return{outerWidth:0,outerHeight:0,innerLeft:0,innerBottom:0,mapScales:{}}},computed:{innerWidth:function(){return this.overview?this.outerWidth:1024},innerHeight:function(){return this.overview?this.outerHeight:896},wrapperSize:function(){return{width:this.outerWidth+"px",height:this.outerHeight+"px"}},focusPoint:function(){return void 0!=this.focus?this.datas[this.focus]:null!==(t=this.datas.find((function(t){return t.focus})))&&void 0!==t?t:this.datas[0];var t},innerStyle:function(){var t={width:this.innerWidth+"px",height:this.innerHeight+"px"};if(this.overview)return t;var e=this.offsetLimit(this.innerLeft,this.innerBottom),i=e.left,a=e.bottom;return Object(o["a"])(Object(o["a"])({},t),{},{left:i+"px",bottom:a+"px"})},subId:function(){var t=this.mapScales[this.mapId];if(!t||Object.keys(t)<=1)return 0;var e=0,i=0;for(var a in t){var n={x:t[a].StartX,y:t[a].StartY,width:t[a].Width/t[a].Scale,height:t[a].Height/t[a].Scale};this.isPointsInRect(n)&&t[a].Scale>i&&(e=a,i=t[a].Scale)}return e},mapName:function(){var t,e;return null===(t=this.mapScales[this.mapId])||void 0===t||null===(e=t[this.subId])||void 0===e?void 0:e.Name},mapScale:function(){var t;return null===(t=this.mapScales[this.mapId])||void 0===t?void 0:t[this.subId]},mapImg:function(){return"".concat(s.__imgPath,"map/maps/map_").concat(this.mapId,"_").concat(this.subId,".png")}},mounted:function(){this.fetchMapScales(),this.$nextTick((function(){this.bindUpdateSizeListener(),this.bindDraggerListener()}))},beforeDestroy:function(){window.removeEventListener("resize",this.updateSize)},methods:{pointPosition:function(t){var e=this.mapScale;if(!e)return{left:0,bottom:0};var i=e.Width/e.Scale,a=e.Height/e.Scale,n=(t.x-e.StartX)/i*this.innerWidth,o=(t.y-e.StartY)/a*this.innerHeight;return{left:n,bottom:o}},gamePosition:function(t,e){var i=this.mapScale;if(!i)return{x:0,y:0};var a=i.Width/i.Scale,n=i.Height/i.Scale,o=t/this.innerWidth*a+i.StartX,s=e/this.innerHeight*n+i.StartY;return{x:o,y:s}},pointStyle:function(t){var e=this.pointPosition(t),i=e.left,a=e.bottom;return{left:i+"px",bottom:a+"px"}},isPointsInRect:function(t){var e=this.datas.map((function(t){return{x:t.x,y:t.y}}));return e.every((function(e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height}))},initInnerOffset:function(t){if(this.overview)return{x:0,y:0};var e={x:this.outerWidth/2,y:this.outerHeight/2},i=this.pointPosition(t);this.innerLeft=e.x-i.left,this.innerBottom=e.y-i.bottom},fetchMapScales:function(){var t=this;c().then((function(e){t.mapScales=e,t.initInnerOffset(t.focusPoint)}))},updateSize:function(){var t;if(this.outerWidth=null===(t=this.$refs["component"])||void 0===t?void 0:t.clientWidth,this.outerWidth){var e;if(this.overview)this.outerHeight=this.outerWidth/(1024/896);else this.outerHeight=null===(e=this.$refs["component"])||void 0===e?void 0:e.clientHeight;this.$emit("resize",[this.outerWidth,this.outerHeight])}},bindUpdateSizeListener:function(){var t=this.$refs["component"];t&&(this.updateSize(),t.addEventListener("resize",this.updateSize))},bindDraggerListener:function(){var t=this;if(this.mapDraggable||this.pointDraggable){var e=this.$refs["wrapper"];if(e){var i={},a=function(t){var e=t.target;while(!e.classList.contains("u-map__wrapper")){if(e.classList.contains("u-map-point__wrapper"))return i.pointIndex=Number(e.dataset["index"]),!0;e=e.parentNode}return!1},n=function(e){var a=e.clientX,n=e.clientY;i.dx=a-i.x,i.dy=i.y-n;var o=t.offsetLimit(i.px+i.dx,i.py+i.dy),s=o.left,r=o.bottom;t.innerLeft=s,t.innerBottom=r},o=function(e){var a=e.clientX,n=e.clientY,o=t.datas[i.pointIndex],s=t.mapScale;i.dx=(a-i.x)/s.Scale,i.dy=(i.y-n)/s.Scale;var r=t.positionLimit(i.px+i.dx,i.py+i.dy),c=r.x,u=r.y;o.x=c,o.y=u},s=function(e){i={};var s=e.clientX,c=e.clientY;if(i.x=s,i.y=c,a(e)){if(!t.pointDraggable)return;i.point=t.datas[i.pointIndex],i.type="point-move",i.px=i.point.x,i.py=i.point.y,document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)}else{if(!t.mapDraggable)return;i.type="map-move",i.px=t.innerLeft,i.py=t.innerBottom,document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)}},r=function(){document.removeEventListener("mousemove",n),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r),(i.dx||i.dy)&&(t.$emit(i.type,i),t.mapFollow&&"point-move"==i.type&&t.initInnerOffset(i.point))};e.addEventListener("mousedown",s)}}},offsetLimit:function(t,e){var i=0,a=this.outerWidth-this.innerWidth,n=0,o=this.outerHeight-this.innerHeight;return{left:Math.max(Math.min(t,i),a),bottom:Math.max(Math.min(e,n),o)}},positionLimit:function(t,e){var i=this.mapScale.StartX,a=this.mapScale.StartX+this.mapScale.Width/this.mapScale.Scale-1024,n=this.mapScale.StartY,o=this.mapScale.StartY+this.mapScale.Height/this.mapScale.Scale-1024;return{x:Math.max(Math.min(t,a),i),y:Math.max(Math.min(e,o),n)}}}},m=u,p=(i("c2ba"),i("2877")),l=Object(p["a"])(m,a,n,!1,null,"17f22fc4",null);e["a"]=l.exports},bf15:function(t,e,i){"use strict";i("99af");var a=function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"u-item",attrs:{placement:"right-start",trigger:"hover","visible-arrow":!1,"popper-class":"u-item__popup"}},[e("template",{slot:"reference"},[e("div",{staticClass:"u-item__warpper",class:{background:!t.onlyIcon,is_vertical:t.vertical}},[t.onlyName?t._e():e("a",{staticClass:"u-item-icon",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{target:"_blank",href:t.isLink?t.getLink("item",t.source.id):t.noLink()}},[e("img",{staticClass:"u-item-icon__img",style:{height:t.size+"px",width:t.size+"px",cursor:t.isLink?"pointer":"default"},attrs:{src:t.iconLink(t.source.IconID,t.client)}}),e("div",{staticClass:"u-item-icon__quality",style:{backgroundImage:t.item_border(t.source),opacity:5==t.source.Quality?.9:1}}),e("div",{staticClass:"u-item-icon__quest",style:{backgroundImage:t.item_border_quest(t.source)}}),1!==t.display_amount?e("span",{staticClass:"u-item-icon__count"},[t._v(t._s(t.display_amount))]):t._e()]),t.onlyIcon?t._e():e("div",{staticClass:"u-item-name",class:"e-jx3-item__q".concat(t.source.Quality)},[t._v(" "+t._s(t.source.Name)+" ")])])]),e("jx3-item",{attrs:{item:t.source}})],2)},n=[],o=(i("e9c4"),i("a9e3"),i("b64b"),i("c7fa")),s=i("4ae4"),r=i("85e4"),c=i("65c2"),u={name:"ItemIcon",data:function(){return{source:{},real_id:null,maybeBook:!1}},components:{"jx3-item":o["a"]},props:{size:{type:Number,default:28},item_id:{type:String,default:null},amount:{type:Number,default:1},onlyName:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},isLink:{type:Boolean,default:!0}},methods:{noLink:function(){return!1},get_data:function(t){var e=this;t&&Object(s["a"])(t,this.client).then((function(t){var i=t.data;Object.keys(i).length&&(e.source=i,sessionStorage.setItem(e.cache_key,JSON.stringify(i)))})).catch((function(t){var i;400==(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.code)&&!1===e.maybeBook&&(e.maybeBook=!0,e.real_id="".concat(e.item_id,"_").concat(e.amount))}))},iconLink:r["k"],getLink:r["g"],item_border_quest:function(t){return t.IsQuest>0?"url(".concat(c["__imgPath"],"image/item/renwu.png)"):""},item_border:function(t){switch(t.Quality){case 3:return"url(".concat(c["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(c["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(c["__imgPath"],"image/item/orange.gif)");default:return""}}},computed:{client:function(){return this.$store.state.client},cache_key:function(){return"item-".concat(this.client,"-").concat(this.real_id)},display_amount:function(){return!1===this.maybeBook?this.amount:1}},watch:{real_id:{immediate:!0,handler:function(){var t=sessionStorage.getItem(this.cache_key);if(t)try{this.source=JSON.parse(t)}catch(e){console.log(e,"[Item]无法解析本地缓存"),this.get_data(this.real_id)}else this.get_data(this.real_id)}},item_id:{immediate:!0,handler:function(){this.real_id=this.item_id}}}},m=u,p=(i("23d0"),i("2877")),l=Object(p["a"])(m,a,n,!1,null,null,null);e["a"]=l.exports},c2ba:function(t,e,i){"use strict";i("03a6")},c91a:function(t,e,i){"use strict";i("7f8c")},d47d:function(t,e,i){t.exports=i.p+"img/horse_item_bg_sm.1dd5cf95.jpg"},ef56:function(t){t.exports=JSON.parse('{"13":{"mapName":"金水镇","horses":["龙子","麟驹"],"coordinates":[{"x":51547,"y":17586,"z":1056512}]},"21":{"mapName":"巴陵县","horses":["龙子","麟驹"],"coordinates":[{"x":59030,"y":46042,"z":1056448}]},"22":{"mapName":"南屏山","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":87058,"y":61930,"z":1116416}]},"23":{"mapName":"龙门荒漠","horses":["龙子","麟驹"],"coordinates":[{"x":36139,"y":62593,"z":1065728}]},"30":{"mapName":"昆仑","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":36263,"y":72466,"z":1073792}]},"74":{"mapName":"帮会领地","coordinates":[{"x":17193,"y":25286,"z":1100032}]},"100":{"mapName":"白龙口","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":39766,"y":99090,"z":1120704}]},"101":{"mapName":"无量山","horses":["绝尘","赤蛇","闪电"],"coordinates":[{"x":78670,"y":112690,"z":1054784}]},"104":{"mapName":"黑龙沼","horses":["里飞沙·踏秋"],"coordinates":[{"x":82823,"y":102579,"z":1054400}]},"105":{"mapName":"苍山洱海","coordinates":[{"x":21128,"y":13890,"z":1140800}]},"216":{"mapName":"阴山大草原","horses":[["龙子·踏莎","麟驹·踏莎"],["绝尘·踏莎","赤蛇·踏莎","闪电·踏莎"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":87078,"y":40830,"z":1089088}]},"217":{"mapName":"黑戈壁","horses":[["龙子·燕歌","麟驹·燕歌"],["绝尘·燕歌","赤蛇·燕歌","闪电·燕歌"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":91514,"y":61046,"z":1077056}]},"411":{"mapName":"鲲鹏岛","horses":[["龙子·潮生","麟驹·潮生"],["绝尘·潮生","赤蛇·潮生","闪电·潮生"],["里飞沙·踏秋"],["赤兔·飞虹"]],"coordinates":[{"x":82174,"y":102429,"z":1092224}]}}')},f252:function(t,e,i){"use strict";i.d(e,"f",(function(){return o})),i.d(e,"d",(function(){return s})),i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return u})),i.d(e,"g",(function(){return p})),i.d(e,"e",(function(){return m}));var a=i("41cb"),n=Object(a["d"])();function o(t){return n.get("/horses",{params:t})}function s(t){return n.get("/horse",{params:t})}function r(t){return n.get("/horse/attrs",{params:t})}function c(t){return n.get("/horse/feeds",{params:t})}function u(t){return Object(a["c"])().get("/api/game/reporter/horse",{params:t})}function m(t,e){var i={pageIndex:1,pageSize:50,server:e,type:t,subtype:"share_msg"};return Object(a["c"])().get("/api/game/reporter/horse",{params:i})}function p(){return Object(a["a"])().get("/api/cms/user/my/info")}}}]);
//# sourceMappingURL=chunk-f4bb7fa8.6cd2e48c.js.map