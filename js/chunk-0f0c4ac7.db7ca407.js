(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f0c4ac7"],{"4b16":function(t,e,a){"use strict";a("cb23")},"6a48":function(t,e,a){},"73a2":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-facedata"},[e("div",{staticClass:"m-face-parse",class:{on:t.done}},[e("h1",{staticClass:"m-face-parse-title"},[t._v("捏脸数据解析器")]),e("Upload",{attrs:{type:"face"},on:{success:t.handleSuccess}}),e("Facedat",{directives:[{name:"show",rawName:"v-show",value:t.done,expression:"done"}],staticClass:"m-face-parse-preview",attrs:{data:t.json,lock:!1}})],1)])},n=[],o=a("e0bb"),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"c-facedat-upload"},[t.support?e("div",{staticClass:"u-upload"},[t.done?[e("div",{staticClass:"u-result"},[e("el-button",{staticClass:"u-reset",attrs:{icon:"el-icon-refresh-left"},on:{click:t.resetData}},[t._v("清空重置")]),e("el-alert",{attrs:{title:"当前文件为："+t.filename,type:"success","show-icon":""}})],1)]:[e("input",{staticClass:"u-input",attrs:{type:"file",id:"face_file",accept:".dat,.jx3dat,.ini"},on:{change:t.uploadData}}),e("el-button",{staticClass:"u-btn",attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:t.selectData}},[t._v(t._s(t.btnText))]),"face"===t.type?e("a",{staticClass:"u-help",attrs:{href:"/tool/746",target:"_blank"}},[e("i",{staticClass:"el-icon-collection"}),t._v(" 游戏脸型导入导出指南 ")]):t._e()]],2):e("el-alert",{staticClass:"u-notsupport",attrs:{title:"浏览器不支持",type:"warning",description:"你的浏览器太老旧不支持本地读取,请更换chrome或其它现代浏览器","show-icon":""}})],1)},c=[],l=(a("b0c0"),a("e9c4"),a("99af"),a("d3b7"),a("25f0"),a("bda6")),r=a("162f"),u=a("fb5f"),f={name:"Upload",props:{type:{type:String,default:""}},components:{},data:function(){return{support:!0,file:"",json:"",object:"",done:!1,types:u.bodyMap}},computed:{btnText:function(){var t="上传脸型/体型数据";return"face"===this.type&&(t="上传脸型数据"),"body"===this.type&&(t="上传体型数据"),t},filename:function(){return this.file&&this.file.name}},methods:{selectData:function(t){var e=document.getElementById("face_file");e.dispatchEvent(new MouseEvent("click"))},uploadData:function(t){var e=t.target.files[0];this.file=e,this.parseData(e)},parseData:function(t){if(t){var e=this,a=new FileReader;a.onload=function(t){console.log("读取成功...开始执行分析...");try{if(!e.type){var a=Object(l["b"])(t.target.result);a.tBody?e.object=Object(r["load"])(t.target.result):e.object=a}if("face"===e.type&&(e.object=Object(l["b"])(t.target.result),e.object.tBody))return e.$notify.error({title:"错误",message:"请导入脸型数据"});"body"===e.type&&(e.object=Object(r["load"])(t.target.result))}catch(n){return console.log(n),e.$notify.error({title:"错误",message:"无法读取数据"}),void e.$emit("fail",{file:e.file})}if(e.object)try{var s;e.json=JSON.stringify(e.object),e.$notify({title:"成功",message:"".concat((null===(s=e.types[e.object.nRoleType.toString()])||void 0===s?void 0:s.label)||"").concat("face"===e.type?"脸型":"body"===e.type?"体型":"","数据读取成功"),type:"success"}),e.done=!0,e.$emit("success",{file:e.file,json:e.json,object:e.object})}catch(t){e.$notify.error({title:"错误",message:"无法读取数据"}),e.$emit("fail",{file:e.file})}},a.onerror=function(t){e.$notify.error({title:"错误",message:"文件读取异常"})},a.readAsArrayBuffer(t)}},resetData:function(){this.done=!1,this.file="",this.json="",this.object="",this.$emit("success",{file:"",json:"",object:""})}},filters:{},created:function(){},mounted:function(){this.support=!!window.FileReader}},d=f,p=(a("4b16"),a("2877")),b=Object(p["a"])(d,i,c,!1,null,null,null),h=b.exports,y=(a("65c2"),{name:"FacedataParse",props:[],data:function(){return{data:"",done:!1}},computed:{json:function(){return this.data&&this.data.json}},methods:{handleSuccess:function(t){this.data=t,null!==t&&void 0!==t&&t.json?this.done=!0:this.done=!1}},mounted:function(){},components:{Facedat:o["a"],Upload:h}}),m=y,j=(a("f44f"),Object(p["a"])(m,s,n,!1,null,null,null));e["default"]=j.exports},cb23:function(t,e,a){},f44f:function(t,e,a){"use strict";a("6a48")}}]);
//# sourceMappingURL=chunk-0f0c4ac7.db7ca407.js.map