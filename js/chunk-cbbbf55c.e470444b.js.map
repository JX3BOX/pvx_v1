{"version":3,"sources":["webpack:///./src/views/face/single.vue?4080","webpack:///./src/views/face/single.vue","webpack:///src/views/face/single.vue","webpack:///./src/views/face/single.vue?082d","webpack:///./src/views/face/single.vue?e65c"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","on","goBack","_v","nativeOn","$event","type","indexOf","_k","keyCode","key","getFaceList","apply","arguments","model","searche","callback","$$v","slot","post","banner","_e","original","showAvatar","user_avatar","_s","title","authorLink","user_id","display_name","author_link","author_name","updated_at","class","client","star","showClientLabel","body_type","showBodyTypeLabel","remark","previewSrcList","length","_l","item","i","price_type","price_count","has_buy","facePay","downFileList","id","describe","created_at","getDownUrl","uuid","facedata","randomList","goToOther","images","staticRenderFns","components","Comment","data","stat","client_map","std","origin","all","downloadParams","pageIndex","pageSize","total","computed","watch","created","methods","params","val","getData","getOneFaceInfo","then","document","finally","getStat","postStat","onAuthorClick","window","downloadPageQuery","getAccessoryList","postType","PostId","priceType","priceCount","accessUserId","payUserId","console","payFace","loopPayStatus","getPayFaceStatus","pay_status","setIntervalId","message","clearInterval","getRandomFaceList","limit","getRandomFace","component"],"mappings":"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","file":"js/chunk-cbbbf55c.e470444b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./single.vue?vue&type=style&index=0&id=39788856&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"v-face-single\"},[_c('div',{staticClass:\"m-navigation\"},[_c('el-button',{staticClass:\"u-goback\",attrs:{\"size\":\"medium\",\"icon\":\"el-icon-arrow-left\",\"plain\":\"\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返回列表\")]),_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入搜索内容\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.getFaceList.apply(null, arguments)}},model:{value:(_vm.searche),callback:function ($$v) {_vm.searche=$$v},expression:\"searche\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"关键词\")]),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getFaceList},slot:\"append\"})],1)],1),(_vm.post.banner)?_c('div',{staticClass:\"m-banner\"},[_c('img',{attrs:{\"src\":_vm.post.banner}})]):_vm._e(),_c('div',{staticClass:\"m-header\"},[(_vm.post.original)?_c('img',{staticClass:\"u-avatar\",attrs:{\"src\":_vm.showAvatar(_vm.post.user_avatar)}}):_vm._e(),_c('h2',{staticClass:\"u-title\"},[_vm._v(_vm._s(_vm.post.title || '无标题'))]),_c('div',{staticClass:\"u-info\"},[_c('div',{staticClass:\"u-author u-info-margin\"},[_vm._v(\" By \"),(!!~~_vm.post.original)?_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm.authorLink(_vm.post.user_id),\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.post.display_name))]):_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm.post.author_link,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.post.author_name))]),_c('time',{staticClass:\"u-time\"},[_vm._v(_vm._s(_vm.post.updated_at))])]),_c('div',{staticClass:\"u-info-client\"},[_c('span',{class:_vm.post.client},[(!!_vm.post.star)?_c('i',{staticClass:\"u-mark\"},[_vm._v(\"★ 编辑推荐\")]):_vm._e(),_c('i',{staticClass:\"u-client\",class:_vm.post.client || 'std'},[_vm._v(_vm._s(_vm.showClientLabel(_vm.post.client)))]),(_vm.post.body_type)?_c('i',{staticClass:\"u-bodytype\",class:'u-bodytyoe-'+_vm.post.body_type},[_vm._v(_vm._s(_vm.showBodyTypeLabel(_vm.post.body_type)))]):_vm._e()])])]),(_vm.post.remark)?_c('div',{staticClass:\"u-desc\"},[_vm._v(_vm._s(_vm.post.remark))]):_vm._e(),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-pie-chart\"}),_vm._v(\"预览 \")])],1),(_vm.previewSrcList && _vm.previewSrcList.length>0)?_c('div',{staticClass:\"m-single-pics\"},[_c('el-carousel',{staticClass:\"m-carousel\",attrs:{\"interval\":4000,\"type\":\"card\",\"arrow\":\"always\"}},_vm._l((_vm.previewSrcList),function(item,i){return _c('el-carousel-item',{key:i},[_c('div',{staticClass:\"m-face-pic\"},[_c('el-image',{staticClass:\"u-pic\",attrs:{\"fit\":\"contain\",\"src\":item,\"preview-src-list\":_vm.previewSrcList}})],1)])}),1)],1):_vm._e(),_c('div',{staticClass:\"m-face-pay\"},[_c('div',{staticClass:\"m-face-pay-info\"},[(_vm.post.price_type==0)?_c('el-tag',{attrs:{\"effect\":\"plain\",\"type\":\"success\"}},[_vm._v(\"免费\")]):_vm._e(),(_vm.post.price_type!=0)?_c('el-tag',{attrs:{\"effect\":\"plain\",\"type\":\"warning\"}},[(_vm.post.price_type ==1)?_c('span',[_vm._v(_vm._s(_vm.post.price_count)+\" 盒币\")]):_vm._e(),(_vm.post.price_type ==2)?_c('span',[_vm._v(_vm._s(_vm.post.price_count)+\" 金箔\")]):_vm._e()]):_vm._e()],1),(_vm.post.price_type != 0 && !_vm.has_buy)?_c('div',{staticClass:\"m-face-pay-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-shopping-cart-2\"},on:{\"click\":_vm.facePay}},[_vm._v(\"购买\")])],1):_vm._e()]),(_vm.has_buy && _vm.downFileList>0)?_c('div',{staticClass:\"m-face-files\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"下载列表\")]),_c('ul',{staticClass:\"m-face-files-list\"},_vm._l((_vm.downFileList),function(item){return _c('li',{key:item.id},[_c('i',{staticClass:\"el-icon-document\"}),_c('span',{staticClass:\"u-desc\"},[_vm._v(\" \"+_vm._s(item.describe ? item.describe : \"暂无描述\")+\" \")]),_c('div',{staticClass:\"u-time\"},[_c('i',{staticClass:\"el-icon-date\"}),_vm._v(\" 上传于 \"+_vm._s(item.created_at)+\" \")]),_c('div',{staticClass:\"el-button-group u-action\"},[_c('el-button',{attrs:{\"icon\":\"el-icon-download\",\"size\":\"small\",\"round\":\"\"},on:{\"click\":function($event){return _vm.getDownUrl(item.uuid)}}},[_vm._v(\"下载\")])],1)])}),0)],1):_vm._e(),(_vm.has_buy && _vm.facedata)?_c('div',{staticClass:\"m-single-data\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"独家数据分析\")]),(_vm.facedata)?_c('facedata',{attrs:{\"data\":_vm.facedata}}):_vm._e()],1):_vm._e(),_c('div',{staticClass:\"m-random-list\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"作者其他作品\")]),_c('el-row',{attrs:{\"gutter\":20}},_vm._l((_vm.randomList),function(item){return _c('el-col',{key:item.id,attrs:{\"span\":3}},[_c('div',{staticClass:\"u-random-box\",on:{\"click\":function($event){return _vm.goToOther(item)}}},[_c('div',{staticClass:\"u-random-img\"},[_c('el-image',{attrs:{\"fit\":\"contain\",\"src\":item.images[0],\"preview-src-list\":[item.images[0]]}},[_c('div',{staticClass:\"u-image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])])],1),_c('router-link',{staticClass:\"u-face\",attrs:{\"to\":'/single/' + item.id,\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(item.title || \"未命名\")+\" \")])],1)])}),1)],1),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":\"face\",\"postTitle\":_vm.post.title || '无标题',\"userId\":_vm.post.user_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true}}),_c('div',[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"讨论\")]),_c('Comment',{attrs:{\"id\":_vm.id,\"category\":\"face\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"v-face-single\" v-loading=\"loading\">\n        <div class=\"m-navigation\">\n            <el-button class=\"u-goback\" size=\"medium\" icon=\"el-icon-arrow-left\" @click=\"goBack\" plain>返回列表</el-button>\n            <el-input placeholder=\"请输入搜索内容\" v-model=\"searche\" class=\"input-with-select\" @keyup.enter.native=\"getFaceList\">\n                <span slot=\"prepend\">关键词</span>\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getFaceList\"></el-button>\n            </el-input>\n        </div>\n        <!-- 海报banner -->\n        <div class=\"m-banner\" v-if=\"post.banner\">\n            <img  :src=\"post.banner\">\n        </div>\n        <!-- 基本信息 -->\n        <div class=\"m-header\">\n            <img :src=\"showAvatar(post.user_avatar)\" class=\"u-avatar\" v-if=\"post.original\"/>\n            <h2 class=\"u-title\">{{ post.title || '无标题' }}</h2>\n            <div class=\"u-info\">\n                <div class=\"u-author u-info-margin\">\n                    By\n                    <a class=\"u-name\" :href=\"authorLink(post.user_id)\" target=\"_blank\" v-if=\"!!~~post.original\">{{\n                        post.display_name\n                    }}</a>\n                    <a class=\"u-name\" :href=\"post.author_link\" target=\"_blank\" v-else>{{ post.author_name }}</a>\n                    <time class=\"u-time\">{{ post.updated_at }}</time>\n                </div>\n\n                <div class=\"u-info-client\">\n                    <span :class=\"post.client\">\n                        <i class=\"u-mark \" v-if=\"!!post.star\">★ 编辑推荐</i>\n                        <i class=\"u-client\" :class=\"post.client || 'std'\">{{ showClientLabel(post.client) }}</i>\n                        <i class=\"u-bodytype\" :class=\"'u-bodytyoe-'+post.body_type\" v-if=\"post.body_type\">{{showBodyTypeLabel(post.body_type)}}</i>\n                    </span>\n                </div>\n\n            </div>\n            <div class=\"u-desc\" v-if=\"post.remark\">{{ post.remark }}</div>\n            <el-divider content-position=\"left\">\n                 <i class=\"el-icon-pie-chart\"></i>预览\n            </el-divider>\n        </div>\n\n        <div class=\"m-single-pics\" v-if=\"previewSrcList && previewSrcList.length>0\">\n            <el-carousel class=\"m-carousel\" :interval=\"4000\" type=\"card\" arrow=\"always\">\n                <el-carousel-item v-for=\"(item, i) in previewSrcList\" :key=\"i\">\n                    <div class=\"m-face-pic\"><el-image fit=\"contain\" :src=\"item\" class=\"u-pic\" :preview-src-list=\"previewSrcList\"></el-image></div>\n                </el-carousel-item>\n            </el-carousel>\n        </div>\n        <!-- 购买区 -->\n        <div class=\"m-face-pay\">\n            <div class=\"m-face-pay-info\">\n                <el-tag effect=\"plain\" type=\"success\" v-if=\"post.price_type==0\">免费</el-tag>\n                <el-tag effect=\"plain\" type=\"warning\" v-if=\"post.price_type!=0\">\n                    <span v-if=\"post.price_type ==1\">{{ post.price_count }} 盒币</span>\n                    <span v-if=\"post.price_type ==2\">{{ post.price_count }} 金箔</span>\n                </el-tag>\n            </div>\n            <div class=\"m-face-pay-btn\" v-if=\"post.price_type != 0 && !has_buy\">\n                <el-button type=\"primary\" size=\"small\" icon=\"el-icon-shopping-cart-2\" @click=\"facePay\">购买</el-button>\n            </div>\n        </div>\n        <!--下载区-->\n        <div class=\"m-face-files\" v-if=\"has_buy && downFileList>0\">\n            <el-divider content-position=\"left\">下载列表</el-divider>\n            <ul class=\"m-face-files-list\">\n                <li v-for=\"item in downFileList\" :key=\"item.id\">\n                    <i class=\"el-icon-document\"></i>\n                    <span class=\"u-desc\">\n                        {{ item.describe ? item.describe : \"暂无描述\" }}\n                    </span>\n                    <div class=\"u-time\">\n                        <i class=\"el-icon-date\"></i>\n                        上传于 {{ item.created_at }}\n                    </div>\n                    <div class=\"el-button-group u-action \">\n                        <el-button icon=\"el-icon-download\" size=\"small\" round @click=\"getDownUrl(item.uuid)\"\n                        >下载</el-button\n                        >\n                    </div>\n                </li>\n            </ul>\n        </div>\n       <div class=\"m-single-data\" v-if=\"has_buy && facedata\">\n            <el-divider content-position=\"left\">独家数据分析</el-divider>\n            <facedata v-if=\"facedata\" :data=\"facedata\" />\n        </div>\n        <!--作者随机作品-->\n        <div class=\"m-random-list\">\n            <el-divider content-position=\"left\">作者其他作品</el-divider>\n            <el-row :gutter=\"20\">\n                <el-col :span=\"3\" v-for=\"item in randomList\" :key=\"item.id\">\n                    <div class=\"u-random-box\" @click=\"goToOther(item)\">\n                        <div class=\"u-random-img\">\n                            <el-image fit=\"contain\" :src=\"item.images[0]\" :preview-src-list=\"[item.images[0]]\">\n                                <div slot=\"error\" class=\"u-image-slot\">\n                                    <i class=\"el-icon-picture-outline\"></i>\n                                </div>\n                            </el-image>\n                        </div>\n                        <router-link class=\"u-face\" :to=\"'/single/' + item.id\" target=\"_blank\">\n                            {{item.title || \"未命名\"}}\n                        </router-link>\n                    </div>\n                </el-col>\n            </el-row>\n        </div>\n        <!-- 点赞 -->\n       <Thx class=\"m-thx\" :postId=\"id\" postType=\"face\" :postTitle=\"post.title || '无标题'\" :userId=\"post.user_id\" :adminBoxcoinEnable=\"true\" :userBoxcoinEnable=\"true\" />\n        <!-- 评论 -->\n        <div>\n            <el-divider content-position=\"left\">讨论</el-divider>\n            <Comment :id=\"id\" category=\"face\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getOneFaceInfo, payFace,loopPayStatus,getAccessoryList,getDownUrl,getRandomFace} from '@/service/face.js';\nimport { getStat, postStat } from '@jx3box/jx3box-common/js/stat';\nimport facedata from '@jx3box/jx3box-facedat/src/Facedat.vue';\nimport Comment from '@jx3box/jx3box-comment-ui/src/Comment.vue';\nimport {editLink,showMinibanner, showBanner, showAvatar, authorLink } from \"@jx3box/jx3box-common/js/utils\";\nimport User from '@jx3box/jx3box-common/js/user';\nimport {bodyMap} from '@jx3box/jx3box-data/data/role/body.json';\nexport default {\n    name: 'single',\n    components: { facedata, Comment },\n    data: function() {\n        return {\n            loading: false,\n            searche: '', //搜索值\n            post: {},\n            stat: {},\n            has_buy: false, //是否购买\n            client_map: {\n                std: '重制',\n                origin: '缘起',\n                all: '双端'\n            },\n            downFileList: [],\n            downloadParams: {\n                pageIndex: 1,\n                pageSize: 4,\n                total: 0\n            },\n            randomList:[]\n        };\n    },\n    computed: {\n        id: function() {\n            return this.$route.params.id;\n        },\n        facedata: function() {\n            return this.post?.data || '';\n        },\n        previewSrcList: function() {\n            return this.post?.images || [];\n        },\n    },\n    watch: {},\n    created: function() {\n        this.getData();\n    },\n    methods: {\n        showAvatar,\n        authorLink,\n        getFaceList() {\n            this.$router.push({name:'list',params:{title:this.searche}})\n        },\n        goBack() {\n            this.$router.push({ name: 'list' });\n        },\n        showClientLabel: function(val) {\n            return this.client_map[val];\n        },\n        showBodyTypeLabel(val){\n            return bodyMap[val];\n        },\n        getData() {\n            if (this.id) {\n                this.loading = true;\n                getOneFaceInfo(this.id)\n                    .then(res => {\n                        this.post = this.$store.state.faceSingle = res.data.data;\n                        document.title = this.post.title;\n                        this.getAccessoryList();\n                        //获取作者作品\n                        this.getRandomFaceList();\n                    })\n                    .finally(() => {\n                        this.loading = false;\n                    });\n\n                getStat('face', this.id).then(res => {\n                    this.stat = res.data;\n                });\n                postStat('face', this.id);\n            }\n        },\n        onAuthorClick() {\n            if (!this.post.original) {\n                window.open(this.post.author_link, \"_blank\");\n            }\n        },\n        downloadPageQuery(pageIndex){\n            this.downloadParams.pageIndex=pageIndex\n            this.getAccessoryList()\n        },\n        getAccessoryList() {\n            getAccessoryList(this.id, this.downloadParams).then(res => {\n                let data = res.data.data;\n                this.has_buy = data.has_buy;\n                if(data.has_buy){\n                    this.downFileList = data.list;\n                    this.downloadParams.total = data.page.total;\n                }\n            });\n        },\n        getDownUrl(uuid){\n          getDownUrl(this.id,uuid).then(res=>{\n              window.location.href=res.data.data.url\n          })\n        },\n        facePay(){\n            let res=this.post\n            let params={\n                postType:'face',\n                PostId:res.id,\n                priceType:res.price_type,\n                priceCount:res.price_count,\n                accessUserId:res.user_id,\n                payUserId:User.getInfo().uid\n            }\n            console.log(params)\n            // return;\n            //支付\n            payFace(params).then(res=>{\n               let payid=res.data.data.id;\n                // 轮询接口\n                console.log(res)\n                let setIntervalId=setInterval(\n                    loopPayStatus(payid).then(d=>{\n                        this.getPayFaceStatus(d.data.data.pay_status,setIntervalId)\n                    },1000)\n                )\n            });\n        },\n        getPayFaceStatus(pay_status,setIntervalId){\n            if(pay_status ==1){\n                this.$notify.success({\n                    title: '成功',\n                    message: '购买成功'\n                });\n                clearInterval(setIntervalId)\n                //购买成功后需要重载数据，拉取下载列表\n                this.getAccessoryList();\n            }else if(pay_status==2){\n                this.$notify.error({\n                    title: '失败',\n                    message: '支付失败'\n                });\n                clearInterval(setIntervalId)\n            }\n        },\n        getRandomFaceList(){\n            let post=this.post\n            let params={\n                user_id:post.user_id,\n                limit:8\n            }\n            getRandomFace(params).then(res=>{\n                console.log(res)\n                if(res.data.data.list && res.data.data.list.length>0){\n                    this.randomList=res.data.data.list;\n                }\n            })\n        }\n    }\n};\n</script>\n\n<style lang=\"less\">\n@import '~@/assets/css/face/single.less';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./single.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./single.vue?vue&type=template&id=39788856&\"\nimport script from \"./single.vue?vue&type=script&lang=js&\"\nexport * from \"./single.vue?vue&type=script&lang=js&\"\nimport style0 from \"./single.vue?vue&type=style&index=0&id=39788856&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}