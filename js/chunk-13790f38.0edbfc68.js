(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13790f38"],{"266d":function(t,i,s){},3442:function(t,i,s){"use strict";s("266d")},"34b1":function(t,i,s){},9640:function(t,i,s){"use strict";s("34b1")},c7d1:function(t,i,s){"use strict";s("f443")},f443:function(t,i,s){},ffda:function(t,i,s){"use strict";s.r(i);s("b0c0");var e=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listRef",staticClass:"book-home-wrapper"},[t.showSwitch?i("div",{staticClass:"operate-wrap"},[i("div",{staticClass:"list-type-wrapper"},t._l(t.listTypes,(function(s){return i("div",{key:s.value,staticClass:"list-type-item",class:t.listType===s.value&&"active",on:{click:function(i){t.listType=s.value}}},[t._v(" "+t._s(s.label)+" ")])})),0)]):t._e(),i("PvxSearch",{ref:"search",staticClass:"book-search",attrs:{items:t.searchProps},on:{search:function(i){return t.searchEvent(i)}}},t._l(t.professions,(function(s){return i("div",{key:s.id,staticClass:"select-item",class:[s.id===t.selected&&"is-active","select-item-"+s.id],on:{click:function(i){t.selected=s.id}}},[t._v(" "+t._s(s.name)+" ")])})),0),i("div",{staticClass:"list-wrapper"},[t.isAll?t._l(t.listAll,(function(s,e){return i("div",{key:e,staticClass:"list-item-wrapper"},[i("div",{staticClass:"title-header"},[i("div",{staticClass:"title"},[t._v(" "+t._s(t.professions[e].name)+" ")]),i("a",{attrs:{href:"javascript:;"},on:{click:function(i){return t.toList(e)}}},[t._v("查看全部")])]),i("list-cross",{attrs:{list:s,radius:0},scopedSlots:t._u([{key:"default",fn:function(t){return[i("BookCard",{attrs:{item:t.item}})]}}],null,!0)})],1)})):["list"===t.listType?i("div",{staticClass:"list-content"},[i("ListHead"),t._l(t.list,(function(t){return i("BookItem",{key:t.ID,attrs:{item:t}})})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalPages>0,expression:"totalPages > 0"}],attrs:{total:t.total,page:t.query.page,limit:t.query.pageSize},on:{"update:page":function(i){return t.$set(t.query,"page",i)},"update:limit":function(i){return t.$set(t.query,"pageSize",i)},pagination:t.loadList}})],2):t._e(),"card"===t.listType?i("div",{staticClass:"list-content"},[t._l(t.list,(function(t){return i("BookCard",{key:t.ID,attrs:{item:t}})})),i("el-button",{staticClass:"more-btn",attrs:{disabled:!t.hasNextPage,loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.loadCardList}},[t._v(t._s(t.hasNextPage?"加载更多":"没有更多了"))])],2):t._e()]],2)],1)},n=[],a=(s("d81d"),s("ac1f"),s("841c"),s("99af"),s("d3b7"),s("159b"),s("14d9"),s("3ca3"),s("ddb0"),s("d427")),l=function(){var t=this,i=t._self._c;return i("div",{ref:"wrap",staticClass:"cross-wrapper"},[t.isShow?[i("div",{staticClass:"cross cross-left",class:!t.isInLeft&&"active",style:{width:t.width+"px","border-top-left-radius":t.radius+"px","border-bottom-left-radius":t.radius+"px"},on:{click:function(i){return i.stopPropagation(),t.toLeft.apply(null,arguments)}}},[i("i",{staticClass:"el-icon-caret-left"})]),i("div",{staticClass:"cross cross-right",class:!t.isInRight&&"active",style:{width:t.width+"px","border-top-right-radius":t.radius+"px","border-bottom-right-radius":t.radius+"px"},on:{click:function(i){return i.stopPropagation(),t.toRight.apply(null,arguments)}}},[i("i",{staticClass:"el-icon-caret-right"})])]:t._e(),i("div",{ref:"list",staticClass:"list"},t._l(t.list,(function(s,e){return i("div",{key:s.id||s.ID+s.ItemID||e,staticClass:"item",style:{"margin-right":t.gap+"px"}},[t._t("default",null,{item:s})],2)})),0)],2)},o=[],r=(s("a9e3"),{name:"Cross",props:{list:{type:Array,required:!0},width:{type:Number,default:60},gap:{type:Number,default:20},radius:{type:Number,default:10}},data:function(){return{scrollLeft:0,isInLeft:!0,isInRight:!1,isShow:!1}},methods:{toLeft:function(t){t.preventDefault(),this.isInRight=!1,this.scroll(-1)},toRight:function(t){t.preventDefault(),this.isInLeft=!1,this.scroll(1)},scroll:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=this.$refs.list,e=s.scrollLeft,n=s.scrollWidth,a=s.clientWidth,l=a/2*i,o=null;o=setInterval((function(){1===i?(s.scrollLeft<e+l?s.scrollLeft+=Math.ceil(l/100):clearInterval(o),Math.ceil(s.scrollLeft+a)>=n&&(t.isInRight=!0,clearInterval(o))):-1===i&&(s.scrollLeft>e+l?s.scrollLeft+=Math.floor(l/100):clearInterval(o),s.scrollLeft<=0&&(t.isInLeft=!0,clearInterval(o)))}),1)}},mounted:function(){var t=this;this.$nextTick((function(){var i=t.$refs.list,s=i.clientWidth,e=i.scrollWidth;e>s&&(t.isShow=!0)}))}}),c=r,u=(s("9640"),s("2877")),d=Object(u["a"])(c,l,o,!1,null,null,null),f=d.exports,h=function(){var t=this,i=t._self._c;return i("div",{staticClass:"m-book-card"},[i("div",{staticClass:"u-book-info",class:"u-profession-bg--"+t.item.ExtendProfessionID1,on:{click:function(i){return t.go(t.item)}}},[i("div",{staticClass:"title"},[t._v(t._s(t.item.Name))])]),i("div",{staticClass:"u-desc-info"},[i("div",{staticClass:"desc",domProps:{innerHTML:t._s(t.item.Desc)}})])])},p=[],v={props:{item:{type:Object,required:!0}},data:function(){return{}},computed:{client:function(){return this.$store.state.client}},methods:{go:function(t){var i=t.ItemID;this.$router.push({path:"".concat(i)})}}},g=v,m=(s("c7d1"),Object(u["a"])(g,h,p,!1,null,null,null)),y=m.exports,b=s("d2e3"),w=s("0931"),L=s("1339"),C=s("6b19"),k=s("ed08"),_=s("85e4"),I={name:"Index",components:{PvxSearch:a["a"],ListCross:f,BookCard:y,ListHead:b["a"],BookItem:w["a"]},data:function(){return{loading:!1,listType:"card",listTypes:[{value:"list",label:"列表"},{value:"card",label:"卡片"}],query:{page:1,pageSize:20,client:this.client},total:0,totalPages:0,search:{},listAll:[],list:[],isAll:!0,selected:8,searchProps:[{key:"keyword",name:"书籍名称/描述"}]}},computed:{client:function(){return this.$store.state.client},professions:function(){return C.map((function(t){return 8===t.id&&(t.name="全部"),t}))},showSwitch:function(){var t=this.isAll;return!t&&!this.isPhone()},hasNextPage:function(){return this.totalPages>1&&this.query.page<this.totalPages}},watch:{selected:function(t){this.toList(t)},listType:{handler:function(t){this.query.page=1,"card"===t?this.showCount():(this.query.pageSize=20,this.getList())}}},methods:{iconLink:_["iconLink"],isPhone:k["b"],searchEvent:function(t){this.search=t},toList:function(t){8===t?(this.isAll=!0,this.getAllList()):this.isAll=!1},loadList:function(){var t=this;this.getList(this.selected).then((function(i){console.log(i),t.list=i.list}))},loadCardList:function(){var t=this;this.query.page++,this.getList(this.selected).then((function(i){t.list=t.list.concat(i.list),t.total=i.total,t.totalPages=i.pages}))},getList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=this.query,s=Object(k["a"])(this.search),e=Object.assign(s,i);return 8!==t&&(e.profession=t),new Promise((function(t,i){Object(L["b"])(e).then((function(i){var s=i.data.list;t(s)})).catch((function(t){i(t)}))}))},showCount:function(){var t=this,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$nextTick((function(){var s,e=null===(s=t.$refs.listRef)||void 0===s?void 0:s.clientWidth;t.query.pageSize=4*Math.floor(e/210),i&&t.findList()}))},getAllList:function(){var t=this,i=[];C.forEach((function(s){i.push(t.getList(s.id))})),this.loading=!0,Promise.all(i).then((function(i){t.loading=!1,t.listAll=i})).catch((function(){t.loading=!1}))}},mounted:function(){this.getAllList()}},x=I,P=(s("3442"),Object(u["a"])(x,e,n,!1,null,null,null));i["default"]=P.exports}}]);
//# sourceMappingURL=chunk-13790f38.0edbfc68.js.map