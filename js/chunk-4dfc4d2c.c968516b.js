(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4dfc4d2c"],{4568:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listRef",staticClass:"v-adventure-List"},[e("div",{staticClass:"m-adventure-header"},[e("div",{staticClass:"u-title"}),e("AdventureSearch",{attrs:{hasSearch:t.hasSearch},on:{onSearch:t.onSearch}})],1),t.list&&t.list.length>0?e("div",{staticClass:"m-adventure-list"},t._l(t.list,(function(t,a){return e("AdventureItem",{key:a,attrs:{item:t}})})),1):e("div",{staticClass:"u-archive-alert"},[e("el-alert",{attrs:{title:"没有对应的奇遇，请重新查找",type:"info",center:"","show-icon":""}})],1),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}})],1)},r=[],i=a("5530"),s=(a("d3b7"),a("159b"),a("14d9"),a("ac1f"),a("841c"),a("99af"),a("4de4"),a("b0c0"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-adventure-search"},[e("div",{staticClass:"m-adventure-mark"},t._l(t.marks,(function(a,n){return e("span",{key:n,staticClass:"u-mark",on:{click:function(e){return t.changeMark(n)}}},[e("b",{class:n==t.index?"active":""}),e("span",[t._v(t._s(a.name))])])})),0),e("div",{staticClass:"u-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"请输入奇遇或宠物名字搜索"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}})])])}),c=[],o={name:"search",props:["hasSearch"],data:function(){return{search:"",marks:[{name:"全部奇遇",type:"all"},{name:"绝世奇遇",type:"perfect"},{name:"普通奇遇",type:"normal"},{name:"宠物奇遇",type:"pet"}],index:0}},methods:{changeMark:function(t){this.index=t,this.jointParams()},jointParams:function(){var t={},e=this.marks[this.index];"all"!==e.type&&(t.type=e.type),this.search&&(t.name=this.search),this.$emit("onSearch",t)}},watch:{search:function(t){this.jointParams()},hasSearch:function(t){this.search=t}}},u=o,l=a("2877"),p=Object(l["a"])(u,s,c,!1,null,null,null),d=p.exports,h=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"m-adventure-item",attrs:{to:"/"+t.item.dwID}},[e("img",{staticClass:"u-default",attrs:{src:t.defaultImg}}),e("img",{staticClass:"u-title",style:t.titleStyle,attrs:{src:t.titleImg}}),e("span",{staticClass:"u-img",style:"backgroundImage: url(".concat(t.imgName,")")}),e("span",{staticClass:"u-icon"})])},f=[],g=(a("466d"),a("5319"),a("65c2")),m={name:"item",props:["item"],inject:["__imgRoot"],components:{},data:function(){return{}},computed:{link:function(){return"/adventure/"+this.item.dwID},client:function(){return this.$store.state.client},imgName:function(){var t,e=(null===(t=this.item.szOpenRewardPath)||void 0===t?void 0:t.toLowerCase().match(/.*[\/,\\]adventure(.*?).tga/))||"",a="";return e[1]&&(a=e[1].replace(/\\/g,"/")),this.__imgRoot+"adventure/".concat(this.client)+a+".png"},defaultImg:function(){return g["__imgPath"]+"image/pvx/bg.png"},titleImg:function(){return this.__imgRoot+"image_ui/".concat(this.client,"/luckymeeting7_")+this.item.nOpenFrame+".png"},titleStyle:function(){return{}}},methods:{getLink:function(t){this.$router.push({name:"single",params:{id:t}})}},filters:{},mounted:function(){}},v=m,b=Object(l["a"])(v,h,f,!1,null,null,null),O=b.exports,w=a("bed2"),y={name:"adventureList",props:[],components:{AdventureSearch:d,AdventureItem:O},data:function(){return{loading:!1,list:[],page:1,total:1,pages:1,per:15,appendMode:!1,school:"2",search:{},hasSearch:""}},computed:{hasNextPage:function(){return this.pages>1&&this.page<this.pages},params:function(){return{per:this.per,page:this.page||1}},newList:function(){var t=this,e=[];return this.list.forEach((function(a){e.push(t.toSpecial(a))})),e}},watch:{$route:function(t){t.params.search&&(this.hasSearch=t.params.search)}},methods:{getData:function(){var t=this;this.loading=!0;var e=Object(i["a"])(Object(i["a"])({},this.params),this.search);Object(w["c"])(e).then((function(e){var a=[];e.data.list.forEach((function(e){a.push(t.toSpecial(e))})),t.appendMode?t.list=t.list.concat(a):t.list=a,t.appendMode=!1,t.total=e.data.total,t.pages=e.data.pages})).finally((function(){t.loading=!1}))},toSpecial:function(t){var e=t.szRewardType,a=t.szOpenRewardPath,n=t.szOpenRewardPath.split("\\").filter(Boolean).pop();return"school"==e&&(a="ui/Image/Adventure/reward/Open/".concat(n,"/school_").concat(this.school,"_Open.tga")),"camp"==e&&(a=t.bHide?"ui/Image/Adventure/reward/Open/camp/camp_2_Open.tga":"ui/Image/Adventure/reward/Open/camp/camp_0_Open.tga"),t.szOpenRewardPath=a,t},changePage:function(t){this.page=t,this.getData()},appendPage:function(){this.page=this.page+1,this.appendMode=!0,this.getData()},onSearch:function(t){this.page=1,this.search=t,this.getData()},showCount:function(){var t,e=null===(t=this.$refs.listRef)||void 0===t?void 0:t.clientWidth;this.per=4*Math.floor(e/300)}},mounted:function(){this.showCount(),this.getData()}},j=y,P=(a("ebfa"),Object(l["a"])(j,n,r,!1,null,null,null));e["default"]=P.exports},"466d":function(t,e,a){"use strict";var n=a("c65b"),r=a("d784"),i=a("825a"),s=a("7234"),c=a("50c4"),o=a("577e"),u=a("1d80"),l=a("dc4a"),p=a("8aa5"),d=a("14c3");r("match",(function(t,e,a){return[function(e){var a=u(this),r=s(e)?void 0:l(e,t);return r?n(r,e,a):new RegExp(e)[t](o(a))},function(t){var n=i(this),r=o(t),s=a(e,n,r);if(s.done)return s.value;if(!n.global)return d(n,r);var u=n.unicode;n.lastIndex=0;var l,h=[],f=0;while(null!==(l=d(n,r))){var g=o(l[0]);h[f]=g,""===g&&(n.lastIndex=p(r,c(n.lastIndex),u)),f++}return 0===f?null:h}]}))},5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("14d9"),a("159b"),a("dbb4");var n=a("ade3");function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},ade3:function(t,e,a){"use strict";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return n}))},b64b:function(t,e,a){var n=a("23e7"),r=a("7b0b"),i=a("df75"),s=a("d039"),c=s((function(){i(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(t){return i(r(t))}})},bed2:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return o}));var n=a("41cb"),r=a("65c2");function i(t){return Object(n["e"])().get("/serendipities",{params:t})}function s(t){return Object(n["e"])().get("/serendipity/".concat(t))}function c(t){return Object(n["e"])().get("/serendipity/".concat(t,"/task"))}function o(){return n["h"].get("".concat(r["__dataPath"],"pvx/serendipity/output/serendipity.json"))}},d816:function(t,e,a){},dbb4:function(t,e,a){var n=a("23e7"),r=a("83ab"),i=a("56ef"),s=a("fc6a"),c=a("06cf"),o=a("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,a,n=s(t),r=c.f,u=i(n),l={},p=0;while(u.length>p)a=r(n,e=u[p++]),void 0!==a&&o(l,e,a);return l}})},e439:function(t,e,a){var n=a("23e7"),r=a("d039"),i=a("fc6a"),s=a("06cf").f,c=a("83ab"),o=r((function(){s(1)})),u=!c||o;n({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return s(i(t),e)}})},ebfa:function(t,e,a){"use strict";a("d816")}}]);
//# sourceMappingURL=chunk-4dfc4d2c.c968516b.js.map