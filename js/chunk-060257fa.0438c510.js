(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-060257fa"],{"45f9":function(e,t,a){"use strict";a("f384")},6338:function(e,t,a){"use strict";a("c1b2")},6343:function(e,t,a){(function(t){const{hasOwnProperty:a}=Object.prototype,o="undefined"!==typeof t&&"win32"===t.platform?"\r\n":"\n",s=(e,t)=>{const a=[];let c="";"string"===typeof t?t={section:t,whitespace:!1}:(t=t||Object.create(null),t.whitespace=!0===t.whitespace);const i=t.whitespace?" = ":"=";for(const s of Object.keys(e)){const t=e[s];if(t&&Array.isArray(t))for(const e of t)c+=l(s+"[]")+i+l(e)+"\n";else t&&"object"===typeof t?a.push(s):c+=l(s)+i+l(t)+o}t.section&&c.length&&(c="["+l(t.section)+"]"+o+c);for(const l of a){const a=n(l).join("\\."),i=(t.section?t.section+".":"")+a,{whitespace:r}=t,u=s(e[l],{section:i,whitespace:r});c.length&&u.length&&(c+=o),c+=u}return c},n=e=>e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(e=>e.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")),c=e=>{const t=Object.create(null);let o=t,s=null;const c=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,i=e.split(/[\r\n]+/g);for(const n of i){if(!n||n.match(/^\s*[;#]/))continue;const e=n.match(c);if(!e)continue;if(void 0!==e[1]){if(s=r(e[1]),"__proto__"===s){o=Object.create(null);continue}o=t[s]=t[s]||Object.create(null);continue}const i=r(e[2]),l=i.length>2&&"[]"===i.slice(-2),u=l?i.slice(0,-2):i;if("__proto__"===u)continue;const f=!e[3]||r(e[4]),p="true"===f||"false"===f||"null"===f?JSON.parse(f):f;l&&(a.call(o,u)?Array.isArray(o[u])||(o[u]=[o[u]]):o[u]=[]),Array.isArray(o[u])?o[u].push(p):o[u]=p}const l=[];for(const r of Object.keys(t)){if(!a.call(t,r)||"object"!==typeof t[r]||Array.isArray(t[r]))continue;const e=n(r);let o=t;const s=e.pop(),c=s.replace(/\\\./g,".");for(const t of e)"__proto__"!==t&&(a.call(o,t)&&"object"===typeof o[t]||(o[t]=Object.create(null)),o=o[t]);o===t&&c===s||(o[c]=t[r],l.push(r))}for(const a of l)delete t[a];return t},i=e=>'"'===e.charAt(0)&&'"'===e.slice(-1)||"'"===e.charAt(0)&&"'"===e.slice(-1),l=e=>"string"!==typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&i(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#"),r=(e,t)=>{if(e=(e||"").trim(),!i(e)){let t=!1,a="";for(let o=0,s=e.length;o<s;o++){const s=e.charAt(o);if(t)-1!=="\\;#".indexOf(s)?a+=s:a+="\\"+s,t=!1;else{if(-1!==";#".indexOf(s))break;"\\"===s?t=!0:a+=s}}return t&&(a+="\\"),a.trim()}"'"===e.charAt(0)&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch(a){}return e};e.exports={parse:c,decode:c,stringify:s,encode:s,safe:l,unsafe:r}}).call(this,a("4362"))},c1b2:function(e,t,a){},f384:function(e,t,a){},ffb5:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"m-facedata"},[a("div",{staticClass:"m-face-parse",class:{on:e.done}},[a("h1",{staticClass:"m-face-parse-title"},[e._v("捏脸数据解析器")]),a("Upload",{on:{success:e.handleSuccess}}),a("Facedat",{directives:[{name:"show",rawName:"v-show",value:e.done,expression:"done"}],staticClass:"m-face-parse-preview",attrs:{data:e.json,lock:!1}})],1)])},s=[],n=a("e0bb"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-facedat-upload"},[e.support?a("div",{staticClass:"u-upload"},[e.done?[a("div",{staticClass:"u-result"},[a("el-button",{staticClass:"u-reset",attrs:{icon:"el-icon-refresh-left"},on:{click:e.resetData}},[e._v("清空重置")]),a("el-alert",{attrs:{title:"当前文件为："+e.filename,type:"success","show-icon":""}})],1)]:[a("input",{staticClass:"u-input",attrs:{type:"file",id:"face_file",accept:".dat,.jx3dat,.ini"},on:{change:e.uploadData}}),a("el-button",{staticClass:"u-btn",attrs:{type:"primary",icon:"el-icon-upload2"},on:{click:e.selectData}},[e._v("上传脸型数据")]),e._m(0)]],2):a("el-alert",{staticClass:"u-notsupport",attrs:{title:"浏览器不支持",type:"warning",description:"你的浏览器太老旧不支持本地解析,请更换chrome或其它现代浏览器","show-icon":""}})],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"u-help",attrs:{href:"/tool/746",target:"_blank"}},[a("i",{staticClass:"el-icon-collection"}),e._v(" 游戏脸型导入导出指南 ")])}],l=(a("b0c0"),a("2ca0"),a("fb6a"),a("e9c4"),a("d4f4")),r=a("6343");function u(e,t,a=0){return parseInt(e["Face"][t])||a}function f(e,t){let a={bUse:!!parseInt(e["CustomDetail"][t+"_valueEnable"]),nShowID:parseInt(e["Decal"][t])||0,nColorID:parseInt(e["Decal"][t+"_color"])||0,fValue1:-1,fValue2:-1,fValue3:-1};return a["bUse"]&&(a["fValue1"]=parseFloat(e["CustomDetail"][t+"_value1"])||0,a["fValue2"]=parseFloat(e["CustomDetail"][t+"_value2"])||0,a["fValue3"]=parseFloat(e["CustomDetail"][t+"_value3"])||0),a}function p(e){return{nRoleType:parseInt(e["Base"]["RoleType"]),nDecorationID:parseInt(e["Base"]["DecorationID"]),tDecal:{BASE:f(e,"FaceBaseTexture"),BROW:f(e,"Brow"),EYE_LIGHT:f(e,"EyeLight"),EYE_LINE:f(e,"EyeLine"),EYE_SHADOW:f(e,"EyeShadow"),EYE_SHADOW1:f(e,"EyeShadow1"),EYE_SHADOW2:f(e,"EyeShadow2"),EYE_SHADOW3:f(e,"EyeShadow3"),EYE_SHADOW4:f(e,"EyeShadow4"),EYE_SHADOW_FLASH1:f(e,"EyeShadowFlash1"),EYE_SHADOW_FLASH2:f(e,"EyeShadowFlash2"),EYE_SHADOW_FLASH3:f(e,"EyeShadowFlash3"),EYE_SHADOW_FLASH4:f(e,"EyeShadowFlash4"),LIP_LIGHT:f(e,"LipLight"),LIP_FLASH:f(e,"LipFlash"),LIP_GLOSS:f(e,"LipGloss"),LIP_OVERLAP:f(e,"LipOverlap"),IRIS_LEFT:f(e,"IrisLeft"),IRIS_RIGHT:f(e,"IrisRight"),BLUSHER_MOUSTACHE:f(e,"BlusherMoustache"),DECAL:f(e,"Decal")},tBone:{NOSE_SIZE:u(e,"noseSize"),UP_LIP_OUT:u(e,"upLipOut"),NOSEBOW_WIDTH:u(e,"nosebowWidth"),MOUTH_OPEN:u(e,"mouthOpen"),CHEEK_Y:u(e,"cheekY"),EYE_OPEN:u(e,"eyeOpen"),FACE_Y:u(e,"faceY"),MOUTH_END_L:u(e,"mouthEndL"),JAW_LENGTH:u(e,"jawLength"),UP_LIP:u(e,"upLip"),EYE_DIST:u(e,"eyeDist"),NOSETOP_POS_Y:u(e,"nosetopPosY"),EYE_DIRC:u(e,"eyeDirc"),EYEBOW_OUT:u(e,"eyebowOut"),MOUTH_OUT:u(e,"mouthOut"),RIDGE_Y:u(e,"ridgeY"),MOUTH_END:u(e,"mouthEnd"),NOSEBOW_BEND:u(e,"nosebowBend"),JAW_WIDTH:u(e,"jawWidth"),LOW_LIP_POS:u(e,"lowLipPos"),PUPIL_DIRC:u(e,"pupilDirc"),NOSETOP_POS_Z:u(e,"nosetopPosZ"),MOUTH_POS:u(e,"mouthPos"),MOUTH_SIZE:u(e,"mouthSize"),LOW_LIP:u(e,"lowLip"),FACE_Z:u(e,"faceZ"),NOSETOP_WIDTH:u(e,"nosetopWidth"),UP_FACE:u(e,"upFace"),UP_LID_POS:u(e,"upLidPos"),EYEBOW_POS:u(e,"eyebowPos"),EYEBOW_DIRC:u(e,"eyebowDirc"),UP_LIP_POS:u(e,"upLipPos"),LOW_LIP_OUT:u(e,"lowLipOut"),MOUTH_ROT:u(e,"mouthRot"),EYE_SIZE:u(e,"eyeSize"),EYE_POS:u(e,"eyePos"),JAW_ROT:u(e,"jawRot"),JAW_END:u(e,"jawEnd"),EYECROW_Y:u(e,"eyecrowY"),NOSETOP_UP:u(e,"nosetopUp"),MOUTH_END_R:u(e,"mouthEndR"),OUT:u(e,"out"),JAW_POS:u(e,"jawPos"),LOW_FACE:u(e,"lowFace"),CHEEK_Z:u(e,"cheekZ"),PUPIL_SIZE:u(e,"pupilSize"),FACE_SCALE:u(e,"faceScale"),NOSE_HEIGHT:u(e,"noseHeight"),LOW_LID_POS:u(e,"lowLidPos")}}}a("b3c6");var _={name:"Upload",props:[],components:{},data:function(){return{support:!0,file:"",lua:"",json:"",object:"",done:!1}},computed:{filename:function(){return this.file&&this.file.name}},methods:{selectData:function(e){var t=document.getElementById("face_file");t.dispatchEvent(new MouseEvent("click"))},uploadData:function(e){var t=e.target.files[0];this.file=t,this.parseData(t)},parseData:function(e){if(e){var t=this,a=new FileReader;a.readAsText(e),a.onload=function(e){console.log("读取成功...开始执行分析...");var a=e.target.result,o=a.startsWith("CNDK"),s=a.startsWith("return"),n=a.startsWith("{");if(o||s||n){var c=a.slice(a.indexOf("return {"));t.lua=c,t.object=Object(l["parse"])(c),console.log("读取成功：类型为 LuaTable")}else try{var i=Object(r["parse"])(a);t.object=p(i),console.log("读取成功：类型为 INI")}catch(u){t.$notify.error({title:"错误",message:"无法解析脸型数据"}),t.$emit("fail",{file:t.file,lua:t.lua})}if(t.object)try{t.json=JSON.stringify(t.object),t.$notify({title:"成功",message:"脸型数据解析成功",type:"success"}),t.done=!0,t.$emit("success",{file:t.file,lua:t.lua,json:t.json,object:t.object})}catch(e){t.$notify.error({title:"错误",message:"无法解析脸型数据"}),t.$emit("fail",{file:t.file,lua:t.lua})}},a.onerror=function(e){t.$notify.error({title:"错误",message:"文件读取异常"})}}},resetData:function(){this.done=!1,this.file="",this.lua="",this.json="",this.object="",this.$emit("success",{file:"",lua:"",json:"",object:""})}},filters:{},created:function(){},mounted:function(){this.support=!!window.FileReader}},E=_,h=(a("6338"),a("2877")),d=Object(h["a"])(E,c,i,!1,null,null,null),O=d.exports,S=(a("65c2"),{name:"FacedataParse",props:[],data:function(){return{data:"",done:!1}},computed:{json:function(){return this.data&&this.data.json}},methods:{handleSuccess:function(e){this.data=e,null!==e&&void 0!==e&&e.json?this.done=!0:this.done=!1}},mounted:function(){},components:{Facedat:n["a"],Upload:O}}),L=S,y=(a("45f9"),Object(h["a"])(L,o,s,!1,null,null,null));t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-060257fa.0438c510.js.map