(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-268215e8"],{"31be":function(t,a,e){},"5c52":function(t,a,e){"use strict";e("31be")},"84c2":function(t){t.exports=JSON.parse('{"a":{"1":"成男","2":"成女","5":"正太","6":"萝莉"}}')},"8d25":function(t,a,e){"use strict";e.r(a);e("ac1f"),e("841c");var i=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-face-single"},[a("div",{staticClass:"m-navigation"},[a("el-button",{staticClass:"u-goback",attrs:{size:"medium",icon:"el-icon-arrow-left",plain:""},on:{click:t.goBack}},[t._v("返回列表")]),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getFaceList.apply(null,arguments)}},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("关键词")]),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getFaceList},slot:"append"})],1)],1),t.post.banner?a("div",{staticClass:"m-banner"},[a("img",{attrs:{src:t.showThumbnail(t.post.banner)}})]):t._e(),a("div",{staticClass:"m-header"},[t.post.original?a("Avatar",{staticClass:"u-avatar",attrs:{uid:t.post.user_id,url:t.post.user_avatar,frame:t.post.user_avatar_frame}}):t._e(),a("h2",{staticClass:"u-title"},[t._v(t._s(t.post.title||"无标题"))]),a("div",{staticClass:"u-info"},[a("div",{staticClass:"u-author"},[t._v(" By "),t.post.original?a("a",{staticClass:"u-name",attrs:{href:t.authorLink(t.post.user_id),target:"_blank"}},[t._v(t._s(t.post.display_name))]):t.post.author_link?a("a",{staticClass:"u-name",attrs:{href:t.post.author_link,target:"_blank"}},[t._v(t._s(t.post.author_name))]):a("span",{staticClass:"u-name"},[t._v(t._s(t.post.author_name))]),a("time",{staticClass:"u-time"},[t._v(t._s(t.post.updated_at))]),t.canEdit?a("a",{attrs:{href:t.editLink("face",t.post.id),target:"_blank"}},[a("i",{staticClass:"el-icon-edit-outline u-edit-icon"}),t._v(" 编辑 ")]):t._e()]),a("div",{staticClass:"u-meta"},[t.post.star?a("i",{staticClass:"u-mark"},[t._v("★ 编辑推荐")]):t._e(),t.post.original?a("i",{staticClass:"u-original"},[t._v("原创")]):t._e(),a("i",{staticClass:"u-client",class:t.post.client||"std"},[t._v(t._s(t.showClientLabel(t.post.client)))]),t.post.body_type?a("i",{staticClass:"u-bodytype",class:"u-bodytype-"+t.post.body_type},[t._v(t._s(t.showBodyTypeLabel(t.post.body_type)))]):t._e()])]),t.post.remark?a("div",{staticClass:"u-desc"},[t._v(t._s(t.post.remark))]):t._e(),a("el-divider",{attrs:{"content-position":"left"}},[a("i",{staticClass:"el-icon-pie-chart"}),t._v(" 预览")])],1),t.previewSrcList&&t.previewSrcList.length>0?a("div",{staticClass:"m-single-pics"},[a("el-carousel",{staticClass:"m-carousel",attrs:{interval:4e3,type:"card",arrow:"always"}},t._l(t.previewSrcList,(function(e,i){return a("el-carousel-item",{key:i},[a("div",{staticClass:"m-face-pic"},[a("el-image",{ref:"previewImage",refInFor:!0,staticClass:"u-pic",attrs:{fit:"contain",src:t.showPic(e),"preview-src-list":t.previewSrcList},on:{"!click":function(a){return t.handlePreviewImage(i)}}})],1)])})),1)],1):t._e(),t.post.price_type&&0!=t.post.price_type&&!t.has_buy?a("div",{staticClass:"m-face-pay"},[a("div",{staticClass:"m-face-pay-info"},[t._v(" 价格： "),a("el-tag",{attrs:{effect:"plain",type:"warning"}},[1==t.post.price_type?a("span",[t._v(t._s(t.post.price_count)+" 盒币")]):t._e(),2==t.post.price_type?a("span",[t._v(t._s(t.post.price_count)+" 金箔")]):t._e()])],1),a("div",{staticClass:"m-face-pay-btn"},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-shopping-cart-2",loading:t.payBtnLoading},on:{click:t.facePay}},[t._v("购买")])],1)]):t._e(),t.has_buy&&t.facedata?a("div",{staticClass:"m-single-data"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("独家数据分析")]),t.facedata?a("facedata",{attrs:{data:t.facedata}}):t._e()],1):t._e(),t.has_buy&&t.downFileList&&t.downFileList.length>0?a("div",{staticClass:"m-face-files"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("原始文件列表")]),a("ul",{staticClass:"m-face-files-list"},t._l(t.downFileList,(function(e){return a("li",{key:e.id},[a("span",{staticClass:"u-label"},[t._v("版本 : "+t._s(e.created_at))]),a("el-button",{staticClass:"u-action",attrs:{icon:"el-icon-download",size:"mini",type:"primary",round:""},on:{click:function(a){return t.getDownUrl(e.uuid)}}},[t._v("下载")])],1)})),0)],1):t._e(),a("div",{staticClass:"m-random-list"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("作者其他作品")]),a("div",{staticClass:"u-list"},t._l(t.randomList,(function(e){return a("a",{key:e.id,staticClass:"u-item",attrs:{href:"/face/"+e.id,target:"_blank"}},[a("div",{staticClass:"u-pic"},[e.images?a("el-image",{attrs:{fit:"cover",src:t.showPic(e.images[0])}},[a("div",{staticClass:"u-image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]):t._e()],1),a("div",{staticClass:"u-name",attrs:{title:e.title}},[t._v(t._s(e.title||"未命名"))])])})),0)],1),a("Thx",{staticClass:"m-thx",attrs:{postId:t.id,postType:"face",postTitle:t.post.title||"无标题",userId:t.post.user_id,adminBoxcoinEnable:!0,userBoxcoinEnable:!0}}),a("div",[a("el-divider",{attrs:{"content-position":"left"}},[t._v("讨论")]),a("Comment",{attrs:{id:t.id,category:"face"}})],1)],1)},s=[],n=(e("14d9"),e("d3b7"),e("f0d2")),o=e("9616"),c=e("e0bb"),r=e("23d8"),l=e("85e4"),d=e("c9d2"),u=e("84c2"),p=e("65c2"),v={name:"single",components:{facedata:c["a"],Comment:r["a"]},data:function(){return{loading:!1,search:"",post:{},stat:{},has_buy:!1,client_map:p["__clients"],downFileList:[],downloadParams:{pageIndex:1,pageSize:4,total:0},payBtnLoading:!1,randomList:[]}},computed:{id:function(){return this.$route.params.id},isAuthor:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.user_id)==d["a"].getInfo().uid||!1},facedata:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.data)||""},previewSrcList:function(){var t;return(null===(t=this.post)||void 0===t?void 0:t.images)||[]},canEdit:function(){var t;return d["a"].isEditor()||(null===(t=this.post)||void 0===t?void 0:t.user_id)==d["a"].getInfo().uid}},watch:{},created:function(){this.getData()},methods:{showAvatar:function(t){return Object(l["showAvatar"])(t,"l")},showThumbnail:function(t){return Object(l["resolveImagePath"])(t)},authorLink:l["authorLink"],editLink:l["editLink"],getFaceList:function(){this.$router.push({name:"list",query:{title:this.search}})},goBack:function(){document.title="捏脸分享 - JX3BOX",this.$router.push({name:"list"})},showClientLabel:function(t){return this.client_map[t]},showBodyTypeLabel:function(t){return u["a"][t]},handlePreviewImage:function(t){var a=this.$refs.previewImage[t].$children[0];a&&a.reset(),a&&(a.index=t)},getData:function(){var t=this;this.id&&(this.loading=!0,Object(n["g"])(this.id).then((function(a){t.post=t.$store.state.faceSingle=a.data.data,document.title=t.post.title,t.getAccessoryList(),t.getRandomFaceList()})).catch((function(a){t.loading=!1})),Object(o["a"])("face",this.id).then((function(a){t.stat=a.data})),Object(o["b"])("face",this.id))},downloadPageQuery:function(t){this.downloadParams.pageIndex=t,this.getAccessoryList()},getAccessoryList:function(){var t=this;Object(n["c"])(this.id,this.downloadParams).then((function(a){var e=a.data.data;t.has_buy=e.has_buy,e.has_buy&&(t.downFileList=e.list,t.downloadParams.total=e.page.total)})).finally((function(){t.loading=!1}))},getDownUrl:function(t){Object(n["d"])(this.id,t).then((function(t){var a;window.location.href=null===(a=t.data.data)||void 0===a?void 0:a.url}))},facePay:function(){var t=this,a=this.post,e={postType:"face",PostId:a.id,priceType:a.price_type,priceCount:a.price_count,accessUserId:a.user_id,payUserId:d["a"].getInfo().uid};this.payBtnLoading=!0,Object(n["l"])(e).then((function(a){var e=a.data.data.id,i=setInterval(Object(n["i"])(e).then((function(a){t.getPayFaceStatus(a.data.data.pay_status,i)}),1e3))}))},getPayFaceStatus:function(t,a){1==t?(this.payBtnLoading=!1,clearInterval(a),this.getData(),this.$notify.success({title:"成功",message:"购买成功"})):2==t&&(this.payBtnLoading=!1,clearInterval(a),this.$notify.error({title:"失败",message:"支付失败"}))},getRandomFaceList:function(){var t=this,a=this.post,e={user_id:a.user_id,limit:8};Object(n["h"])(e).then((function(a){a.data.data.list&&a.data.data.list.length>0&&(t.randomList=a.data.data.list)}))},showPic:function(t){return Object(l["resolveImagePath"])(t)}}},h=v,_=(e("5c52"),e("2877")),f=Object(_["a"])(h,i,s,!1,null,null,null);a["default"]=f.exports}}]);
//# sourceMappingURL=chunk-268215e8.249ef58a.js.map