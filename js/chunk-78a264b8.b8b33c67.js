(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78a264b8"],{"4fad":function(t,e,i){var a=i("d039"),n=i("861d"),r=i("c6b6"),s=i("d86b"),o=Object.isExtensible,c=a((function(){o(1)}));t.exports=c||s?function(t){return!!n(t)&&((!s||"ArrayBuffer"!=r(t))&&(!o||o(t)))}:o},6062:function(t,e,i){"use strict";var a=i("6d61"),n=i("6566");a("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},"60d7":function(t){t.exports=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒"]')},6566:function(t,e,i){"use strict";var a=i("9bf2").f,n=i("7c73"),r=i("e2cc"),s=i("0366"),o=i("19aa"),c=i("2266"),u=i("7dd0"),l=i("2626"),d=i("83ab"),f=i("f183").fastKey,h=i("69f3"),p=h.set,v=h.getterFor;t.exports={getConstructor:function(t,e,i,u){var l=t((function(t,a){o(t,h),p(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=a&&c(a,t[u],{that:t,AS_ENTRIES:i})})),h=l.prototype,g=v(e),m=function(t,e,i){var a,n,r=g(t),s=_(t,e);return s?s.value=i:(r.last=s={index:n=f(e,!0),key:e,value:i,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=s),a&&(a.next=s),d?r.size++:t.size++,"F"!==n&&(r.index[n]=s)),t},_=function(t,e){var i,a=g(t),n=f(e);if("F"!==n)return a.index[n];for(i=a.first;i;i=i.next)if(i.key==e)return i};return r(h,{clear:function(){var t=this,e=g(t),i=e.index,a=e.first;while(a)a.removed=!0,a.previous&&(a.previous=a.previous.next=void 0),delete i[a.index],a=a.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,i=g(e),a=_(e,t);if(a){var n=a.next,r=a.previous;delete i.index[a.index],a.removed=!0,r&&(r.next=n),n&&(n.previous=r),i.first==a&&(i.first=n),i.last==a&&(i.last=r),d?i.size--:e.size--}return!!a},forEach:function(t){var e,i=g(this),a=s(t,arguments.length>1?arguments[1]:void 0);while(e=e?e.next:i.first){a(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!_(this,t)}}),r(h,i?{get:function(t){var e=_(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),d&&a(h,"size",{get:function(){return g(this).size}}),l},setStrong:function(t,e,i){var a=e+" Iterator",n=v(e),r=v(a);u(t,e,(function(t,e){p(this,{type:a,target:t,state:n(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,i=t.last;while(i&&i.removed)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),l(e)}}},"6d61":function(t,e,i){"use strict";var a=i("23e7"),n=i("da84"),r=i("e330"),s=i("94ca"),o=i("6eeb"),c=i("f183"),u=i("2266"),l=i("19aa"),d=i("1626"),f=i("861d"),h=i("d039"),p=i("1c7e"),v=i("d44e"),g=i("7156");t.exports=function(t,e,i){var m=-1!==t.indexOf("Map"),_=-1!==t.indexOf("Weak"),b=m?"set":"add",y=n[t],w=y&&y.prototype,S=y,x={},k=function(t){var e=r(w[t]);o(w,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(_&&!f(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return _&&!f(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(_&&!f(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})},D=s(t,!d(y)||!(_||w.forEach&&!h((function(){(new y).entries().next()}))));if(D)S=i.getConstructor(e,t,m,b),c.enable();else if(s(t,!0)){var I=new S,Y=I[b](_?{}:-0,1)!=I,L=h((function(){I.has(1)})),O=p((function(t){new y(t)})),C=!_&&h((function(){var t=new y,e=5;while(e--)t[b](e,e);return!t.has(-0)}));O||(S=e((function(t,e){l(t,w);var i=g(new y,t,S);return void 0!=e&&u(e,i[b],{that:i,AS_ENTRIES:m}),i})),S.prototype=w,w.constructor=S),(L||C)&&(k("delete"),k("has"),m&&k("get")),(C||Y)&&k(b),_&&w.clear&&delete w.clear}return x[t]=S,a({global:!0,forced:S!=y},x),v(S,t),_||i.setStrong(S,t,m),S}},"75ff":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.id?i("div",{staticClass:"v-adventure-single"},[i("div",{staticClass:"m-adventure-navigation"},[i("el-button",{staticClass:"u-goback",attrs:{size:"medium",icon:"el-icon-arrow-left",plain:""},on:{click:t.goBack}},[t._v("返回列表")]),i("div",{staticClass:"m-trigger-links"},[i("a",{staticClass:"u-link u-achievement",attrs:{href:t.getLink("cj",t.achieve_id)}},[i("i",{staticClass:"el-icon-trophy"}),t._v(" 成就信息 ")])])],1),i("h1",{staticClass:"m-adventure-title"},[t._v(t._s(t.title))]),i("div",{staticClass:"m-adventure-content"},[i("task",{attrs:{id:t.id}})],1),i("div",{staticClass:"m-adventure-wiki"},[i("detail",{attrs:{achievement_id:t.achieve_id,title:"奇遇攻略"}})],1),i("div",{staticClass:"m-adventure-serendipity"},[i("Serendipity",{attrs:{title:t.title}})],1)]):t._e()},n=[],r=i("85e4"),s=i("c599"),o=i("bed2"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.task?i("div",{staticClass:"m-adventure-task"},[i("el-carousel",{staticClass:"u-carousel",attrs:{autoplay:!1,type:"card"}},t._l(t.task,(function(e,a){return i("el-carousel-item",{key:a},[i("span",{staticClass:"u-img",style:t.imgStyle(e)})])})),1),i("span",{staticClass:"u-name"},[t._v(t._s(t.task.name))])],1):t._e()},u=[],l=i("2909"),d=(i("ac1f"),i("466d"),i("d3b7"),i("159b"),i("5319"),i("6062"),i("3ca3"),i("ddb0"),i("65c2")),f={name:"task",props:["id"],components:{},data:function(){return{imgRoot:d["__iconPath"]+"pvx/serendipity/images//",task:""}},computed:{},methods:{imgUrl:function(t){return this.imgRoot+"/"+t+".png"},imgNameTga:function(t){return t.match(/(\S*)Adventure\/(\S*)\.tga/)[2]},imgStyle:function(t){return{backgroundImage:"url("+this.imgUrl(t)+")"}},loadData:function(){var t=this;Object(o["b"])(this.id).then((function(e){var i=[];e.data.forEach((function(e){if(e.szFramePath){var a,n=null===(a=e.szFramePath)||void 0===a?void 0:a.replace(/\\/g,"/");i.push(t.imgNameTga(n))}})),t.task=Object(l["a"])(new Set(i))}))}},filters:{},created:function(){},mounted:function(){this.loadData()}},h=f,p=i("2877"),v=Object(p["a"])(h,c,u,!1,null,null,null),g=v.exports,m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.title?i("div",{staticClass:"m-serendipity"},[i("div",{staticClass:"u-title"},[t._m(0),i("el-select",{staticClass:"u-select",attrs:{placeholder:"区服",size:"small"},on:{change:t.changeServer},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},t._l(t.servers,(function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t.list&&t.list.length>0?i("ul",{staticClass:"u-list"},[t._m(1),t._l(t.list,(function(e,a){return i("li",{key:a},[i("span",{staticClass:"u-date"},[t._v(t._s(t._f("showDate")(e.date_str)))]),i("span",{staticClass:"u-time"},[t._v(t._s(t._f("wikiDate")(e.dwTime)))]),i("span",{staticClass:"u-server"},[t._v(t._s(e.gegion)+"-"+t._s(e.server))]),i("span",{staticClass:"u-name"},[t._v(t._s(e.name||"匿名"))])])}))],2):i("el-alert",{staticClass:"u-alert",attrs:{title:"无记录",type:"info",center:"",closable:!1}})],1):t._e()},_=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"u-label"},[i("i",{staticClass:"el-icon-present"}),t._v(" 触发记录 ")])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"u-header"},[i("span",{staticClass:"u-date"},[t._v("日期")]),i("span",{staticClass:"u-time"},[t._v("激活时间")]),i("span",{staticClass:"u-server"},[t._v("服务器")]),i("span",{staticClass:"u-name"},[t._v("玩家")])])}],b=i("60d7"),y=i("41cb");function w(){return Object(y["b"])().get("/api/cms/user/my/info")}function S(t){var e="https://pull.j3cx.com/";return y["h"].get("/api/serendipity",{baseURL:e,params:t})}i("1276");var x=i("c1df"),k=i.n(x);function D(t){return k()(t).fromNow()}function I(t){return k()(t).format("YYYY-MM-DD")}k.a.locale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY年MM月DD日",LLL:"YYYY年MM月DD日Ah点mm分",LLLL:"YYYY年MM月DD日ddddAh点mm分",l:"YYYY-M-D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,i){var a=100*t+e;return a<600?"凌晨":a<900?"早上":a<1130?"上午":a<1230?"中午":a<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}});var Y=i("c9d2"),L={name:"serendipity",props:["title"],components:{},data:function(){return{servers:b,server:"长安城",list:[]}},computed:{params:function(){return{server:this.server,serendipity:this.title,start:0,pageIndex:1,pageSize:10}}},methods:{loadSerendipity:function(){var t=this;S(this.params).then((function(e){t.list=e.data.data.data}))},changeServer:function(){this.loadSerendipity()}},filters:{wikiDate:function(t){return D(1e3*t)},showDate:function(t){return I(t)}},mounted:function(){var t=this;Y["a"].isLogin()?w().then((function(e){t.server=e.data.data.jx3_server||"长安城"})).then((function(){t.loadSerendipity()})):this.loadSerendipity()}},O=L,C=(i("df3b"),Object(p["a"])(O,m,_,!1,null,null,null)),j=C.exports,P={name:"adventureSingle",props:[],components:{Detail:s["a"],task:g,Serendipity:j},data:function(){return{achieve_id:"",data:"",task:[],isPet:!0}},computed:{id:function(){return this.$route.params.id},title:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.szName}},watch:{},methods:{getLink:r["getLink"],goBack:function(){this.$router.push({name:"list"})},gerData:function(){var t=this;Object(o["a"])(this.id).then((function(e){t.isPet=!1,t.data=e.data})),Object(o["d"])().then((function(e){t.achieve_id=e.data[t.id]}))}},filters:{},created:function(){this.gerData()},mounted:function(){}},M=P,E=(i("833d"),Object(p["a"])(M,a,n,!1,null,null,null));e["default"]=E.exports},8022:function(t,e,i){},"833d":function(t,e,i){"use strict";i("d35d")},bb2f:function(t,e,i){var a=i("d039");t.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bed2:function(t,e,i){"use strict";i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return o})),i.d(e,"d",(function(){return c}));var a=i("41cb"),n=i("65c2");function r(t){return Object(a["f"])().get("/serendipities",{params:t})}function s(t){return Object(a["f"])().get("/serendipity/".concat(t))}function o(t){return Object(a["f"])().get("/serendipity/".concat(t,"/task"))}function c(){return a["h"].get("".concat(n["__iconPath"],"pvx/serendipity/output/serendipity.json"))}},c9d2:function(t,e,i){"use strict";var a=i("85e4"),n=i("65c2"),r=i("c5d8"),s=i("41cb");class o{constructor(){this.expires=r["a"],this.created_at=0,this.logged_in=!1,this.profile={},this.anonymous={uid:0,group:0,name:"未登录",status:0,bind_wx:0,avatar:Object(a["showAvatar"])(null,"s"),avatar_origin:n["default_avatar"]},this.asset=""}check(){return this.isLogin()?(this.profile.uid=localStorage&&localStorage.getItem("uid"),this.profile.group=localStorage&&localStorage.getItem("group")||1,this.profile.name=localStorage&&localStorage.getItem("name"),this.profile.status=localStorage&&localStorage.getItem("status"),this.profile.bind_wx=localStorage&&localStorage.getItem("bind_wx"),this.profile.avatar_origin=localStorage&&localStorage.getItem("avatar")||n["default_avatar"],this.profile.avatar=Object(a["showAvatar"])(this.profile.avatar_origin,"s")):this.profile=this.anonymous,this}refresh(t,e){return localStorage.setItem(t,e)}isLogin(){return this.created_at=localStorage.getItem("created_at")?localStorage.getItem("created_at"):-1/0,this.logged_in="true"==localStorage.getItem("logged_in"),this.logged_in&&Date.now()-this.created_at<this.expires}_save(t){localStorage.setItem("created_at",Date.now()),localStorage.setItem("logged_in",!0),localStorage.setItem("token",t.token),localStorage.setItem("uid",t.uid),localStorage.setItem("group",t.group),localStorage.setItem("name",t.name),localStorage.setItem("status",t.status),localStorage.setItem("bind_wx",t.bind_wx),localStorage.setItem("avatar",t.avatar)}update(t){return new Promise((e,i)=>{try{this._save(t),e(this)}catch(a){localStorage?(localStorage.clear(),this._save(t),e(value)):i(new Error("localStorage不可用"))}})}getInfo(){return this.check(),this.profile}destroy(){return Object(s["a"])("server",{proxy:!1,interceptor:"next",popType:"notify"}).post("/account/logout").finally(()=>{localStorage.removeItem("created_at"),localStorage.setItem("logged_in","false"),localStorage.removeItem("token")})}toLogin(t){t=t?encodeURIComponent(t):encodeURIComponent(location.href),location.href=n["__Links"].account.login+"?redirect="+t}getToken(){return localStorage.getItem("token")}getUUID(){return localStorage.getItem("device_id")}isEmailMember(){return this.isLogin()&&this.profile.group>=8}isPhoneMember(){return this.isLogin()&&this.profile.group>=16}isEditor(){return this.isLogin()&&this.profile.group>=64}isAdmin(){return this.isLogin()&&this.profile.group>=128}isDeveloper(){return this.isLogin()&&this.profile.group>=256}isSuperAdmin(){return this.isLogin()&&this.profile.group>=512}isSuperAuthor(){return this.isLogin()?Object(s["a"])("cms",{proxy:!0,interceptor:"next",popType:"notify"}).get("/api/cms/user/is_super_author/"+this.getInfo().uid).then(t=>t.data.data):new Promise((t,e)=>{t(!1)})}hasBindwx(){return localStorage.getItem("bind_wx")}_isVIP(t){let e=t.was_vip;if(e){let e=new Date(t.expire_date)-new Date>0;return e}return!1}_isPRO(t){let e=t.was_pro;if(e){let e=new Date(t.pro_expire_date)-new Date>0;return e}return!1}isVIP(){return this.asset?new Promise((t,e)=>{t(this._isPRO(this.asset)||this._isVIP(this.asset))}):this.getAsset().then(t=>this._isPRO(t)||this._isVIP(t))}isPRO(){return this.asset?new Promise((t,e)=>{t(this._isPRO(this.asset))}):this.getAsset().then(t=>this._isPRO(t))}getAsset(){return this.isLogin()?Object(s["a"])("pay",{proxy:!0,interceptor:"next",popType:"notify"}).get("/api/vip/i").then(t=>{let e=t.data.data;return this.asset=e,e}):new Promise((t,e)=>{let i={was_vip:0,expire_date:"1970-02-02T16:00:00.000Z",total_day:0,was_pro:0,pro_expire_date:"1970-02-02T16:00:00.000Z",pro_total_day:0,rename_card_count:0,had_renamed:0,namespace_card_count:0,box_coin:0,points:0};this.asset=i,t(i)})}}e["a"]=new o},d35d:function(t,e,i){},d86b:function(t,e,i){var a=i("d039");t.exports=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}}))},df3b:function(t,e,i){"use strict";i("8022")},f183:function(t,e,i){var a=i("23e7"),n=i("e330"),r=i("d012"),s=i("861d"),o=i("1a2d"),c=i("9bf2").f,u=i("241c"),l=i("057f"),d=i("4fad"),f=i("90e3"),h=i("bb2f"),p=!1,v=f("meta"),g=0,m=function(t){c(t,v,{value:{objectID:"O"+g++,weakData:{}}})},_=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,v)){if(!d(t))return"F";if(!e)return"E";m(t)}return t[v].objectID},b=function(t,e){if(!o(t,v)){if(!d(t))return!0;if(!e)return!1;m(t)}return t[v].weakData},y=function(t){return h&&p&&d(t)&&!o(t,v)&&m(t),t},w=function(){S.enable=function(){},p=!0;var t=u.f,e=n([].splice),i={};i[v]=1,t(i).length&&(u.f=function(i){for(var a=t(i),n=0,r=a.length;n<r;n++)if(a[n]===v){e(a,n,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},S=t.exports={enable:w,fastKey:_,getWeakData:b,onFreeze:y};r[v]=!0}}]);
//# sourceMappingURL=chunk-78a264b8.b8b33c67.js.map