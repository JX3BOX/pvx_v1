{"version":3,"sources":["webpack:///./src/views/horse/Index.vue","webpack:///src/views/horse/Index.vue","webpack:///./src/views/horse/Index.vue?d340","webpack:///./src/views/horse/Index.vue?4b3b","webpack:///./src/views/horse/Index.vue?51e5"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","searchProps","on","$event","searchEvent","_l","latelyList","list","index","key","_v","_s","options","find","item","type","concat","length","currentType","scopedSlots","_u","fn","data","staticRenderFns","components","PvxSearch","HorseCross","HorseCard","query","page","pageSize","client","listAll","computed","$store","state","slice","methods","iconLink","getHorses","_this","params","Object","assign","Promise","resole","reject","then","res","newList","map","MagicAttributes","mItem","iconUrl","icon","catch","err","mounted","_this2","type0","type1","type2","all","component"],"mappings":"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","file":"js/chunk-1d1fa884.8d7a33f0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"horse-home-wrapper\"},[_c('PvxSearch',{attrs:{\"items\":_vm.searchProps},on:{\"search\":function($event){return _vm.searchEvent($event)}}}),_c('div',{staticClass:\"list-wrapper\"},_vm._l((_vm.latelyList),function(list,index){return _c('div',{key:index,staticClass:\"list-item-wrapper\"},[_c('div',{staticClass:\"title-header\"},[_c('div',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.searchProps[0].options.find((item) => item.type === index) ? _vm.searchProps[0].options.find((item) => item.type === index).name : \"全部\")+\" \")]),_c('router-link',{attrs:{\"to\":`/list?type=${_vm.latelyList.length > 1 ? index : _vm.currentType}`}},[_vm._v(\"查看全部\")])],1),_c('horse-cross',{attrs:{\"list\":list},scopedSlots:_vm._u([{key:\"default\",fn:function(data){return [_c('HorseCard',{attrs:{\"item\":data.item}})]}}],null,true)})],1)}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"horse-home-wrapper\" v-loading=\"loading\">\n        <PvxSearch :items=\"searchProps\" @search=\"searchEvent($event)\"></PvxSearch>\n        <div class=\"list-wrapper\">\n            <div class=\"list-item-wrapper\" v-for=\"(list, index) in latelyList\" :key=\"index\">\n                <div class=\"title-header\">\n                    <div class=\"title\">\n                        {{\n                            searchProps[0].options.find((item) => item.type === index)\n                                ? searchProps[0].options.find((item) => item.type === index).name\n                                : \"全部\"\n                        }}\n                    </div>\n                    <router-link :to=\"`/list?type=${latelyList.length > 1 ? index : currentType}`\"\n                        >查看全部</router-link\n                    >\n                </div>\n                <horse-cross :list=\"list\">\n                    <template v-slot=\"data\">\n                        <HorseCard :item=\"data.item\"></HorseCard>\n                    </template>\n                </horse-cross>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getHorses } from \"@/service/horse\";\nimport PvxSearch from \"@/components/PvxSearch.vue\";\nimport HorseCross from \"@/components/horse/HorseCross.vue\";\nimport HorseCard from \"@/components/horse/HorseCard\";\nimport { iconLink } from \"@jx3box/jx3box-common/js/utils\";\nexport default {\n    name: \"HorseHome\",\n    components: { PvxSearch, HorseCross, HorseCard },\n    data() {\n        return {\n            loading: false,\n            query: {\n                page: 1,\n                pageSize: 20,\n                client: this.client,\n            },\n            currentType: \"\",\n            listAll: [],\n            searchProps: [\n                {\n                    key: \"type\",\n                    name: \"类型\",\n                    type: \"radio\",\n                    options: [\n                        {\n                            type: \"\",\n                            name: \"全部\",\n                        },\n                        {\n                            type: 0,\n                            name: \"普通坐骑\",\n                        },\n                        {\n                            type: 1,\n                            name: \"奇趣坐骑\",\n                        },\n                        {\n                            type: 2,\n                            name: \"马具\",\n                        },\n                    ],\n                },\n            ],\n        };\n    },\n    computed: {\n        client() {\n            return this.$store.state.client;\n        },\n        latelyList() {\n            const listAll = this.listAll;\n            const type = this.currentType;\n            if (typeof type === \"number\") {\n                return listAll.slice(type, type + 1);\n            } else {\n                return listAll;\n            }\n        },\n    },\n    methods: {\n        iconLink,\n        getHorses(type) {\n            const query = this.query;\n            const params = Object.assign({ type: type }, query);\n            return new Promise((resole, reject) => {\n                getHorses(params)\n                    .then((res) => {\n                        let newList = res.data.list.map((item) => {\n                            if (item.MagicAttributes && item.MagicAttributes.length) {\n                                item.MagicAttributes.map((mItem) => {\n                                    mItem.iconUrl = this.iconLink(mItem.icon);\n                                    return mItem;\n                                });\n                            }\n                            return item;\n                        });\n                        resole(newList);\n                    })\n                    .catch((err) => {\n                        reject(err);\n                    });\n            });\n        },\n        searchEvent(data) {\n            this.currentType = data.type;\n        },\n    },\n    mounted() {\n        const type0 = this.getHorses(0),\n            type1 = this.getHorses(1),\n            type2 = this.getHorses(2);\n        this.loading = true;\n        Promise.all([type0, type1, type2])\n            .then((data) => {\n                this.loading = false;\n                this.listAll = data;\n            })\n            .catch(() => {\n                this.loading = false;\n            });\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/horse/index.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=68d6fcee&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=68d6fcee&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Index.vue?vue&type=style&index=0&id=68d6fcee&prod&lang=less&\""],"sourceRoot":""}