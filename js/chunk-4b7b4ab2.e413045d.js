(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b7b4ab2"],{"02be":function(t,i,e){"use strict";e("ff62")},a3fb:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t._self._c;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-paper-single"},[i("div",{staticClass:"m-back"},[i("el-button",{on:{click:t.goBack}},[t._v("返回列表")])],1),i("SingleTitle",{attrs:{item:t.data,score:t.score,type:"paper"}}),t.isIframe?[i("div",{staticClass:"m-paper-iframe"},[t._v("当前试卷为外链，"),i("a",{attrs:{href:t.data.iframe,target:"_blank"}},[t._v("点击前往")])])]:[i("div",{staticClass:"m-paper-list"},t._l(t.list,(function(e,s){return i("SingleCard",{key:e.id,attrs:{item:e.list,index:s+1,answer:e.answer,isSubmitted:t.isSubmitted},on:{changeVal:t.finalAnswer}})})),1),i("div",{staticClass:"m-exam-submit",class:{isSubmitted:t.isSubmitted},on:{click:t.submit}},[i("el-button",{staticClass:"u-btn",attrs:{disabled:t.isSubmitted}},[t._v("提交")])],1),i("Thx",{staticClass:"m-thx",attrs:{postId:t.id,postType:"paper",postTitle:t.title,userId:t.user_id,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,client:t.client}}),i("div",{staticClass:"m-single-comment"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("评论")]),i("Comment",{attrs:{id:t.id,category:"paper"}})],1)]],2)},n=[],a=e("5530"),r=(e("d3b7"),e("b64b"),e("d81d"),e("14d9"),e("4e82"),e("7db0"),e("9430")),o=e("fb94"),u=e("23d8"),l=e("9616"),d=e("6a7f"),c=e("c9d2"),f={name:"PaperSingle",props:[],components:{SingleCard:r["a"],SingleTitle:o["a"],Comment:u["a"]},data:function(){return{data:{},list:[],answer:"",score:"",userAnswers:{},isSubmitted:!1,loading:!1}},computed:{id:function(){return~~this.$route.params.id},user_id:function(){return this.data.createUserId},isIframe:function(){return this.data.iframe},title:function(){return this.data.title||"无标题"},client:function(){return this.data.client||"all"}},methods:{loadData:function(){var t=this;this.loading=!0,Object(d["i"])(this.id).then((function(i){var e,s,n=i.data;Object(l["b"])("paper",t.id),n.tags=JSON.parse(n.tags),n.questionDetailList=(null===n||void 0===n||null===(e=n.questionDetailList)||void 0===e?void 0:e.map((function(t){return t.options=JSON.parse(t.options),t.tags=JSON.parse(t.tags),t})))||[],t.data=n,t.list=(null===n||void 0===n||null===(s=n.questionDetailList)||void 0===s?void 0:s.map((function(t){return{list:t}})))||[]})).finally((function(){t.loading=!1}))},finalAnswer:function(t){this.userAnswers=Object(a["a"])(Object(a["a"])({},this.userAnswers),t)},submit:function(){var t=this;if(!c["a"].isLogin())return this.$message.error("请先登录");if(Object.keys(this.userAnswers).length){var i=this.data.questionDetailList,e=this.userAnswers,s={},n=function(t){var n=i.find((function(i){return i.id===~~t}));s[t]=e[t].map((function(t){return n.options[t]}))};for(var r in e)n(r);var o=[];for(var u in this.userAnswers)o.push({id:[u],myAnswer:this.userAnswers[u].sort()});Object(d["l"])(this.id,s,!0).then((function(i){if(i.data.score){document.documentElement.scrollTop=0;var e=i.data.paper;t.list=t.list.map((function(t){var i=e.questionDetailList.find((function(i){return i.id===t.list.id}));i.answerList=i.answerList.sort();var s=o.find((function(t){return t.id==i.id}));return t.answer=Object(a["a"])(Object(a["a"])({},i),s),t})),t.score=String(i.data.score.score),t.isSubmitted=!0}}))}else this.$alert("不能交白卷哦~","提交失败",{type:"error"})},goBack:function(){this.$router.push({name:"index",params:{type:3}})}},created:function(){this.loadData()}},p=f,m=(e("02be"),e("2877")),b=Object(m["a"])(p,s,n,!1,null,null,null);i["default"]=b.exports},ff62:function(t,i,e){}}]);
//# sourceMappingURL=chunk-4b7b4ab2.e413045d.js.map