(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-099459b2"],{"0b00":function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-pet-list"},[e("div",{ref:"listRef",staticClass:"m-pet-header flex"},[t._m(0),e("div",{staticClass:"m-pet-toolbar flex"},[e("div",{staticClass:"m-pet-filter flex"},[e("el-radio-group",{staticClass:"u-type u-type-radio",model:{value:t.petType,callback:function(e){t.petType=e},expression:"petType"}},t._l(t.Type,(function(a){return e("el-radio",{key:a.type,attrs:{label:a.class}},[t._v(t._s(a.name))])})),1),e("el-select",{staticClass:"u-type u-type-select",attrs:{placeholder:"宠物种类"},model:{value:t.petType,callback:function(e){t.petType=e},expression:"petType"}},t._l(t.Type,(function(t){return e("el-option",{key:t.type,attrs:{label:t.name,value:t.class}})})),1),e("el-select",{staticClass:"u-source",attrs:{placeholder:"获取来源"},model:{value:t.petSource,callback:function(e){t.petSource=e},expression:"petSource"}},t._l(t.Source,(function(t){return e("el-option",{key:t.source,attrs:{label:t.name,value:t.source}})})),1)],1),e("div",{staticClass:"m-pet-search flex"},[e("el-input",{attrs:{placeholder:"输入宠物名字搜索",clearable:""},model:{value:t.petName,callback:function(e){t.petName=e},expression:"petName"}})],1)])]),t.petList&&t.petList.length?e("div",{staticClass:"m-pet-content"},[e("div",{staticClass:"m-pet-list"},t._l(t.petList,(function(a){return e("pet-item",{key:a.Index,attrs:{petObject:a,lucky:t.luckyList}})})),1),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more m-pet-more",attrs:{type:"primary",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages m-pet-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changePage}})],1):e("el-alert",{staticClass:"m-pet-null",attrs:{title:"没有找到相关宠物",type:"info","show-icon":""}})],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-pet-title flex"},[e("i",{staticClass:"u-logo"})])}],i=(a("ac1f"),a("841c"),a("d3b7"),a("4de4"),a("99af"),a("65c2"),a("9b7f")),r=a("60f8"),c=a("4649"),u=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"m-pet-item",attrs:{to:"/"+t.petObject.Index}},[e("img",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.petObject.BgPath)},on:{error:t.replaceByDefault}}),e("img",{staticClass:"u-frame",attrs:{src:t.getFrameSrc(t.petObject.Quality)}}),e("div",{staticClass:"u-stars"},[e("i",{staticClass:"u-star",class:"u-star-"+t.petObject.Star})]),t.getLucky(t.petObject.Index)?e("i",{staticClass:"u-lucky"}):t._e(),e("div",{staticClass:"u-score flex"},[t._v(" "+t._s(t.petObject.Score||"？")+" ")]),e("div",{staticClass:"u-name"},[t._v(t._s(t.petObject.Name))])])},o=[],l=(a("466d"),a("25f0"),a("14d9"),{props:{petObject:{},lucky:{}},inject:["__imgRoot"],data:function(){return{}},computed:{client:function(){return this.$store.state.client}},methods:{replaceByDefault:function(t){t.target.src=this.__imgRoot+"pets/"+this.client+"/3d_bg.png"},getImgSrc:function(t){var e=t.match(/.*[\/,\\](.*?).tga/);return this.__imgRoot+"pets/".concat(this.client,"/")+e[1]+".png"},getFrameSrc:function(t){var e="";if(t){switch(t){case 2:e="/greenborder.png";break;case 3:e="/blueborder.png";break;case 4:e="/purpleborder.png";break;case 5:e="/purpleborder.png";break}return this.__imgRoot+"frame"+e}},getLucky:function(t){return-1!=this.lucky.indexOf(t.toString())},getLink:function(t){this.$router.push({name:"single",params:{id:t}})}}}),p=l,d=(a("e204"),a("2877")),f=Object(d["a"])(p,u,o,!1,null,null,null),m=f.exports,g=a("5a0c"),h=a.n(g),v={name:"PetList",props:[],components:{petItem:m},data:function(){return{loading:!1,petList:[],page:1,total:1,pages:1,per:"",Type:r,Source:c,Lucky:[],petType:"",petSource:"",petName:"",luckyList:[]}},computed:{params:function(){return[this.petType,this.petName,this.petSource,this.client]},request_params:function(){return{per:this.per,page:this.page||1,Class:this.petType,Name:this.petName,Source:this.petSource,client:this.client}},resetParams:function(){return[this.petName,this.petType,this.petSource]},hasNextPage:function(){return this.pages>1&&this.page<this.pages},client:function(){return this.$store.state.client}},watch:{resetParams:{handler:function(){this.page=1}},params:{deep:!0,handler:function(){this.getPetList()}},$route:function(t){t.params.search&&(this.petName=t.params.search)}},methods:{appendPage:function(){this.page+=1,this.getPetList(!0)},changePage:function(){this.getPetList()},getPetList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,Object(i["d"])(this.request_params).then((function(a){var n=a.data.list.filter((function(t){return t.NameFrame}));t.petList=e?t.petList.concat(n):n,t.total=a.data.total,t.pages=a.data.pages})).finally((function(){t.loading=!1}))},getPetLucky:function(){var t=this;Object(i["b"])().then((function(e){var a=e.data.std,n=h()(new Date).format("MDD");t.luckyList=a[n]}))},showCount:function(){var t,e=null===(t=this.$refs.listRef)||void 0===t?void 0:t.clientWidth;this.per=4*Math.floor(e/260)}},mounted:function(){this.showCount(),this.getPetLucky(),this.getPetList()}},b=v,y=(a("578e"),Object(d["a"])(b,n,s,!1,null,null,null));e["default"]=y.exports},4649:function(t){t.exports=JSON.parse('[{"source":"","name":"所有途径"},{"source":5,"name":"世界奇遇"},{"source":6,"name":"积分回馈"},{"source":7,"name":"秘境奇遇"},{"source":8,"name":"门派特有"},{"source":9,"name":"游戏活动"},{"source":10,"name":"限时宠物"},{"source":11,"name":"运营活动"}]')},"466d":function(t,e,a){"use strict";var n=a("c65b"),s=a("d784"),i=a("825a"),r=a("7234"),c=a("50c4"),u=a("577e"),o=a("1d80"),l=a("dc4a"),p=a("8aa5"),d=a("14c3");s("match",(function(t,e,a){return[function(e){var a=o(this),s=r(e)?void 0:l(e,t);return s?n(s,e,a):new RegExp(e)[t](u(a))},function(t){var n=i(this),s=u(t),r=a(e,n,s);if(r.done)return r.value;if(!n.global)return d(n,s);var o=n.unicode;n.lastIndex=0;var l,f=[],m=0;while(null!==(l=d(n,s))){var g=u(l[0]);f[m]=g,""===g&&(n.lastIndex=p(s,c(n.lastIndex),o)),m++}return 0===m?null:f}]}))},"578e":function(t,e,a){"use strict";a("b323")},"60f8":function(t){t.exports=JSON.parse('[{"class":"","type":0,"name":"所有种类"},{"class":1,"type":1,"name":"水族"},{"class":3,"type":2,"name":"走兽"},{"class":2,"type":3,"name":"禽鸟"},{"class":4,"type":4,"name":"机关"}]')},"9b7f":function(t,e,a){"use strict";a.d(e,"d",(function(){return u})),a.d(e,"a",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"b",(function(){return p})),a.d(e,"c",(function(){return d})),a.d(e,"f",(function(){return f}));var n=a("41cb"),s=a("65c2"),i=a("bc3a"),r=a.n(i),c=Object(n["e"])();function u(t){return c.get("/pets",{params:t})}function o(t,e){return c.get("/pet/".concat(t),{params:e})}function l(t){var e=t.item_type,a=t.item_id,n=t.client,s=void 0===n?"std":n;return c.get("/shop",{params:{client:s,itemType:e,itemId:a}})}function p(){return r.a.get(s["__dataPath"]+"pvx/pet/output/pet_lucky.json")}function d(){return r.a.get(s["__dataPath"]+"pvx/pet/output/pet_lucky_reverse.json")}function f(t){return c.get("/skills",{params:t})}},b323:function(t,e,a){},c7db:function(t,e,a){},e204:function(t,e,a){"use strict";a("c7db")}}]);
//# sourceMappingURL=chunk-099459b2.525cc617.js.map