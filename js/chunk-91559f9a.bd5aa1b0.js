(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91559f9a"],{"0d66":function(t,e,i){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{ref:"wrap",staticClass:"cross-wrapper"},[t.isShow?[e("div",{staticClass:"cross cross-left",class:!t.isInLeft&&"active",style:{width:t.width+"px","border-top-left-radius":t.radius+"px","border-bottom-left-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toLeft.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-left"})]),e("div",{staticClass:"cross cross-right",class:!t.isInRight&&"active",style:{width:t.width+"px","border-top-right-radius":t.radius+"px","border-bottom-right-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toRight.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-right"})])]:t._e(),e("div",{ref:"list",staticClass:"list"},t._l(t.list,(function(i,n){return e("div",{key:i.id||i.ID||n,staticClass:"item",style:{"margin-right":t.gap+"px"}},[t._t("default",null,{item:i})],2)})),0)],2)},s=[],a=(i("a9e3"),{name:"Cross",props:{list:{type:Array,required:!0},width:{type:Number,default:60},gap:{type:Number,default:20},radius:{type:Number,default:10}},data:function(){return{scrollLeft:0,isInLeft:!0,isInRight:!1,isShow:!1}},methods:{toLeft:function(t){t.preventDefault(),this.isInRight=!1,this.scroll(-1)},toRight:function(t){t.preventDefault(),this.isInLeft=!1,this.scroll(1)},scroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.$refs.list,n=i.scrollLeft,s=i.scrollWidth,a=i.clientWidth,r=a/2*e,c=null;c=setInterval((function(){1===e?(i.scrollLeft<n+r?i.scrollLeft+=Math.ceil(r/100):clearInterval(c),Math.ceil(i.scrollLeft+a)>=s&&(t.isInRight=!0,clearInterval(c))):-1===e&&(i.scrollLeft>n+r?i.scrollLeft+=Math.floor(r/100):clearInterval(c),i.scrollLeft<=0&&(t.isInLeft=!0,clearInterval(c)))}),1)}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list,i=e.clientWidth,n=e.scrollWidth;n>i&&(t.isShow=!0)}))}}),r=a,c=(i("9fac"),i("2877")),o=Object(c["a"])(r,n,s,!1,null,null,null);e["a"]=o.exports},"14fb":function(t,e,i){},2578:function(t,e,i){},"2efc":function(t,e,i){"use strict";i("b0c0"),i("a9e3");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-card",class:"u-quality-bg--"+t.item.Quality,on:{click:function(e){return t.go(t.item)}}},[15===t.item.SubType?e("el-image",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item)}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("img",{attrs:{src:i("d47d")}})])]):e("item-icon",{attrs:{item_id:String(t.item.ItemID),isLink:!1,size:160,onlyIcon:!0}}),e("div",{staticClass:"u-name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"u-desc"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"u-desc"},t._l(t.item.MagicAttributes||[],(function(i,n){return e("el-tooltip",{key:n,attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])})),1)],1)},s=[],a=(i("14d9"),i("ac1f"),i("466d"),i("5319"),i("bf15")),r={props:{item:{type:Object,required:!0}},components:{ItemIcon:a["a"]},inject:["__imgRoot","__imgRoot2"],data:function(){return{}},computed:{client:function(){return this.$store.state.client}},methods:{go:function(t){var e=t.ItemID,i=15===t.SubType?1:2;this.$router.push({path:"".concat(e),query:{type:i}})},getImgSrc:function(t){var e=t.ImgPath;if(e){var i=e.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),n=i[1].replace(/\\/g,"/");return"default"==i[1]?this.__imgRoot+"homeland/".concat(this.client)+"/default/default.png":this.__imgRoot+"homeland/".concat(this.client)+n+".png"}return this.__imgRoot2+"".concat(this.client,"/")+t.ID+".png"},getType:function(t){var e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e}}},c=r,o=(i("ea35"),i("2877")),u=Object(o["a"])(c,n,s,!1,null,null,null);e["a"]=u.exports},6231:function(t,e,i){"use strict";i.r(e);i("7db0"),i("d3b7"),i("b0c0");var n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"horse-home-wrapper"},[e("PvxSearch",{attrs:{items:t.searchProps},on:{search:function(e){return t.searchEvent(e)}}}),e("div",{staticClass:"list-wrapper"},t._l(t.listAll,(function(i,n){return e("div",{key:n,staticClass:"list-item-wrapper"},[e("div",{staticClass:"title-header"},[e("div",{staticClass:"title"},[t._v(" "+t._s(t.searchProps[0].options.find((function(t){return t.type===n}))?t.searchProps[0].options.find((function(t){return t.type===n})).name:"全部")+" ")]),e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.toList(n)}}},[t._v("查看全部")])]),e("horse-cross",{attrs:{list:i},scopedSlots:t._u([{key:"default",fn:function(t){return[e("HorseCard",{attrs:{item:t.item}})]}}],null,!0)})],1)})),0)],1)},s=[],a=i("c7eb"),r=i("1da1"),c=(i("d81d"),i("fb6a"),i("e9c4"),i("159b"),i("c740"),i("14d9"),i("b64b"),i("3ca3"),i("ddb0"),i("f252")),o=i("d427"),u=i("0d66"),l=i("2efc"),d=i("85e4"),f=i("ed08"),p={name:"HorseHome",components:{PvxSearch:o["a"],HorseCross:u["a"],HorseCard:l["a"]},data:function(){return{loading:!1,query:{page:1,pageSize:20,client:this.client},listAll:[],searchProps:[{key:"type",name:"类型",type:"radio",options:[{type:"",name:"全部"},{type:0,name:"普通坐骑"},{type:1,name:"奇趣坐骑"},{type:2,name:"马具"}]},{type:"filter",key:"filter",name:"过滤",options:[{key:"feed",type:"checkbox",name:"喂食饲料",options:[]},{key:"attr",type:"checkbox",name:"属性",options:[]}]},{key:"keyword",name:"名称/ID"}]}},computed:{client:function(){return this.$store.state.client}},methods:{iconLink:d["iconLink"],getHorses:function(t){var e=this,i=this.query,n=Object.assign({type:t},i);return new Promise((function(t,i){Object(c["d"])(n).then((function(i){var n=i.data.list.map((function(t){return t.MagicAttributes&&t.MagicAttributes.length&&t.MagicAttributes.map((function(t){return t.iconUrl=e.iconLink(t.icon),t})),t}));t(n)})).catch((function(t){i(t)}))}))},getFeedList:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["b"])().then((function(e){var i=e.data.map((function(t){var e=t.tip.indexOf("【"),i=t.tip.indexOf("】");return t.feed=t.tip.slice(e+1,i),t}));t.feeds=JSON.parse(JSON.stringify(i));var n=[];i.forEach((function(t){var e=n.findIndex((function(e){return e.feed===t.feed}));e>-1?n[e].id+=","+t.id:n.push(t)}));var s=n.map((function(t){return{label:t.feed,value:t.id}}));t.searchProps[1].options[0].options=s}));case 2:case"end":return e.stop()}}),e)})))()},getAttrList:function(){var t=this;return Object(r["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])().then((function(e){var i=e.data,n=i.map((function(t){return{label:t.name,value:t.name}}));t.searchProps[1].options[1].options=n}));case 2:case"end":return e.stop()}}),e)})))()},searchEvent:function(t){var e=Object.assign({},t);Object.keys(Object(f["a"])(e)).length&&this.$router.push({name:"list",params:Object(f["a"])(e)})},toList:function(t){this.$router.push({name:"list",params:{type:t}})}},mounted:function(){var t=this,e=this.getHorses(0),i=this.getHorses(1),n=this.getHorses(2);this.loading=!0,Promise.all([e,i,n]).then((function(e){t.loading=!1,t.listAll=e})).catch((function(){t.loading=!1})),this.getAttrList(),this.getFeedList()}},m=p,h=(i("8430"),i("2877")),g=Object(h["a"])(m,n,s,!1,null,null,null);e["default"]=g.exports},8430:function(t,e,i){"use strict";i("14fb")},"9fac":function(t,e,i){"use strict";i("e56e")},bf15:function(t,e,i){"use strict";i("99af");var n=function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"u-item",attrs:{placement:"right-start",trigger:"hover","visible-arrow":!1,"popper-class":"u-item__popup"}},[e("template",{slot:"reference"},[e("div",{staticClass:"u-item__warpper",class:{background:!t.onlyIcon,is_vertical:t.vertical}},[t.onlyName?t._e():e("a",{staticClass:"u-item-icon",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{target:"_blank",href:t.isLink?t.getLink("item",t.source.id):t.noLink()}},[e("img",{staticClass:"u-item-icon__img",style:{height:t.size+"px",width:t.size+"px",cursor:t.isLink?"pointer":"default"},attrs:{src:t.iconLink(t.source.IconID,t.client)}}),e("div",{staticClass:"u-item-icon__quality",style:{backgroundImage:t.item_border(t.source),opacity:5==t.source.Quality?.9:1}}),e("div",{staticClass:"u-item-icon__quest",style:{backgroundImage:t.item_border_quest(t.source)}}),1!==t.display_amount?e("span",{staticClass:"u-item-icon__count"},[t._v(t._s(t.display_amount))]):t._e()]),t.onlyIcon?t._e():e("div",{staticClass:"u-item-name",class:"e-jx3-item__q".concat(t.source.Quality)},[t._v(" "+t._s(t.source.Name)+" ")])])]),e("jx3-item",{attrs:{item:t.source}})],2)},s=[],a=(i("a9e3"),i("b64b"),i("e9c4"),i("c7fa")),r=i("4ae4"),c=i("85e4"),o=i("65c2"),u={name:"ItemIcon",data:function(){return{source:{},real_id:null,maybeBook:!1}},components:{"jx3-item":a["a"]},props:{size:{type:Number,default:28},item_id:{type:String,default:null},amount:{type:Number,default:1},onlyName:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},isLink:{type:Boolean,default:!0}},methods:{noLink:function(){return!1},get_data:function(t){var e=this;t&&Object(r["a"])(t,this.client).then((function(t){var i=t.data,n=i.data.item;Object.keys(n).length&&(e.source=n,sessionStorage.setItem(e.cache_key,JSON.stringify(n)))})).catch((function(t){var i;400==(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.code)&&!1===e.maybeBook&&(e.maybeBook=!0,e.real_id="".concat(e.item_id,"_").concat(e.amount))}))},iconLink:c["iconLink"],getLink:c["getLink"],item_border_quest:function(t){return t.IsQuest>0?"url(".concat(o["__imgPath"],"image/item/renwu.png)"):""},item_border:function(t){switch(t.Quality){case 3:return"url(".concat(o["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(o["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(o["__imgPath"],"image/item/orange.gif)");default:return""}}},computed:{client:function(){return this.$store.state.client},cache_key:function(){return"item-".concat(this.client,"-").concat(this.real_id)},display_amount:function(){return!1===this.maybeBook?this.amount:1}},watch:{real_id:{immediate:!0,handler:function(){var t=sessionStorage.getItem(this.cache_key);if(t)try{this.source=JSON.parse(t)}catch(e){console.log(e,"[Item]无法解析本地缓存"),this.get_data(this.real_id)}else this.get_data(this.real_id)}}},mounted:function(){this.real_id=this.item_id}},l=u,d=(i("c0dd"),i("2877")),f=Object(d["a"])(l,n,s,!1,null,null,null);e["a"]=f.exports},c0dd:function(t,e,i){"use strict";i("e67d")},c740:function(t,e,i){"use strict";var n=i("23e7"),s=i("b727").findIndex,a=i("44d2"),r="findIndex",c=!0;r in[]&&Array(1)[r]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(r)},d47d:function(t,e,i){t.exports=i.p+"img/horse_item_bg_sm.1dd5cf95.jpg"},e56e:function(t,e,i){},e67d:function(t,e,i){},ea35:function(t,e,i){"use strict";i("2578")},f252:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return c})),i.d(e,"b",(function(){return o}));var n=i("41cb"),s=Object(n["e"])();function a(t){return s.get("/horses",{params:t})}function r(t){return s.get("/horse",{params:t})}function c(t){return s.get("/horse/attrs",{params:t})}function o(t){return s.get("/horse/feeds ",{params:t})}}}]);
//# sourceMappingURL=chunk-91559f9a.bd5aa1b0.js.map