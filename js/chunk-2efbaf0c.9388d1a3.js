(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2efbaf0c"],{"60d7":function(t){t.exports=JSON.parse('["蝶恋花","龙争虎斗","长安城","幽月轮","斗转星移","剑胆琴心","乾坤一掷","唯我独尊","梦江南","绝代天骄","天鹅坪","破阵子","飞龙在天","青梅煮酒"]')},8022:function(t,e,a){},"85b5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.id?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-adventure-single"},[a("div",{staticClass:"m-adventure-navigation"},[a("el-button",{staticClass:"u-goback",attrs:{size:"medium",icon:"el-icon-arrow-left",plain:""},on:{click:t.goBack}},[t._v("返回列表")]),a("div",{staticClass:"m-trigger-links"},[a("a",{staticClass:"u-link u-achievement",attrs:{href:t.getLink("cj",t.achieve_id),target:"_blank"}},[a("i",{staticClass:"el-icon-trophy"}),t._v(" 成就信息 ")])])],1),a("h1",{staticClass:"m-adventure-title"},[t._v(t._s(t.title))]),a("div",{staticClass:"m-adventure-content"},[a("task",{attrs:{id:t.id}})],1),t.achieve_id?a("div",{staticClass:"m-adventure-wiki"},[a("Wiki",{attrs:{source_type:"achievement",source_id:t.achieve_id,type:t.type,id:t.id,title:"奇遇攻略"}})],1):t._e(),a("div",{staticClass:"m-adventure-serendipity"},[a("Serendipity",{attrs:{title:t.title}})],1),a("div",{staticClass:"m-pvx-comment"},[a("Comment",{attrs:{id:t.id,category:t.type,order:"desc"}})],1)]):t._e()},i=[],s=(a("d3b7"),a("85e4")),r=a("bd8e"),c=a("bed2"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.task?a("div",{staticClass:"m-adventure-task"},[a("el-carousel",{staticClass:"u-carousel",attrs:{autoplay:!1,type:"card"}},t._l(t.task,(function(e,n){return a("el-carousel-item",{key:n},[a("span",{staticClass:"u-img",style:t.imgStyle(e)})])})),1),a("span",{staticClass:"u-name"},[t._v(t._s(t.task.name))])],1):t._e()},l=[],o=a("2909"),u=(a("ac1f"),a("466d"),a("159b"),a("5319"),a("6062"),a("3ca3"),a("ddb0"),{name:"task",props:["id"],inject:["__imgRoot"],components:{},data:function(){return{task:""}},computed:{client:function(){return this.$store.state.client}},methods:{imgNameTga:function(t){return t.match(/(\S*)Adventure\/(\S*)\.tga/)[2]},imgStyle:function(t){return{backgroundImage:"url("+this.__imgRoot+"adventure/".concat(this.client,"/")+t+".png)"}},loadData:function(){var t=this;Object(c["b"])(this.id).then((function(e){var a=[];e.data.forEach((function(e){if(e.szFramePath){var n,i=null===(n=e.szFramePath)||void 0===n?void 0:n.replace(/\\/g,"/");a.push(t.imgNameTga(i))}})),t.task=Object(o["a"])(new Set(a))}))}},filters:{},created:function(){},mounted:function(){this.loadData()}}),m=u,_=a("2877"),f=Object(_["a"])(m,d,l,!1,null,null,null),p=f.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.title?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-serendipity"},[a("div",{staticClass:"u-title"},[a("span",{staticClass:"u-label"},[a("i",{staticClass:"el-icon-present"}),t._v(" 触发记录 "),a("el-select",{staticClass:"u-server",attrs:{placeholder:"区服",size:"small"},on:{change:t.changeServer},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},t._l(t.servers,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("a",{staticClass:"u-more",attrs:{href:"https://j3cx.com/serendipity",target:"_blank"}},[t._v("查看更多 »")])]),t.list&&t.list.length>0?a("ul",{staticClass:"u-list"},[t._m(0),t._l(t.list,(function(e,n){return a("li",{key:n},[a("span",{staticClass:"u-date"},[t._v(t._s(t._f("showDate")(e.date_str)))]),a("span",{staticClass:"u-time"},[t._v(t._s(t._f("wikiDate")(e.dwTime)))]),a("span",{staticClass:"u-server"},[t._v(t._s(e.gegion)+"-"+t._s(e.server))]),a("span",{staticClass:"u-name"},[t._v(t._s(e.name||"匿名"))])])}))],2):a("el-alert",{staticClass:"u-alert",attrs:{title:"无记录",type:"info",center:"",closable:!1}})],1):t._e()},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"u-header"},[a("span",{staticClass:"u-date"},[t._v("日期")]),a("span",{staticClass:"u-time"},[t._v("激活时间")]),a("span",{staticClass:"u-server"},[t._v("服务器")]),a("span",{staticClass:"u-name"},[t._v("玩家")])])}],g=a("60d7"),y=a("41cb");function k(){return Object(y["a"])().get("/api/cms/user/my/info")}function b(t){var e="https://pull.j3cx.com/";return y["h"].get("/api/serendipity",{baseURL:e,params:t})}a("1276");var Y=a("c1df"),C=a.n(Y);function D(t){return C()(t).fromNow()}function w(t){return C()(t).format("YYYY-MM-DD")}C.a.locale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY年MM月DD日",LLL:"YYYY年MM月DD日Ah点mm分",LLLL:"YYYY年MM月DD日ddddAh点mm分",l:"YYYY-M-D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(t,e){return 12===t&&(t=0),"凌晨"===e||"早上"===e||"上午"===e?t:"下午"===e||"晚上"===e?t+12:t>=11?t:t+12},meridiem:function(t,e,a){var n=100*t+e;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}});var L=a("c9d2"),M={name:"serendipity",props:["title"],components:{},data:function(){return{servers:g,server:"长安城",list:[],loading:!1}},computed:{params:function(){return{server:this.server,serendipity:this.title,start:0,pageIndex:1,pageSize:10}}},methods:{loadSerendipity:function(){var t=this;this.loading=!0,b(this.params).then((function(e){t.list=e.data.data.data})).finally((function(){t.loading=!1}))},changeServer:function(){this.loadSerendipity()}},filters:{wikiDate:function(t){return D(1e3*t)},showDate:function(t){return w(t)}},mounted:function(){var t=this;L["a"].isLogin()?k().then((function(e){t.server=e.data.data.jx3_server||"长安城"})).then((function(){t.loadSerendipity()})):this.loadSerendipity()}},S=M,j=(a("df3b"),Object(_["a"])(S,v,h,!1,null,null,null)),x=j.exports,O=a("23d8"),T=a("9616"),H={name:"adventureSingle",props:[],components:{Wiki:r["a"],task:p,Serendipity:x,Comment:O["a"]},data:function(){return{type:"adventure",achieve_id:"",data:"",task:[],isPet:!0,loading:!1}},computed:{id:function(){return this.$route.params.id},title:function(){var t;return null===(t=this.data)||void 0===t?void 0:t.szName}},watch:{id:{immediate:!0,handler:function(t){t&&this.getData()}}},methods:{getLink:s["getLink"],goBack:function(){this.$router.push({name:"list"})},getData:function(){var t=this;this.loading=!0,Object(c["a"])(this.id).then((function(e){t.isPet=!1,t.data=e.data})).finally((function(){t.loading=!1,Object(T["b"])(t.type,t.id)})),Object(c["d"])().then((function(e){t.achieve_id=e.data[t.id]}))}},mounted:function(){}},z=H,N=(a("fade"),Object(_["a"])(z,n,i,!1,null,null,null));e["default"]=N.exports},bed2:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return d}));var n=a("41cb"),i=a("65c2");function s(t){return Object(n["e"])().get("/serendipities",{params:t})}function r(t){return Object(n["e"])().get("/serendipity/".concat(t))}function c(t){return Object(n["e"])().get("/serendipity/".concat(t,"/task"))}function d(){return n["h"].get("".concat(i["__dataPath"],"pvx/serendipity/output/serendipity.json"))}},df3b:function(t,e,a){"use strict";a("8022")},fade:function(t,e,a){"use strict";a("fdda")},fdda:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2efbaf0c.9388d1a3.js.map