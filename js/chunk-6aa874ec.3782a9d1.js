(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6aa874ec"],{"25f0":function(t,e,a){"use strict";var i=a("e330"),s=a("5e77").PROPER,n=a("6eeb"),c=a("825a"),r=a("3a9b"),o=a("577e"),l=a("d039"),u=a("ad6d"),p="toString",d=RegExp.prototype,f=d[p],m=i(u),v=l((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),g=s&&f.name!=p;(v||g)&&n(RegExp.prototype,p,(function(){var t=c(this),e=o(t.source),a=t.flags,i=o(void 0===a&&r(d,t)&&!("flags"in d)?m(t):a);return"/"+e+"/"+i}),{unsafe:!0})},"2d4f":function(t,e,a){"use strict";a("ea20")},"3ac3":function(t,e,a){"use strict";a("c98d")},4649:function(t){t.exports=JSON.parse('[{"source":"","name":"所有途径"},{"source":5,"name":"世界奇遇"},{"source":6,"name":"积分回馈"},{"source":7,"name":"秘境奇遇"},{"source":8,"name":"门派特有"},{"source":9,"name":"游戏活动"},{"source":10,"name":"限时宠物"},{"source":11,"name":"运营活动"}]')},"4d63":function(t,e,a){var i=a("83ab"),s=a("da84"),n=a("e330"),c=a("94ca"),r=a("7156"),o=a("9112"),l=a("9bf2").f,u=a("241c").f,p=a("3a9b"),d=a("44e7"),f=a("577e"),m=a("ad6d"),v=a("9f7f"),g=a("6eeb"),h=a("d039"),_=a("1a2d"),b=a("69f3").enforce,k=a("2626"),C=a("b622"),y=a("fce3"),x=a("107c"),I=C("match"),w=s.RegExp,S=w.prototype,P=s.SyntaxError,L=n(m),j=n(S.exec),O=n("".charAt),T=n("".replace),E=n("".indexOf),D=n("".slice),R=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,N=/a/g,$=/a/g,M=new w(N)!==N,A=v.MISSED_STICKY,z=v.UNSUPPORTED_Y,W=i&&(!M||A||y||x||h((function(){return $[I]=!1,w(N)!=N||w($)==$||"/a/i"!=w(N,"i")}))),F=function(t){for(var e,a=t.length,i=0,s="",n=!1;i<=a;i++)e=O(t,i),"\\"!==e?n||"."!==e?("["===e?n=!0:"]"===e&&(n=!1),s+=e):s+="[\\s\\S]":s+=e+O(t,++i);return s},B=function(t){for(var e,a=t.length,i=0,s="",n=[],c={},r=!1,o=!1,l=0,u="";i<=a;i++){if(e=O(t,i),"\\"===e)e+=O(t,++i);else if("]"===e)r=!1;else if(!r)switch(!0){case"["===e:r=!0;break;case"("===e:j(R,D(t,i+1))&&(i+=2,o=!0),s+=e,l++;continue;case">"===e&&o:if(""===u||_(c,u))throw new P("Invalid capture group name");c[u]=!0,n[n.length]=[u,l],o=!1,u="";continue}o?u+=e:s+=e}return[s,n]};if(c("RegExp",W)){for(var J=function(t,e){var a,i,s,n,c,l,u=p(S,this),m=d(t),v=void 0===e,g=[],h=t;if(!u&&m&&v&&t.constructor===J)return t;if((m||p(S,t))&&(t=t.source,v&&(e="flags"in h?h.flags:L(h))),t=void 0===t?"":f(t),e=void 0===e?"":f(e),h=t,y&&"dotAll"in N&&(i=!!e&&E(e,"s")>-1,i&&(e=T(e,/s/g,""))),a=e,A&&"sticky"in N&&(s=!!e&&E(e,"y")>-1,s&&z&&(e=T(e,/y/g,""))),x&&(n=B(t),t=n[0],g=n[1]),c=r(w(t,e),u?this:S,J),(i||s||g.length)&&(l=b(c),i&&(l.dotAll=!0,l.raw=J(F(t),a)),s&&(l.sticky=!0),g.length&&(l.groups=g)),t!==h)try{o(c,"source",""===h?"(?:)":h)}catch(_){}return c},q=function(t){t in J||l(J,t,{configurable:!0,get:function(){return w[t]},set:function(e){w[t]=e}})},Q=u(w),U=0;Q.length>U;)q(Q[U++]);S.constructor=J,J.prototype=S,g(s,"RegExp",J)}k("RegExp")},"60f8":function(t){t.exports=JSON.parse('[{"class":"","type":0,"name":"所有种类"},{"class":1,"type":1,"name":"水族"},{"class":3,"type":2,"name":"走兽"},{"class":2,"type":3,"name":"禽鸟"},{"class":4,"type":4,"name":"机关"}]')},"7ceb":function(t,e,a){"use strict";a("ffe5")},"9b7f":function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return l})),a.d(e,"d",(function(){return u})),a.d(e,"b",(function(){return p})),a.d(e,"e",(function(){return d}));var i=a("41cb"),s=a("65c2"),n=a("bc3a"),c=a.n(n),r=Object(i["e"])();function o(t){return r.get("/pets",{params:t})}function l(t,e){return r.get("/pet/".concat(t),{params:e})}function u(t){var e=t.item_type,a=t.item_id,i=t.client,s=void 0===i?"std":i;return r.get("/shop",{params:{client:s,itemType:e,itemId:a}})}function p(){return c.a.get(s["__iconPath"]+"pvx/pet/output/pet_lucky.json")}function d(t){return r.get("/skills",{params:t})}},a15b:function(t,e,a){"use strict";var i=a("23e7"),s=a("e330"),n=a("44ad"),c=a("fc6a"),r=a("a640"),o=s([].join),l=n!=Object,u=r("join",",");i({target:"Array",proto:!0,forced:l||!u},{join:function(t){return o(c(this),void 0===t?",":t)}})},b03f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.pet?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-pet-single"},[a("div",{staticClass:"m-pet-navigation"},[a("el-button",{staticClass:"u-goback",attrs:{size:"medium",icon:"el-icon-arrow-left",plain:""},on:{click:t.goBack}},[t._v("返回列表")]),a("div",{staticClass:"m-pet-links"},[a("a",{staticClass:"u-link u-item",attrs:{href:t.getLink("item",t.item_id),target:"_blank"}},[a("i",{staticClass:"el-icon-collection-tag"}),t._v("物品信息")]),t.achievement_id?[a("em",[t._v(" | ")]),a("a",{staticClass:"u-link u-achievement",attrs:{href:t.getLink("cj",t.achievement_id),target:"_blank"}},[a("i",{staticClass:"el-icon-trophy"}),t._v("成就信息")])]:t._e()],2)],1),a("div",{staticClass:"m-pet-content flex"},[a("petCard",{attrs:{petObject:t.pet,lucky:t.luckyList}}),a("div",{staticClass:"m-pet-info"},[a("h1",{staticClass:"u-title"},[a("span",{staticClass:"u-name"},[t._v(t._s(t.pet.Name))]),a("span",{staticClass:"u-type"},[t._v(t._s(t.getPetType(t.pet.Class))+" · "+t._s(t.getPetSource(t.pet.Source)))]),a("i",{staticClass:"u-stars"},t._l(t.pet.Star,(function(t){return a("i",{key:t,staticClass:"el-icon-star-on"})})),0)]),a("div",{staticClass:"m-pet-skills"},t._l(t.petSkills,(function(e,i){return a("div",{key:i,staticClass:"u-skill"},[a("el-popover",{attrs:{trigger:"hover","popper-class":"m-pet-skill","visible-arrow":!1,placement:"top"}},[a("div",{staticClass:"u-skill-pop"},[a("div",{staticClass:"u-skill-name"},[t._v(t._s(e.Name))]),a("div",{staticClass:"u-skill-desc"},[t._v(t._s(e.Desc))])]),a("img",{staticClass:"u-skill-icon",attrs:{slot:"reference",src:t._f("iconLink")(e.IconID),alt:e.Name},slot:"reference"})])],1)})),0),a("div",{staticClass:"u-metas"},[a("div",{staticClass:"u-meta u-score"},[a("span",{staticClass:"u-meta-label"},[t._v("宠物分数：")]),t._v(t._s(t.pet.Score))]),a("div",{staticClass:"u-meta u-desc"},[a("span",{staticClass:"u-meta-label"},[t._v("宠物说明：")]),a("span",{staticClass:"u-meta-value"},[t._l(t.getPetDesc(t.pet.Desc),(function(e,i){return[a("span",{key:i,domProps:{innerHTML:t._s(e.text)}})]}))],2)]),a("div",{staticClass:"u-meta u-source"},[a("span",{staticClass:"u-meta-label"},[t._v("获取线索：")]),t._l(t.getPetDesc(t.pet.OutputDes),(function(e){return[a("span",{key:e.text},[t._v(t._s(t._f("cleanResourceText")(e.text)))])]}))],2),t.shopInfo.RewardsPrice||t.shopInfo.CoinPrice?a("div",{staticClass:"u-meta u-shop"},[a("span",{staticClass:"u-meta-label"},[t._v("商城价格：")]),a("span",{staticClass:"u-price"},[t.shopInfo.RewardsPrice>0?a("el-tag",{staticClass:"u-price-item u-rewards"},[t._v("积分"),a("b",[t._v(t._s(t.shopInfo.RewardsPrice))]),a("i",{staticClass:"u-icon-rewards"})]):t._e(),a("el-tag",{staticClass:"u-price-item u-coin"},[t._v("通宝"),a("b",[t._v(t._s(t.shopInfo.CoinPrice))]),a("i",{staticClass:"u-icon-coin"})])],1)]):t._e()])])],1),t.medalList&&t.medalList.length?a("div",{staticClass:"m-pet-fetters"},[a("div",{staticClass:"u-header"},[a("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"31.531",height:"31.531",viewBox:"0 0 31.531 31.531","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("path",{attrs:{d:"M11.872 24.961l-2.539.412a2.59 2.59 0 01-1.961-.468 2.606 2.606 0 01-1.043-1.72l-.223-1.482-4.407 4.407a.835.835 0 00.438 1.413l2.801.523.523 2.801a.838.838 0 001.413.438l5.755-5.755-.422-.427a.471.471 0 00-.335-.142z"}}),a("path",{attrs:{d:"M19.91 23.932l2.458.404a1.554 1.554 0 001.794-1.303l.37-2.458c.075-.492.383-.917.829-1.141l2.224-1.111a1.564 1.564 0 00.686-2.111L27.129 14a1.518 1.518 0 010-1.403l1.144-2.211c.19-.37.227-.802.098-1.199a1.57 1.57 0 00-.785-.911l-2.223-1.112a1.53 1.53 0 01-.829-1.14l-.37-2.458a1.556 1.556 0 00-.624-1.026 1.555 1.555 0 00-1.17-.279l-2.457.405a1.52 1.52 0 01-1.335-.434L16.828.459A1.568 1.568 0 0015.766 0a1.566 1.566 0 00-1.061.459l-1.75 1.773a1.52 1.52 0 01-1.335.434l-2.457-.405a1.554 1.554 0 00-1.17.279 1.556 1.556 0 00-.624 1.026l-.37 2.458a1.532 1.532 0 01-.83 1.14L3.947 8.276a1.568 1.568 0 00-.785.912c-.129.396-.093.829.097 1.199l1.144 2.211c.229.439.229.964 0 1.403l-1.143 2.21a1.563 1.563 0 00.687 2.111l2.224 1.111c.446.224.753.649.829 1.141l.37 2.458c.062.412.288.783.624 1.026a1.55 1.55 0 001.17.277l2.458-.404c.489-.082.987.08 1.335.436l1.75 1.771a1.55 1.55 0 001.059.459 1.55 1.55 0 001.059-.459l1.75-1.771a1.517 1.517 0 011.335-.435zm-4.144-1.39c-5.205-.026-9.431-4.266-9.431-9.477 0-5.21 4.226-9.451 9.431-9.478 5.205.026 9.432 4.268 9.432 9.478-.001 5.211-4.227 9.451-9.432 9.477z"}}),a("path",{attrs:{d:"M15.766 4.955c-4.444.028-8.05 3.648-8.05 8.097 0 4.447 3.606 8.068 8.05 8.096 4.444-.027 8.05-3.648 8.05-8.096-.001-4.448-3.606-8.069-8.05-8.097zM29.833 26.11l-4.407-4.407-.223 1.482a2.615 2.615 0 01-3.004 2.188l-2.539-.412a.468.468 0 00-.335.143l-.422.427 5.755 5.755a.838.838 0 001.413-.438l.522-2.801 2.801-.523a.837.837 0 00.439-1.414z"}})]),t._v(" "),a("span",{staticClass:"u-txt"},[t._v("宠物羁绊")])]),t._l(t.medalList,(function(t){return a("petFetters",{key:t.ID,attrs:{info:t}})}))],2):t._e(),a("div",{staticClass:"m-pet-wiki"},[a("Wiki",{attrs:{source_type:"item",source_id:t.item_id,type:t.type,id:t.id,title:"宠物攻略"}})],1),a("div",{staticClass:"m-pvx-comment"},[a("Comment",{attrs:{id:t.id,category:t.type,order:"desc"}})],1)]):t._e()},s=[],n=a("2909"),c=(a("d3b7"),a("2ca0"),a("a15b"),a("4de4"),a("7db0"),a("b0c0"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("5319"),a("fb6a"),a("99af"),a("6062"),a("3ca3"),a("ddb0"),a("159b"),a("caad"),a("2532"),a("d81d"),a("9b7f")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-pet-card"},[a("img",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.petObject.BgPath)}}),a("img",{staticClass:"u-frame",attrs:{src:t.getFrameSrc(t.petObject.Quality)}}),a("div",{staticClass:"u-stars"},[a("i",{staticClass:"u-star",class:"u-star-"+t.petObject.Star})]),t.getLucky(t.petObject.Index)?a("i",{staticClass:"u-lucky"}):t._e(),a("div",{staticClass:"u-score flex"},[t._v(" "+t._s(t.petObject.Score||"？")+" ")]),a("span",{staticClass:"u-name"},[t._v(t._s(t.petObject.Name))])])},o=[],l=(a("466d"),a("65c2")),u={props:{petObject:{},lucky:{}},data:function(){return{}},methods:{getImgSrc:function(t){if(t){var e=t.match(/.*[\/,\\](.*?).tga/);return l["__iconPath"]+"pvx/pet/images/"+e[1]+".png"}},getFrameSrc:function(t){var e="";if(t){switch(t){case 2:e="/greenborder.png";break;case 3:e="/blueborder.png";break;case 4:e="/purpleborder.png";break;case 5:e="/purpleborder.png";break}return l["__iconPath"]+"pvx/pet/frame"+e}},getLucky:function(t){var e;if(t)return-1!=(null===(e=this.lucky)||void 0===e?void 0:e.indexOf(t.toString()))}}},p=u,d=(a("2d4f"),a("2877")),f=Object(d["a"])(p,r,o,!1,null,null,null),m=f.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-fetters"},[a("div",{staticClass:"m-fetters-title"},[a("div",{staticClass:"u-title"},[a("i",{staticClass:"el-icon-star-on"}),t._v(t._s(t.info.Name))]),a("div",{staticClass:"u-desc"},[t._v(t._s(t.showPetterDesc(t.info.Des)))])]),a("div",{staticClass:"m-fetters-list"},t._l(t.info.petList,(function(e){return a("el-popover",{key:e.Index,attrs:{placement:"top","popper-class":"m-pet-pop",width:"auto","visible-arrow":!1,trigger:"hover",transition:"none","close-delay":0}},[a("router-link",{staticClass:"u-fetter",attrs:{slot:"reference",to:"/"+e.Index},slot:"reference"},[a("i",{staticClass:"u-fetter-icon",class:["u-quality-"+e.Quality]},[a("img",{attrs:{src:t.iconLink(e.IconID)}})]),a("span",{staticClass:"u-fetter-name"},[t._v(t._s(e.Name))]),e.Index==t.id?a("i",{staticClass:"u-mark"},[t._v("当前")]):t._e()]),a("jx3-item",{attrs:{item_id:e.ItemTabType+"_"+e.ItemTabIndex}})],1)})),1)])},g=[],h=a("85e4"),_=a("c7fa"),b={name:"Fetters",props:["info"],components:{"jx3-item":_["a"]},data:function(){return{}},computed:{id:function(){return console.log(this.info,"???"),this.$route.params.id}},methods:{getImgSrc:function(t){if(t){var e=t.match(/.*[\/,\\](.*?).tga/);return l["__iconPath"]+"pvx/pet/images/"+e[1]+".png"}},getLink:function(t){t!=this.$route.params.id&&this.$router.push({name:"single",params:{id:t}})},iconLink:h["iconLink"],showPetterDesc:function(t){var e=Object(h["extractTextContent"])(t);return e[0]["text"]}}},k=b,C=(a("7ceb"),Object(d["a"])(k,v,g,!1,null,null,null)),y=C.exports,x=a("bd8e"),I=a("60f8"),w=a("4649"),S=a("23d8"),P=a("9616"),L={name:"PetSingle",props:[],components:{petCard:m,petFetters:y,Wiki:x["a"],Comment:S["a"]},data:function(){return{type:"pet",pet:"",petSkills:[],shopInfo:"",luckyList:[],medalList:[],loading:!1}},computed:{id:function(){return this.$route.params.id},item_id:function(){var t,e;return(null===(t=this.pet)||void 0===t?void 0:t.ItemTabType)+"_"+(null===(e=this.pet)||void 0===e?void 0:e.ItemTabIndex)},achievement_id:function(){var t;return null===(t=this.petWiki)||void 0===t?void 0:t.achievement_id},client:function(){return this.$store.state.client},title:function(){var t;return null===(t=this.pet)||void 0===t?void 0:t.Name},params:function(){return{client:this.client}}},watch:{id:function(){this.getPetInfo()}},methods:{getPetInfo:function(){var t=this;this.loading=!0,Object(c["a"])(this.id,this.params).then((function(e){t.pet=e.data,t.medalList=e.data.medal_list,t.loadPetSkills(e.data.__skills),t.getShopInfo(),t.getPetMedal()})).finally((function(){t.loading=!1,Object(P["b"])(t.type,t.id)}))},loadPetSkills:function(t){var e=this,a=[],i=[];for(var s in this.petSkills=[],t)s.startsWith("Level")&&t[s]&&a.push(t[s]),s.startsWith("SkillID")&&t[s]&&i.push(t[s]);Object(c["e"])({ids:i.join(","),client:this.client}).then((function(t){a.forEach((function(a,s){var n=t.data.filter((function(t){return t.Level===a})),c=n.find((function(t){return t.SkillID===i[s]}));c&&e.petSkills.push(c)}))}))},getShopInfo:function(){var t=this,e={item_type:this.pet.ItemTabType,item_id:this.pet.ItemTabIndex};Object(c["d"])(e).then((function(e){t.shopInfo=(null===e||void 0===e?void 0:e.data)||""}))},getPetType:function(t){var e=I.find((function(e){return e.class===t}));return(null===e||void 0===e?void 0:e.name)||""},getPetSource:function(t){var e=w.find((function(e){return~~t===~~e.source}));return(null===e||void 0===e?void 0:e.name)||""},getPetDesc:function(t){var e,a=new RegExp("<text>text=([\\s\\S]*?)font=(\\d+)[\\s\\S]*?<\\/text>","gimy"),i=[];while(e=a.exec(t))i.push(e);for(var s=[],n=0,c=i;n<c.length;n++){var r=c[n];s.push({font:~~r[2],text:r[1].slice(1,-2).replace(/[\\n]/g,"")})}return s},goBack:function(){this.$router.push({name:"list"})},goItem:function(){var t=this.pet,e=t.ItemTabType,a=t.ItemTabIndex,i=Object(h["getLink"])("item","".concat(e,"_").concat(a));window.open(i,"_blank")},getPetLucky:function(){var t=this;Object(c["b"])().then((function(e){var a=e.data.std,i=new Date,s=i.getMonth()+1+""+i.getDate();t.luckyList=a[s]}))},getLink:h["getLink"],getPetMedal:function(){var t=this,e=new Set;this.medalList.forEach((function(t){for(var a in t.pets=[],t)a.includes("PetIndex")&&t[a]&&(t.pets=[].concat(Object(n["a"])(t.pets),[t[a]]),e.add(t[a]))})),Object(c["c"])({ids:Object(n["a"])(e).join(","),client:this.client}).then((function(e){var a=e.data.list;t.medalList.map((function(e){var i=a.filter((function(t){return e.pets.includes(t.Index)}));return t.$set(e,"petList",i),e}))}))}},filters:{iconLink:h["iconLink"],cleanResourceText:function(t){return t&&t.startsWith("获取线索：")?t.replace("获取线索：",""):t}},created:function(){this.getPetLucky()},mounted:function(){this.getPetInfo()}},j=L,O=(a("3ac3"),Object(d["a"])(j,i,s,!1,null,null,null));e["default"]=O.exports},c607:function(t,e,a){var i=a("da84"),s=a("83ab"),n=a("fce3"),c=a("c6b6"),r=a("9bf2").f,o=a("69f3").get,l=RegExp.prototype,u=i.TypeError;s&&n&&r(l,"dotAll",{configurable:!0,get:function(){if(this!==l){if("RegExp"===c(this))return!!o(this).dotAll;throw u("Incompatible receiver, RegExp required")}}})},c98d:function(t,e,a){},ea20:function(t,e,a){},ffe5:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6aa874ec.3782a9d1.js.map