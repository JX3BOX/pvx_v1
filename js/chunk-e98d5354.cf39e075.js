(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e98d5354"],{"03ba":function(t,e,i){"use strict";i("4385")},"06c5":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("fb6a"),i("d3b7"),i("b0c0"),i("a630"),i("3ca3"),i("ac1f"),i("00b4");var a=i("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(a["a"])(t,e):void 0}}},"086e":function(t,e,i){"use strict";i("2c37")},"1baa":function(t,e,i){},"2c37":function(t,e,i){},3263:function(t,e,i){"use strict";i("666c")},"33ef":function(t,e,i){},3835:function(t,e,i){"use strict";function a(t){if(Array.isArray(t))return t}i.d(e,"a",(function(){return c}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("14d9");function n(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var a,n,r,s,c=[],o=!0,l=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;o=!1}else for(;!(o=(a=r.call(i)).done)&&(c.push(a.value),c.length!==e);o=!0);}catch(u){l=!0,n=u}finally{try{if(!o&&null!=i["return"]&&(s=i["return"](),Object(s)!==s))return}finally{if(l)throw n}}return c}}var r=i("06c5");i("d9e2");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return a(t)||n(t,e)||Object(r["a"])(t,e)||s()}},4385:function(t,e,i){},"51eb":function(t,e,i){"use strict";var a=i("825a"),n=i("485a"),r=TypeError;t.exports=function(t){if(a(this),"string"===t||"default"===t)t="string";else if("number"!==t)throw r("Incorrect hint");return n(this,t)}},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("b64b"),i("a4d3"),i("4de4"),i("d3b7"),i("e439"),i("14d9"),i("159b"),i("dbb4");var a=i("ade3");function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"666c":function(t,e,i){},"6b75":function(t,e,i){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}i.d(e,"a",(function(){return a}))},"6e48":function(t,e,i){"use strict";i("1baa")},8172:function(t,e,i){var a=i("e065"),n=i("57b9");a("toPrimitive"),n()},a630:function(t,e,i){var a=i("23e7"),n=i("4df4"),r=i("1c7e"),s=!r((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:s},{from:n})},ade3:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var a=i("53ca");i("8172"),i("efec"),i("a4d3"),i("e01a"),i("d3b7"),i("d9e2"),i("a9e3");function n(t,e){if("object"!==Object(a["a"])(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!==Object(a["a"])(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function r(t){var e=n(t,"string");return"symbol"===Object(a["a"])(e)?e:String(e)}function s(t,e,i){return e=r(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},adf6:function(t,e,i){},b64b:function(t,e,i){var a=i("23e7"),n=i("7b0b"),r=i("df75"),s=i("d039"),c=s((function(){r(1)}));a({target:"Object",stat:!0,forced:c},{keys:function(t){return r(n(t))}})},c740:function(t,e,i){"use strict";var a=i("23e7"),n=i("b727").findIndex,r=i("44d2"),s="findIndex",c=!0;s in[]&&Array(1)[s]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r(s)},d97d:function(t,e,i){"use strict";i("33ef")},dbb4:function(t,e,i){var a=i("23e7"),n=i("83ab"),r=i("56ef"),s=i("fc6a"),c=i("06cf"),o=i("8418");a({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,i,a=s(t),n=c.f,l=r(a),u={},d=0;while(l.length>d)i=n(a,e=l[d++]),void 0!==i&&o(u,e,i);return u}})},de80:function(t,e,i){"use strict";i("adf6")},e439:function(t,e,i){var a=i("23e7"),n=i("d039"),r=i("fc6a"),s=i("06cf").f,c=i("83ab"),o=!c||n((function(){s(1)}));a({target:"Object",stat:!0,forced:o,sham:!c},{getOwnPropertyDescriptor:function(t,e){return s(r(t),e)}})},ee74:function(t,e,i){"use strict";i.r(e);i("7db0"),i("d3b7"),i("ac1f"),i("841c"),i("b0c0");var a=function(){var t=this,e=t._self._c;return e("div",{ref:"listRef",staticClass:"horse-list-wrapper"},[e("PvxSearch",{attrs:{items:t.searchProps,initValue:t.initValue},on:{search:function(e){return t.searchEvent(e)}}}),e("div",{staticClass:"horse-list-content"},[e("div",{staticClass:"horse-title-wrap"},[e("h2",[t._v(" "+t._s(t.searchProps[0].options.find((function(e){return e.type===t.search.type}))?t.searchProps[0].options.find((function(e){return e.type===t.search.type})).name:"全部")+" ")]),t.showSwitch?e("div",{staticClass:"operate-wrap"},[e("el-tooltip",{staticClass:"theme-tooltips",attrs:{content:"card"===t.listType?"卡片模式":"列表模式",placement:"top"}},[e("el-switch",{attrs:{"active-value":"card","inactive-value":"list","active-icon-class":"el-icon-menu","inactive-icon-class":"el-icon-s-order","active-color":"#d16400"},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}})],1)],1):t._e()]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"horse-list",class:[t.listType+"-wrap"]},["card"===t.listType?e("div",{staticClass:"list-content"},[t._l(t.list,(function(t){return e("HorseCard",{key:t.ID,attrs:{item:t}})})),e("el-button",{staticClass:"more-btn",attrs:{disabled:!t.hasNextPage,loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.loadData}},[t._v(t._s(t.hasNextPage?"加载更多":"没有更多了"))])],2):t._e(),"list"===t.listType?e("div",{staticClass:"list-content"},[e("ListHead"),t._l(t.list,(function(t){return e("HorseItem",{key:t.ID,attrs:{item:t}})})),e("pagination",{directives:[{name:"show",rawName:"v-show",value:t.totalPages>0,expression:"totalPages > 0"}],attrs:{total:t.total,page:t.query.page,limit:t.query.pageSize},on:{"update:page":function(e){return t.$set(t.query,"page",e)},"update:limit":function(e){return t.$set(t.query,"pageSize",e)},pagination:function(e){return t.findList(!1)}}})],2):t._e()])])],1)},n=[],r=i("c7eb"),s=i("1da1"),c=(i("99af"),i("d81d"),i("4de4"),i("25f0"),i("fb6a"),i("159b"),i("c740"),i("14d9"),i("65c2")),o=i("41cb"),l=(i("bc3a"),Object(o["e"])());function u(t){return l.get("/horses",{params:t})}function d(t){return l.get("/horse/attrs",{params:t})}function f(t){return l.get("/horse/feeds ",{params:t})}var p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-card hvr-ripple-out",class:t.getColorByQuality(t.item.Quality)+"-color"},[t.item.ImgPath?e("img",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item.ImgPath)}}):e("div",{staticClass:"u-image"}),e("div",{staticClass:"u-name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"u-desc"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"u-desc"},[t._v("类型: "+t._s(t.getType(t.item)))]),e("div",{staticClass:"u-desc"},[t._v("等级: "+t._s(t.item.Level))]),15===t.item.SubType?e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.MoveSpeedDesc))]):t._e()])},m=[],h=(i("466d"),i("5319"),{props:{item:{type:Object,required:!0}},inject:["__imgRoot"],data:function(){return{}},computed:{client:function(){return this.$store.state.client}},methods:{getImgSrc:function(t){if(t){var e=t.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),i=e[1].replace(/\\/g,"/");return"default"==e[1]?this.__imgRoot+"homeland/".concat(this.client)+"/default/default.png":this.__imgRoot+"homeland/".concat(this.client)+i+".png"}},getType:function(t){var e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e},getColorByQuality:function(t){var e="white";if(t)switch(t){case 1:e="white";break;case 2:e="green";break;case 3:e="blue";break;case 4:e="purple";break;case 5:e="orange";break}return e}}}),v=h,y=(i("d97d"),i("2877")),b=Object(y["a"])(v,p,m,!1,null,null,null),g=b.exports,_=function(t,e){return e._m(0)},w=[function(t,e){return t("div",{staticClass:"m-list-head"},[t("div",[e._v("名称")]),t("div",[e._v("类型")]),t("div",[e._v("骑乘")]),t("div",[e._v("品质等级")]),t("div",[e._v("跑速")]),t("div",[e._v("喂食饲料")]),t("div",[e._v("获取方式")]),t("div",[e._v("属性")])])}],O={name:"ListHead"},k=O,j=(i("03ba"),Object(y["a"])(k,_,w,!0,null,null,null)),C=j.exports,x=(i("a9e3"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-item",on:{click:function(e){return t.go(t.item.idKey)}}},[e("div",{staticClass:"u-name"},[e("item-icon",{attrs:{item_id:String(t.item.ItemID),size:36,vertical:!0}})],1),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.typeName))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.modeName))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.Level))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.speed))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.feedName))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.GetType))]),e("div",{staticClass:"u-attr-wrap"},t._l(t.item.MagicAttributes||[],(function(i,a){return e("div",{key:a,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0)])}),P=[],D=function(){var t=this,e=t._self._c;return e("el-popover",{staticClass:"u-item",attrs:{placement:"right-start",trigger:"hover","visible-arrow":!1,"popper-class":"u-item__popup"}},[e("template",{slot:"reference"},[e("div",{staticClass:"u-item__warpper",class:{background:!t.onlyIcon,is_vertical:t.vertical}},[t.onlyName?t._e():e("a",{staticClass:"u-item-icon",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{target:"_blank",href:t.getLink("item",t.source.id)}},[e("img",{staticClass:"u-item-icon__img",style:"height:".concat(t.size,"px; width:").concat(t.size,"px"),attrs:{src:t.iconLink(t.source.IconID)}}),e("div",{staticClass:"u-item-icon__quality",style:{backgroundImage:t.item_border(t.source),opacity:5==t.source.Quality?.9:1}}),e("div",{staticClass:"u-item-icon__quest",style:{backgroundImage:t.item_border_quest(t.source)}}),1!==t.display_amount?e("span",{staticClass:"u-item-icon__count"},[t._v(t._s(t.display_amount))]):t._e()]),t.onlyIcon?t._e():e("div",{staticClass:"u-item-name",class:"e-jx3-item__q".concat(t.source.Quality)},[t._v(" "+t._s(t.source.Name)+" ")])])]),e("jx3-item",{attrs:{item:t.source}})],2)},S=[],T=(i("b64b"),i("e9c4"),i("c7fa")),I=i("4ae4"),L=i("85e4"),A={name:"ItemIcon",data:function(){return{source:{},real_id:null,maybeBook:!1}},components:{"jx3-item":T["a"]},props:{size:{type:Number,default:28},item_id:{type:String,default:null},amount:{type:Number,default:1},onlyName:{type:Boolean,default:!1},onlyIcon:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1}},methods:{get_data:function(t){var e=this;t&&Object(I["a"])(t,this.client).then((function(t){var i=t.data,a=i.data.item;Object.keys(a).length&&(e.source=a,sessionStorage.setItem(e.cache_key,JSON.stringify(a)))})).catch((function(t){var i;400==(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.code)&&!1===e.maybeBook&&(e.maybeBook=!0,e.real_id="".concat(e.item_id,"_").concat(e.amount))}))},iconLink:L["iconLink"],getLink:L["getLink"],item_border_quest:function(t){return t.IsQuest>0?"url(".concat(c["__imgPath"],"image/item/renwu.png)"):""},item_border:function(t){switch(t.Quality){case 3:return"url(".concat(c["__imgPath"],"image/item/blue.png)");case 4:return"url(".concat(c["__imgPath"],"image/item/purple.png)");case 5:return"url(".concat(c["__imgPath"],"image/item/orange.gif)");default:return""}}},computed:{client:function(){return this.$store.state.client},cache_key:function(){return"item-".concat(this.client,"-").concat(this.real_id)},display_amount:function(){return!1===this.maybeBook?this.amount:1}},watch:{real_id:{immediate:!0,handler:function(){var t=sessionStorage.getItem(this.cache_key);if(t)try{this.source=JSON.parse(t)}catch(e){console.log(e,"[Item]无法解析本地缓存"),this.get_data(this.real_id)}else this.get_data(this.real_id)}}},mounted:function(){this.real_id=this.item_id}},M=A,N=(i("3263"),Object(y["a"])(M,D,S,!1,null,null,null)),q=N.exports,B={name:"HorseItem",components:{ItemIcon:q},props:{item:{type:Object,required:!0}},methods:{go:function(t){}},computed:{client:function(){return this.$store.state.client}}},$=B,z=(i("086e"),Object(y["a"])($,x,P,!1,null,null,null)),E=z.exports,H=i("ade3"),V=function(){var t=this,e=t._self._c;return e("div",{staticClass:"pvx-search-wrapper"},[e("div",{staticClass:"search-group animate__animated animate__fadeInDown"},t._l(t.items,(function(i){var a;return e("div",{key:i.key,staticClass:"search-item",class:{"type-list":"radio"===i.type,"filter-wrap":"filter"===i.type,"input-wrap":!i.type}},["radio"===i.type?[e("el-radio-group",{model:{value:t.formData[i.key],callback:function(e){t.$set(t.formData,i.key,e)},expression:"formData[item.key]"}},t._l(i.options,(function(a){return e("el-radio-button",{key:a.type,staticClass:"type-item",class:{active:a.type===t.formData[i.type]},attrs:{label:a.type}},[t._v(t._s(a.name))])})),1)]:t._e(),"filter"===i.type?[e("el-popover",{attrs:{placement:t.isPhone()?"right":"bottom",width:"280",trigger:"click"},model:{value:t.filterValue,callback:function(e){t.filterValue=e},expression:"filterValue"}},[e("div",{staticClass:"filter-content"},t._l(i.options,(function(i){return e("div",{key:i.key,staticClass:"filter-item"},[e("el-select",{staticStyle:{width:"100%"},attrs:{id:i.remote,multiple:i.multiple,"collapse-tags":i.multiple,clearable:"",filterable:i.filterable,placeholder:"请".concat(i.remote?"输入":"选择").concat(i.name),remote:Boolean(i.remote),"remote-method":t.remoteMethod,loading:t.selectLoading===i.remote,"default-first-option":!0},on:{focus:t.selectFocus},model:{value:t.formData[i.key],callback:function(e){t.$set(t.formData,i.key,e)},expression:"formData[fItem.key]"}},t._l((i.remote,i.options),(function(t){return e("el-option",{key:t.value,attrs:{label:i.showValue?t.label+"("+t.value+")":t.label,value:t.value}})})),1)],1)})),0),e("div",{staticClass:"filter-img",class:t.filterValue&&"active",attrs:{slot:"reference"},slot:"reference"},[e("svg",{attrs:(a={width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg","svg-inline":""},Object(H["a"])(a,"fill","#949494"),Object(H["a"])(a,"role","presentation"),Object(H["a"])(a,"focusable","false"),Object(H["a"])(a,"tabindex","-1"),a)},[e("rect",{attrs:{width:"40",height:"40",rx:"20",fill:"transparent"}}),e("path",{attrs:{d:"M12.25 13.61C14.27 16.2 18 21 18 21v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39a.998.998 0 00-.79-1.61H13.04c-.83 0-1.3.95-.79 1.61z",fill:"tranparent"}})])])])]:t._e(),i.type?t._e():[e("el-input",{staticClass:"search-input",attrs:{placeholder:"输入".concat(i.name,"搜索"),clearable:"","suffix-icon":"el-icon-search"},model:{value:t.formData[i.key],callback:function(e){t.$set(t.formData,i.key,e)},expression:"formData[item.key]"}})]],2)})),0)])},Q=[],F=i("5530");i("caad");function J(t){if("[object Object]"===Object.prototype.toString.call(t)){for(var e in t)[void 0,null,""].includes(t[e])&&delete t[e];return t}return t}function R(){var t=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);return null!==t}var U={name:"HorseSearch",props:{items:{type:Array,required:!0},initValue:{type:Object,default:function(){}}},data:function(){return{filterValue:!1,formData:{},currentMethod:"",currentOptions:[],selectLoading:""}},watch:{formData:{deep:!0,handler:function(t){this.$emit("search",t)}},initValue:{immediate:!0,deep:!0,handler:function(t){var e=this.items,i={};e.forEach((function(t){if("filter"!==t.type)i[t.key]="";else{var e=t.options;e.forEach((function(t){i[t.key]=""}))}})),this.formData=Object(F["a"])(Object(F["a"])({},i),t)}}},methods:{isPhone:R,selectFocus:function(t){this.currentMethod=t.target.id},remoteMethod:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function i(){var a;return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=e.currentMethod,e.selectLoading=a,i.next=4,e.$parent[a]({name:t}).then((function(){e.selectLoading=""}));case 4:case"end":return i.stop()}}),i)})))()}}},W=U,G=(i("6e48"),Object(y["a"])(W,V,Q,!1,null,null,null)),K=G.exports,X={name:"HorseList",props:[],components:{ListHead:C,HorseItem:E,HorseCard:g,PvxSearch:K},data:function(){return{loading:!1,listType:"card",showSwitch:!0,feeds:[],list:[],query:{page:1,pageSize:20,client:this.client},total:0,totalPages:0,search:{},initValue:{type:""},searchProps:[{key:"type",name:"类型",type:"radio",options:[{type:"",name:"全部"},{type:0,name:"普通坐骑"},{type:1,name:"奇趣坐骑"},{type:2,name:"马具"}]},{type:"filter",key:"filter",name:"过滤",options:[{key:"feed",type:"select",name:"喂养方式",multiple:!0,options:[]},{key:"attr",type:"select",name:"属性",filterable:!0,remote:"getAttrList"}]},{key:"keyword",name:"名称"}]}},computed:{hasNextPage:function(){return this.totalPages>1&&this.query.page<this.totalPages},client:function(){return this.$store.state.client}},watch:{listType:{handler:function(t){this.query.page=1,"card"===t?(this.showCount(),this.findList()):(this.query.pageSize=20,this.findList())}},search:{deep:!0,handler:function(){this.query.page=1,this.findList()}}},methods:{getAttrList:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function i(){return Object(r["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,d().then((function(i){var a=i.data.concat([{name:"双骑"},{name:"渡水"}]),n=a.filter((function(e){return e.name.indexOf(t.name)>-1})).map((function(t){return{label:t.name,value:t.name}}));e.searchProps[1].options[1].options=n}));case 2:case"end":return i.stop()}}),i)})))()},iconLink:L["iconLink"],getFeed:function(t){var e="";return 15===t.SubType&&(e=this.feeds.find((function(e){return e.id===t.DetailType}))?this.feeds.find((function(e){return e.id===t.DetailType})).feed:""),e},canDouble:function(t){var e="";return 15===t.SubType&&t.MagicAttributes&&t.MagicAttributes.length&&(e=t.MagicAttributes.find((function(t){return"15650"===t.id}))?t.MagicAttributes.find((function(t){return"15650"===t.id})).name:"单骑"),e},getType:function(t){var e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e},isPhone:R,searchEvent:function(t){this.search=t},loadData:function(){this.query.page++,this.findList(!0)},findList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var i=Object.assign({},this.search);for(var a in i)Array.isArray(i[a])&&(i[a]=i[a].toString());var n=Object.assign({},this.query),r=Object.assign(i,n);u(J(r)).then((function(i){var a=i.data.list.map((function(e){return e.typeName=t.getType(e),e.modeName=t.canDouble(e),e.feedName=t.getFeed(e),e.MoveSpeed&&(e.speed=e.MoveSpeedDesc.split("移动速度提高")[1]),e.MagicAttributes&&e.MagicAttributes.length&&e.MagicAttributes.map((function(e){return e.iconUrl=t.iconLink(e.icon),e})),e}));t.list=e?t.list.concat(a):a,t.total=i.data.total,t.totalPages=i.data.pages})).finally((function(){t.loading=!1}))},getFeedList:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f().then((function(e){var i=e.data.map((function(t){var e=t.tip.indexOf("【"),i=t.tip.indexOf("】")+1;return t.feed=t.tip.slice(e,i),t})),a=[];i.forEach((function(t){var e=a.findIndex((function(e){return e.feed===t.feed}));e>-1?a[e].id+=","+t.id:a.push(t)}));var n=a.map((function(t){return{label:t.feed,value:t.id}}));t.searchProps[1].options[0].options=n}));case 2:case"end":return e.stop()}}),e)})))()},showCount:function(){var t=this;this.$nextTick((function(){var e,i=null===(e=t.$refs.listRef)||void 0===e?void 0:e.clientWidth;t.query.pageSize=4*Math.floor(i/220)}))},jdugeType:function(){var t=this;setTimeout((function(){t.showSwitch=!t.isPhone(),t.isPhone()&&(t.listType="card")}),10)}},mounted:function(){var t=this;this.jdugeType();var e=this;window.onresize=function(){e.jdugeType()},this.getFeedList().then((function(){"card"===t.listType&&t.showCount()}))}},Y=X,Z=(i("de80"),Object(y["a"])(Y,a,n,!1,null,null,null));e["default"]=Z.exports},efec:function(t,e,i){var a=i("1a2d"),n=i("cb2d"),r=i("51eb"),s=i("b622"),c=s("toPrimitive"),o=Date.prototype;a(o,c)||n(o,c,r)}}]);
//# sourceMappingURL=chunk-e98d5354.cf39e075.js.map