{"version":3,"sources":["webpack:///./src/views/exam/Question.vue?48d0","webpack:///./src/views/exam/Question.vue","webpack:///src/views/exam/Question.vue","webpack:///./src/views/exam/Question.vue?0e38","webpack:///./src/views/exam/Question.vue?8890"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","on","goBack","_v","data","id","canManage","attrs","editLink","_e","answer","isSubmitted","finalAnswer","class","submit","title","user_id","client","staticRenderFns","props","components","SingleCard","Comment","userAnswers","computed","$route","params","createUserId","User","isEditor","getInfo","uid","watch","methods","type","concat","loadData","_this","getQuestion","then","res","tags","JSON","parse","options","postStat","finally","val","_objectSpread","_this2","isLogin","$message","error","stringify","$alert","submitList","obj","key","map","o","submitQuestionAnswer","document","documentElement","scrollTop","question","answerList","sort","myAnswer","$router","push","filters","created","component"],"mappings":"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","file":"js/chunk-9099b886.620079ea.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Question.vue?vue&type=style&index=0&id=99dc2984&prod&lang=less\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"v-question-single m-single-wrapper\"},[_c('div',{staticClass:\"back-wrap\"},[_c('el-button',{on:{\"click\":_vm.goBack}},[_vm._v(\"返回列表\")]),(_vm.data.id && _vm.canManage)?_c('a',{staticClass:\"u-edit\",attrs:{\"href\":_vm.editLink('question', _vm.data.id)}},[_c('i',{staticClass:\"el-icon-edit-outline\"}),_c('span',[_vm._v(\"编辑\")])]):_vm._e()],1),_c('SingleCard',{attrs:{\"fromQuestion\":true,\"item\":_vm.data,\"answer\":_vm.answer,\"isSubmitted\":_vm.isSubmitted},on:{\"changeVal\":_vm.finalAnswer}}),_c('div',{staticClass:\"m-exam-submit\",class:{ isSubmitted: _vm.isSubmitted },on:{\"click\":_vm.submit}},[_c('el-button',{staticClass:\"u-btn\",attrs:{\"disabled\":_vm.isSubmitted}},[_vm._v(\"提交\")])],1),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":\"question\",\"postTitle\":_vm.title,\"userId\":_vm.user_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true,\"client\":_vm.client}}),_c('div',{staticClass:\"m-single-comment\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"评论\")]),_c('Comment',{attrs:{\"id\":_vm.id,\"category\":\"question\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"v-question-single m-single-wrapper\" v-loading=\"loading\">\n        <div class=\"back-wrap\">\n            <el-button @click=\"goBack\">返回列表</el-button>\n            <a v-if=\"data.id && canManage\" class=\"u-edit\" :href=\"editLink('question', data.id)\">\n                <i class=\"el-icon-edit-outline\"></i><span>编辑</span>\n            </a>\n        </div> \n        <!-- <SingleTitle :item=\"data\" type=\"question\" /> -->\n        <SingleCard\n            :fromQuestion=\"true\"\n            :item=\"data\"\n            :answer=\"answer\"\n            :isSubmitted=\"isSubmitted\"\n            @changeVal=\"finalAnswer\"\n        />\n        <div class=\"m-exam-submit\" @click=\"submit\" :class=\"{ isSubmitted }\">\n            <el-button class=\"u-btn\" :disabled=\"isSubmitted\">提交</el-button>\n        </div>\n\n        <Thx\n            class=\"m-thx\"\n            :postId=\"id\"\n            postType=\"question\"\n            :postTitle=\"title\"\n            :userId=\"user_id\"\n            :adminBoxcoinEnable=\"true\"\n            :userBoxcoinEnable=\"true\"\n            :client=\"client\"\n        />\n        <div class=\"m-single-comment\">\n            <el-divider content-position=\"left\">评论</el-divider>\n            <Comment :id=\"id\" category=\"question\" />\n        </div>\n    </div>\n</template>\n<script>\nimport SingleCard from \"@/components/exam/single_card\";\n// import SingleTitle from \"@/components/exam/single_title\";\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport { postStat } from \"@jx3box/jx3box-common/js/stat.js\";\nimport { getQuestion, submitQuestionAnswer } from \"@/service/exam.js\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nexport default {\n    name: \"QuestionSingle\",\n    props: [],\n    components: {\n        // SingleTitle,\n        SingleCard,\n        Comment,\n    },\n    data: function () {\n        return {\n            data: {},\n            answer: \"\",\n            userAnswers: {},\n            isSubmitted: false,\n            loading: false,\n        };\n    },\n    computed: {\n        id() {\n            return ~~this.$route.params.id;\n        },\n        user_id() {\n            return this.data.createUserId;\n        },\n        title: function () {\n            return this.data.title;\n        },\n        client() {\n            return this.data.client || \"all\";\n        },\n        canManage: function () {\n            return User.isEditor() || User.getInfo().uid == this.data.createUserId;\n        },\n    },\n    watch: {},\n    methods: {\n        editLink(type, id) {\n            // return `/exam/${type}Publish/${id}`;\n            return `/publish/#/${type}/${id}`;\n        },\n        loadData() {\n            this.loading = true;\n            getQuestion(this.id)\n                .then((res) => {\n                    let data = res.data;\n                    data.tags = JSON.parse(data.tags);\n                    data.options = JSON.parse(data.options);\n                    this.data = data;\n\n                    postStat(\"question\", this.id);\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        finalAnswer(val) {\n            this.userAnswers = {\n                ...this.userAnswers,\n                ...val,\n            };\n        },\n        submit() {\n            if (!User.isLogin()) return this.$message.error(\"请先登录\");\n            if (JSON.stringify(this.userAnswers) == \"{}\") {\n                this.$alert(\"你没有选择答案哦~\", \"提交失败\", {\n                    type: \"error\",\n                });\n            } else {\n                let submitList = {};\n                let obj = this.userAnswers;\n                for (const key in obj) {\n                    submitList = obj[key].map((o) => this.data.options[o]);\n                }\n                submitQuestionAnswer(this.id, submitList).then((res) => {\n                    if (res.data) {\n                        document.documentElement.scrollTop = 0;\n                        res.data.question.answerList = res.data.question.answerList.sort();\n                        this.answer = {\n                            ...res.data.question,\n                            myAnswer: this.userAnswers[this.id].sort(),\n                        };\n                        this.isSubmitted = true;\n                    }\n                });\n            }\n        },\n        goBack: function () {\n            this.$router.push({ name: \"index\", params: { type: 2 } });\n        },\n    },\n    filters: {},\n    created: function () {\n        this.loadData();\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/common/back.less\";\n@import \"~@/assets/css/exam/exam.less\";\n@import \"~@/assets/css/exam/single_card.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Question.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Question.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Question.vue?vue&type=template&id=99dc2984\"\nimport script from \"./Question.vue?vue&type=script&lang=js\"\nexport * from \"./Question.vue?vue&type=script&lang=js\"\nimport style0 from \"./Question.vue?vue&type=style&index=0&id=99dc2984&prod&lang=less\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}