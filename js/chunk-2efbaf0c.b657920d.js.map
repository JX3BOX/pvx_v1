{"version":3,"sources":["webpack:///./src/views/adventure/AdventureSingle.vue?6feb","webpack:///./src/components/adventure/task.vue?082f","webpack:///src/components/adventure/task.vue","webpack:///./src/components/adventure/task.vue?d110","webpack:///./src/components/adventure/task.vue","webpack:///./src/components/common/serendipity.vue?08cb","webpack:///./src/service/serendipity.js","webpack:///./src/utils/moment.js","webpack:///src/components/common/serendipity.vue","webpack:///./src/components/common/serendipity.vue?813b","webpack:///./src/components/common/serendipity.vue","webpack:///src/views/adventure/AdventureSingle.vue","webpack:///./src/views/adventure/AdventureSingle.vue?6b2d","webpack:///./src/views/adventure/AdventureSingle.vue","webpack:///./src/service/adventure.js","webpack:///./src/components/common/serendipity.vue?d984","webpack:///./src/views/adventure/AdventureSingle.vue?eb62"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","on","goBack","_v","getLink","achieve_id","_s","title","id","type","_e","staticRenderFns","_l","item","i","key","style","imgStyle","task","props","inject","components","data","computed","client","methods","imgNameTga","backgroundImage","loadData","getAdventureTask","res","list","filters","created","mounted","component","changeServer","model","callback","$$v","server","length","_m","_f","date_str","dwTime","gegion","getUserInfo","$cms","get","getSerendipity","params","__pull","axios","baseURL","showRecently","val","moment","fromNow","showDate","format","locale","months","split","monthsShort","weekdays","weekdaysShort","weekdaysMin","longDateFormat","LT","LTS","L","LL","LLL","LLLL","l","ll","lll","llll","meridiemParse","meridiemHour","hour","meridiem","minute","isLower","hm","calendar","sameDay","nextDay","nextWeek","lastDay","lastWeek","sameElse","dayOfMonthOrdinalParse","ordinal","number","period","relativeTime","future","past","s","ss","m","mm","h","hh","d","dd","M","MM","y","yy","week","dow","doy","servers","loading","serendipity","start","pageIndex","pageSize","loadSerendipity","then","finally","wikiDate","Wiki","Serendipity","Comment","isPet","watch","immediate","handler","getData","getAdventure","postStat","getSerendipityAchievementIds","getAdventures","$node","__dataPath"],"mappings":"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","file":"js/chunk-2efbaf0c.b657920d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.id)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"v-adventure-single\"},[_c('div',{staticClass:\"m-adventure-navigation\"},[_c('el-button',{staticClass:\"u-goback\",attrs:{\"size\":\"medium\",\"icon\":\"el-icon-arrow-left\",\"plain\":\"\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返回列表\")]),_c('div',{staticClass:\"m-trigger-links\"},[_c('a',{staticClass:\"u-link u-achievement\",attrs:{\"href\":_vm.getLink('cj', _vm.achieve_id),\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-trophy\"}),_vm._v(\" 成就信息 \")])])],1),_c('h1',{staticClass:\"m-adventure-title\"},[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"m-adventure-content\"},[_c('task',{attrs:{\"id\":_vm.id}})],1),(_vm.achieve_id)?_c('div',{staticClass:\"m-adventure-wiki\"},[_c('Wiki',{attrs:{\"source_type\":\"achievement\",\"source_id\":_vm.achieve_id,\"type\":_vm.type,\"id\":_vm.id,\"title\":\"奇遇攻略\"}})],1):_vm._e(),_c('div',{staticClass:\"m-adventure-serendipity\"},[_c('Serendipity',{attrs:{\"title\":_vm.title}})],1),_c('div',{staticClass:\"m-pvx-comment\"},[_c('Comment',{attrs:{\"id\":_vm.id,\"category\":_vm.type,\"order\":\"desc\"}})],1)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.task)?_c('div',{staticClass:\"m-adventure-task\"},[_c('el-carousel',{staticClass:\"u-carousel\",attrs:{\"autoplay\":false,\"type\":\"card\"}},_vm._l((_vm.task),function(item,i){return _c('el-carousel-item',{key:i},[_c('span',{staticClass:\"u-img\",style:(_vm.imgStyle(item))})])}),1),_c('span',{staticClass:\"u-name\"},[_vm._v(_vm._s(_vm.task.name))])],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"m-adventure-task\" v-if=\"task\">\n\t\t<el-carousel class=\"u-carousel\" :autoplay=\"false\" type=\"card\">\n\t\t\t<el-carousel-item v-for=\"(item, i) in task\" :key=\"i\">\n\t\t\t\t<span class=\"u-img\" :style=\"imgStyle(item)\"></span>\n\t\t\t</el-carousel-item>\n\t\t</el-carousel>\n\t\t<span class=\"u-name\">{{ task.name }}</span>\n\t</div>\n</template>\n\n<script>\nimport { getAdventureTask } from \"@/service/adventure\";\nexport default {\n\tname: \"task\",\n\tprops: [\"id\"],\n\tinject: [\"__imgRoot\"],\n\tcomponents: {},\n\tdata: function () {\n\t\treturn {\n\t\t\ttask: \"\",\n\t\t};\n\t},\n\tcomputed: {\n\t\tclient: function () {\n\t\t\treturn this.$store.state.client;\n\t\t},\n\t},\n\tmethods: {\n\t\timgNameTga: function (link) {\n\t\t\treturn link.match(/(\\S*)Adventure\\/(\\S*)\\.tga/)[2];\n\t\t},\n\t\timgStyle: function (link) {\n\t\t\treturn {\n\t\t\t\tbackgroundImage: \"url(\" + this.__imgRoot + `adventure/${this.client}/` + link + \".png)\",\n\t\t\t};\n\t\t},\n\t\tloadData() {\n\t\t\tgetAdventureTask(this.id).then((res) => {\n\t\t\t\tlet list = [];\n\t\t\t\tres.data.forEach((e) => {\n\t\t\t\t\tif (e.szFramePath) {\n\t\t\t\t\t\tlet k = e.szFramePath?.replace(/\\\\/g, \"/\");\n\t\t\t\t\t\tlist.push(this.imgNameTga(k));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.task = [...new Set(list)];\n\t\t\t});\n\t\t},\n\t},\n\tfilters: {},\n\tcreated: function () {},\n\tmounted: function () {\n\t\tthis.loadData();\n\t},\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./task.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./task.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./task.vue?vue&type=template&id=7212f085&\"\nimport script from \"./task.vue?vue&type=script&lang=js&\"\nexport * from \"./task.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.title)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"m-serendipity\"},[_c('div',{staticClass:\"u-title\"},[_c('span',{staticClass:\"u-label\"},[_c('i',{staticClass:\"el-icon-present\"}),_vm._v(\" 触发记录 \"),_c('el-select',{staticClass:\"u-server\",attrs:{\"placeholder\":\"区服\",\"size\":\"small\"},on:{\"change\":_vm.changeServer},model:{value:(_vm.server),callback:function ($$v) {_vm.server=$$v},expression:\"server\"}},_vm._l((_vm.servers),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('a',{staticClass:\"u-more\",attrs:{\"href\":\"https://j3cx.com/serendipity\",\"target\":\"_blank\"}},[_vm._v(\"查看更多 »\")])]),(_vm.list && _vm.list.length > 0)?_c('ul',{staticClass:\"u-list\"},[_vm._m(0),_vm._l((_vm.list),function(item,i){return _c('li',{key:i},[_c('span',{staticClass:\"u-date\"},[_vm._v(_vm._s(_vm._f(\"showDate\")(item.date_str)))]),_c('span',{staticClass:\"u-time\"},[_vm._v(_vm._s(_vm._f(\"wikiDate\")(item.dwTime)))]),_c('span',{staticClass:\"u-server\"},[_vm._v(_vm._s(item.gegion)+\"-\"+_vm._s(item.server))]),_c('span',{staticClass:\"u-name\"},[_vm._v(_vm._s(item.name || \"匿名\"))])])})],2):_c('el-alert',{staticClass:\"u-alert\",attrs:{\"title\":\"无记录\",\"type\":\"info\",\"center\":\"\",\"closable\":false}})],1):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('li',{staticClass:\"u-header\"},[_c('span',{staticClass:\"u-date\"},[_vm._v(\"日期\")]),_c('span',{staticClass:\"u-time\"},[_vm._v(\"激活时间\")]),_c('span',{staticClass:\"u-server\"},[_vm._v(\"服务器\")]),_c('span',{staticClass:\"u-name\"},[_vm._v(\"玩家\")])])}]\n\nexport { render, staticRenderFns }","import { $cms, $next, axios } from \"@jx3box/jx3box-common/js/https\";\n\nfunction getUserInfo() {\n    return $cms().get(\"/api/cms/user/my/info\");\n}\n\nfunction getSerendipity(params) {\n    const __pull = \"https://pull.j3cx.com/\";\n    return axios.get(\"/api/serendipity\", {\n        baseURL: process.env.NODE_ENV === \"production\" ? __pull : \"/\",\n        params,\n    });\n}\n\nexport { getUserInfo, getSerendipity };\n","import moment, { fn } from \"moment\";\nmoment.locale(\"zh-cn\", {\n    months: \"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月\".split(\n        \"_\"\n    ),\n    monthsShort: \"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月\".split(\n        \"_\"\n    ),\n    weekdays: \"星期日_星期一_星期二_星期三_星期四_星期五_星期六\".split(\"_\"),\n    weekdaysShort: \"周日_周一_周二_周三_周四_周五_周六\".split(\"_\"),\n    weekdaysMin: \"日_一_二_三_四_五_六\".split(\"_\"),\n    longDateFormat: {\n        LT: \"HH:mm\",\n        LTS: \"HH:mm:ss\",\n        L: \"YYYY-MM-DD\",\n        LL: \"YYYY年MM月DD日\",\n        LLL: \"YYYY年MM月DD日Ah点mm分\",\n        LLLL: \"YYYY年MM月DD日ddddAh点mm分\",\n        l: \"YYYY-M-D\",\n        ll: \"YYYY年M月D日\",\n        lll: \"YYYY年M月D日 HH:mm\",\n        llll: \"YYYY年M月D日dddd HH:mm\",\n    },\n    meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,\n    meridiemHour: function(hour, meridiem) {\n        if (hour === 12) {\n            hour = 0;\n        }\n        if (meridiem === \"凌晨\" || meridiem === \"早上\" || meridiem === \"上午\") {\n            return hour;\n        } else if (meridiem === \"下午\" || meridiem === \"晚上\") {\n            return hour + 12;\n        } else {\n            // '中午'\n            return hour >= 11 ? hour : hour + 12;\n        }\n    },\n    meridiem: function(hour, minute, isLower) {\n        const hm = hour * 100 + minute;\n        if (hm < 600) {\n            return \"凌晨\";\n        } else if (hm < 900) {\n            return \"早上\";\n        } else if (hm < 1130) {\n            return \"上午\";\n        } else if (hm < 1230) {\n            return \"中午\";\n        } else if (hm < 1800) {\n            return \"下午\";\n        } else {\n            return \"晚上\";\n        }\n    },\n    calendar: {\n        sameDay: \"[今天]LT\",\n        nextDay: \"[明天]LT\",\n        nextWeek: \"[下]ddddLT\",\n        lastDay: \"[昨天]LT\",\n        lastWeek: \"[上]ddddLT\",\n        sameElse: \"L\",\n    },\n    dayOfMonthOrdinalParse: /\\d{1,2}(日|月|周)/,\n    ordinal: function(number, period) {\n        switch (period) {\n            case \"d\":\n            case \"D\":\n            case \"DDD\":\n                return number + \"日\";\n            case \"M\":\n                return number + \"月\";\n            case \"w\":\n            case \"W\":\n                return number + \"周\";\n            default:\n                return number;\n        }\n    },\n    relativeTime: {\n        future: \"%s内\",\n        past: \"%s前\",\n        s: \"几秒\",\n        ss: \"%d秒\",\n        m: \"1分钟\",\n        mm: \"%d分钟\",\n        h: \"1小时\",\n        hh: \"%d小时\",\n        d: \"1天\",\n        dd: \"%d天\",\n        M: \"1个月\",\n        MM: \"%d个月\",\n        y: \"1年\",\n        yy: \"%d年\",\n    },\n    week: {\n        // GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效\n        dow: 1, // Monday is the first day of the week.\n        doy: 4, // The week that contains Jan 4th is the first week of the year.\n    },\n});\nfunction showRecently(val) {\n    return moment(val).fromNow();\n}\nfunction showDate(val) {\n    return moment(val).format(\"YYYY-MM-DD\");\n}\n\nfunction showTime(val) {\n    return moment(val).format(\"YYYY-MM-DD HH:mm:ss\");\n}\n\nexport { moment, showRecently, showDate, showTime };\n","<template>\n    <div class=\"m-serendipity\" v-if=\"title\" v-loading=\"loading\">\n        <div class=\"u-title\">\n            <span class=\"u-label\">\n                <i class=\"el-icon-present\"></i>\n                触发记录\n                <el-select v-model=\"server\" placeholder=\"区服\" size=\"small\" class=\"u-server\" @change=\"changeServer\">\n                    <el-option v-for=\"item in servers\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n                </el-select>\n            </span>\n            <a class=\"u-more\" href=\"https://j3cx.com/serendipity\" target=\"_blank\">查看更多 &raquo;</a>\n        </div>\n        <ul class=\"u-list\" v-if=\"list && list.length > 0\">\n            <li class=\"u-header\">\n                <span class=\"u-date\">日期</span>\n                <span class=\"u-time\">激活时间</span>\n                <span class=\"u-server\">服务器</span>\n                <span class=\"u-name\">玩家</span>\n            </li>\n            <li v-for=\"(item, i) in list\" :key=\"i\">\n                <span class=\"u-date\">{{ item.date_str | showDate }}</span>\n                <span class=\"u-time\">{{ item.dwTime | wikiDate }}</span>\n                <span class=\"u-server\">{{ item.gegion }}-{{ item.server }}</span>\n                <span class=\"u-name\">{{ item.name || \"匿名\" }}</span>\n            </li>\n        </ul>\n        <el-alert class=\"u-alert\" v-else title=\"无记录\" type=\"info\" center :closable=\"false\" />\n    </div>\n</template>\n<script>\nimport servers from \"@jx3box/jx3box-data/data/server/server_cn.json\";\nimport { getUserInfo, getSerendipity } from \"@/service/serendipity\";\nimport { showRecently, showDate } from \"@/utils/moment\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nexport default {\n    name: \"serendipity\",\n    props: [\"title\"],\n    components: {},\n    data: function () {\n        return {\n            servers,\n            server: \"长安城\",\n            list: [],\n            loading: false,\n        };\n    },\n    computed: {\n        params: function () {\n            return {\n                server: this.server,\n                serendipity: this.title,\n                start: 0,\n                pageIndex: 1,\n                pageSize: 10,\n            };\n        },\n    },\n    methods: {\n        loadSerendipity() {\n            this.loading = true;\n            getSerendipity(this.params)\n                .then((res) => {\n                    this.list = res.data.data.data;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        changeServer() {\n            this.loadSerendipity();\n        },\n    },\n    filters: {\n        wikiDate: function (val) {\n            return showRecently(val * 1000);\n        },\n        showDate: function (val) {\n            return showDate(val);\n        },\n    },\n    mounted: function () {\n        if (User.isLogin()) {\n            getUserInfo()\n                .then((res) => {\n                    this.server = res.data.data.jx3_server || \"长安城\";\n                })\n                .then(() => {\n                    this.loadSerendipity();\n                });\n        } else {\n            this.loadSerendipity();\n        }\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/common/serendipity.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./serendipity.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./serendipity.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./serendipity.vue?vue&type=template&id=57e8e732&\"\nimport script from \"./serendipity.vue?vue&type=script&lang=js&\"\nexport * from \"./serendipity.vue?vue&type=script&lang=js&\"\nimport style0 from \"./serendipity.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"v-adventure-single\" v-if=\"id\" v-loading=\"loading\">\n        <div class=\"m-adventure-navigation\">\n            <el-button class=\"u-goback\" size=\"medium\" icon=\"el-icon-arrow-left\" @click=\"goBack\" plain>返回列表</el-button>\n            <div class=\"m-trigger-links\">\n                <a class=\"u-link u-achievement\" :href=\"getLink('cj', achieve_id)\" target=\"_blank\">\n                    <i class=\"el-icon-trophy\"></i>\n                    成就信息\n                </a>\n            </div>\n        </div>\n        <h1 class=\"m-adventure-title\">{{ title }}</h1>\n        <div class=\"m-adventure-content\">\n            <task :id=\"id\" />\n        </div>\n        <div class=\"m-adventure-wiki\" v-if=\"achieve_id\">\n            <Wiki source_type=\"achievement\" :source_id=\"achieve_id\" :type=\"type\" :id=\"id\" title=\"奇遇攻略\"></Wiki>\n        </div>\n        <div class=\"m-adventure-serendipity\">\n            <Serendipity :title=\"title\" />\n        </div>\n        <div class=\"m-pvx-comment\">\n            <Comment :id=\"id\" :category=\"type\" order=\"desc\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getLink } from \"@jx3box/jx3box-common/js/utils\";\nimport Wiki from \"@/components/wiki/Wiki.vue\";\nimport { getAdventure, getSerendipityAchievementIds } from \"@/service/adventure\";\nimport task from \"@/components/adventure/task.vue\";\nimport Serendipity from \"@/components/common/serendipity.vue\";\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport { postStat } from \"@jx3box/jx3box-common/js/stat.js\";\nexport default {\n    name: \"adventureSingle\",\n    props: [],\n    components: {\n        Wiki,\n        task,\n        Serendipity,\n        Comment,\n    },\n    data: function () {\n        return {\n            type: \"adventure\",\n            achieve_id: \"\",\n            data: \"\",\n            task: [],\n            isPet: true,\n            loading: false,\n        };\n    },\n    computed: {\n        id: function () {\n            return this.$route.params.id;\n        },\n        title: function () {\n            return this.data?.szName;\n        },\n    },\n    watch: {\n        id: {\n            immediate: true,\n            handler: function (val) {\n                if (val) {\n                    this.getData();\n                }\n            },\n        },\n    },\n    methods: {\n        getLink,\n        goBack() {\n            this.$router.push({ name: \"list\" });\n        },\n        getData() {\n            this.loading = true;\n            getAdventure(this.id)\n                .then((res) => {\n                    this.isPet = false;\n                    this.data = res.data;\n                })\n                .finally(() => {\n                    this.loading = false;\n                    postStat(this.type, this.id);\n                });\n            getSerendipityAchievementIds().then((res) => {\n                this.achieve_id = res.data[this.id];\n            });\n        },\n    },\n    mounted: function () {\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/adventure/single.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./AdventureSingle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./AdventureSingle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdventureSingle.vue?vue&type=template&id=53ff4f76&\"\nimport script from \"./AdventureSingle.vue?vue&type=script&lang=js&\"\nexport * from \"./AdventureSingle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdventureSingle.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { $node, axios, $team } from \"@jx3box/jx3box-common/js/https\";\nimport { __dataPath } from \"@jx3box/jx3box-common/data/jx3box\";\n// 获取奇遇列表\nfunction getAdventures(params) {\n    return $node().get(`/serendipities`, {\n        params,\n    });\n}\n// 获取奇遇详情\nfunction getAdventure(id) {\n    return $node().get(`/serendipity/${id}`);\n}\n// 获取奇遇任务链\n\nfunction getAdventureTask(id) {\n    return $node().get(`/serendipity/${id}/task`);\n}\n\nfunction getSerendipityAchievementIds() {\n    return axios.get(`${__dataPath}pvx/serendipity/output/serendipity.json`);\n}\nfunction getUserSchool() {\n    return $team().get(\"api/team/my-game-roles\");\n}\n\nexport { getAdventures, getAdventure, getAdventureTask, getSerendipityAchievementIds, getUserSchool };\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./serendipity.vue?vue&type=style&index=0&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./AdventureSingle.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}