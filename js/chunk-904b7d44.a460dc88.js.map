{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./src/views/face/Parse.vue","webpack:///src/views/face/Parse.vue","webpack:///./src/views/face/Parse.vue?99e2","webpack:///./src/views/face/Parse.vue?3bdc","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/fixOldData.js","webpack:///node_modules/@jx3box/jx3box-facedat/src/Facedat.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue?e0f2","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue?ad63","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue?e47b","webpack:///./src/views/face/Parse.vue?4054"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","r","l","t","Symbol","iterator","e","n","i","u","a","f","o","call","next","Object","done","push","value","length","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","$","$entries","entries","target","stat","O","render","_vm","this","_c","_self","staticClass","class","on","_v","attrs","handleSuccess","directives","name","rawName","expression","json","staticRenderFns","props","data","computed","methods","mounted","components","Facedat","Upload","component","ready","tab_type","model","active","callback","$$v","_l","group","key","_s","dict","facedata","bone_range","body_type","lock","$set","cleandata","clean","checkdecal_prop","getDecalIcon","getDecalName","getDecalIsFlip","_e","showDecalFree","showDecalPrice","getDecorationIcon","getDecorationName","showDecorationPrice","total_coin","ref","$event","buildData","fixOldData","olddata","newdata","tBone","tDecal","nRoleType","misc","decal","forEach","nShowID","item","decal_group","version","decalMap","decorationMap","_cleandata","_","cloneDeep","nDecorationID","CanUseInCreate","decal_default","client","_this$facedata","_nMajorVersion","nMajorVersion","output_std","amendVersion","amendBone","output_origin","origin","includes","prop","decal_prop","output","table","format","eol","spaces","slice","console","log","sum","_i","_Object$entries","_Object$entries$_i","watch","deep","handler","$forceUpdate","immediate","val","fetchDecal","fetchDecoration","JSON","parse","status","$notify","error","title","message","get","iconid","__iconPath","_this$decalMap","_this$decalMap$this$b","_this$decalMap$this$b2","_this$decalMap$this$b3","_dict$key","type","_this$decalMap2","_this$decalMap2$this$","_this$decalMap2$this$2","_this$decalMap2$this$3","_dict$key2","CoinPrice","id","v","outputWithHeader","KData","blob","Blob","saveAs","Date","now","versions","nVersion","_bone","bone_default","_fixbone","assign","amendDecal","fetchWithLocalStorage","url","onFetch","localData","sessionStorage","getItem","axios","then","res","setItem","stringify","_this","arguments","undefined","concat","__ossMirror","_this2"],"mappings":"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","file":"js/chunk-904b7d44.a460dc88.js","sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","'use strict';\nvar $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-facedata\"},[_c('div',{staticClass:\"m-face-parse\",class:{ on: _vm.done }},[_c('h1',{staticClass:\"m-face-parse-title\"},[_vm._v(\"捏脸数据解析器\")]),_c('Upload',{attrs:{\"type\":\"face\"},on:{\"success\":_vm.handleSuccess}}),_c('Facedat',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.done),expression:\"done\"}],staticClass:\"m-face-parse-preview\",attrs:{\"data\":_vm.json,\"lock\":false}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-facedata\">\n        <div class=\"m-face-parse\" :class=\"{ on: done }\">\n            <h1 class=\"m-face-parse-title\">捏脸数据解析器</h1>\n            <Upload type=\"face\" @success=\"handleSuccess\" />\n            <Facedat class=\"m-face-parse-preview\" :data=\"json\" :lock=\"false\" v-show=\"done\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport Facedat from \"@jx3box/jx3box-facedat/src/Facedat\";\nimport Upload from \"@jx3box/jx3box-facedat/src/Upload\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nexport default {\n    name: \"FacedataParse\",\n    props: [],\n    data: function () {\n        return {\n            data: \"\",\n            done: false,\n        };\n    },\n    computed: {\n        json: function () {\n            return this.data && this.data.json;\n        },\n    },\n    methods: {\n        handleSuccess: function (data) {\n            this.data = data;\n            if (data?.json) {\n                this.done = true;\n            } else {\n                this.done = false;\n            }\n        },\n    },\n    mounted: function () {\n    },\n    components: {\n        Facedat,\n        Upload,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/face/parse.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Parse.vue?vue&type=template&id=322c0e0a&\"\nimport script from \"./Parse.vue?vue&type=script&lang=js&\"\nexport * from \"./Parse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Parse.vue?vue&type=style&index=0&id=322c0e0a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.ready)?_c('div',{staticClass:\"c-facedat\"},[_c('el-tabs',{staticClass:\"c-facedat-preivew\",attrs:{\"type\":_vm.tab_type},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('el-tab-pane',{attrs:{\"label\":\"眼部轮廓\",\"name\":\"eye\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['eye']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"嘴部轮廓\",\"name\":\"mouth\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['mouth']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"鼻子轮廓\",\"name\":\"nose\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['nose']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"脸部轮廓\",\"name\":\"face\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['face']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"贴花\",\"name\":\"decal\"}},[_c('div',{staticClass:\"m-facedat-decals\",attrs:{\"id\":\"decals\"}},[_vm._l((_vm.group['decal']),function(key,i){return _c('div',{key:key + i,staticClass:\"c-facedat-group\"},[(_vm.cleandata['tDecal'][key])?[_c('ul',{staticClass:\"u-decals\"},[_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.clean || _vm.checkdecal_prop(key)),expression:\"!clean || checkdecal_prop(key)\"}]},[_c('div',{staticClass:\"u-title\"},[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('img',{staticClass:\"u-pic\",attrs:{\"src\":_vm.getDecalIcon(key, _vm.cleandata['tDecal'][key]['nShowID'])}}),_c('span',{staticClass:\"u-dname\"},[_vm._v(_vm._s(_vm.getDecalName(key, _vm.cleandata[\"tDecal\"][key][\"nShowID\"])))]),(\n                    _vm.getDecalIsFlip(key, _vm.cleandata['tDecal'][key]['nShowID'])\n                  )?_c('span',{staticClass:\"u-dflip\"},[_vm._v(\"(翻转)\")]):_vm._e(),_c('span',{staticClass:\"u-dcolor\"},[_vm._v(\"(颜色:\"+_vm._s(_vm.cleandata[\"tDecal\"][key][\"nColorID\"])+\")\")]),(\n                    _vm.showDecalFree(key, _vm.cleandata['tDecal'][key]['nShowID'])\n                  )?_c('span',{staticClass:\"u-free\"},[_c('i',{staticClass:\"el-icon-success\"}),_vm._v(\" 新建角色可用 \")]):_vm._e(),(\n                    _vm.showDecalPrice(key, _vm.cleandata['tDecal'][key]['nShowID'])\n                  )?_c('span',{staticClass:\"u-price\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"+_vm._s(_vm.showDecalPrice(key, _vm.cleandata[\"tDecal\"][key][\"nShowID\"]))+\" 通宝 \")]):_vm._e()])])]:_vm._e()],2)}),_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-decals\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(\"装饰物\")]),_c('img',{staticClass:\"u-pic\",attrs:{\"src\":_vm.getDecorationIcon(_vm.cleandata['nDecorationID'])}}),_c('span',{staticClass:\"u-dname\"},[_vm._v(_vm._s(_vm.getDecorationName(_vm.cleandata[\"nDecorationID\"])))]),(_vm.showDecorationPrice(_vm.cleandata['nDecorationID']))?_c('span',{staticClass:\"u-price\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"+_vm._s(_vm.showDecorationPrice(_vm.cleandata[\"nDecorationID\"]))+\" 通宝 \")]):_vm._e()])]),_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-decals\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(\"总计\")]),_c('span',{staticClass:\"u-total u-price\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"),_c('b',[_vm._v(_vm._s(_vm.total_coin))]),_vm._v(\" 通宝\")])])])],2)])],1),_c('div',{staticClass:\"c-facedat-setting\"},[_c('el-form',{ref:\"form\",staticClass:\"c-facedat-setting-form\",attrs:{\"label-width\":\"80px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"高级\"}},[_c('el-checkbox',{model:{value:(_vm.clean),callback:function ($$v) {_vm.clean=$$v},expression:\"clean\"}},[_vm._v(\"清洗模式\")]),_c('span',{staticClass:\"u-warning\"},[_c('i',{staticClass:\"el-icon-warning-outline\"}),_vm._v(\" 仅保留创建新角色时可用项，如提示非法数据也请尝试开启该模式 \")])],1)],1)],1),_c('div',{staticClass:\"c-facedat-btns\"},[_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-receiving\"},on:{\"click\":function($event){return _vm.buildData('std')}}},[_vm._v(\"导出正式服\")]),_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"warning\",\"icon\":\"el-icon-receiving\"},on:{\"click\":function($event){return _vm.buildData('origin')}}},[_vm._v(\"导出怀旧服\")])],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 将早期数据统一成当前格式\nfunction fixOldData(olddata) {\n    let newdata = {\n        tBone: {},\n        tDecal: {},\n        nRoleType: ~~olddata.misc[0].value,\n    };\n\n    olddata.decal.forEach((decal) => {\n        newdata.tDecal[decal.name] = {\n            nShowID : ~~decal.value\n        }\n    })\n\n    let arr = ['eye','mouth','nose','face']\n    arr.forEach((key) => {\n        olddata[key].forEach((item) => {\n            newdata.tBone[item.name] = ~~item.value\n        })\n    })\n\n    return newdata\n}\n\nexport default fixOldData;\n","<template>\n  <div class=\"c-facedat\" v-if=\"ready\">\n    <el-tabs class=\"c-facedat-preivew\" v-model=\"active\" :type=\"tab_type\">\n      <el-tab-pane label=\"眼部轮廓\" name=\"eye\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['eye']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"嘴部轮廓\" name=\"mouth\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['mouth']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"鼻子轮廓\" name=\"nose\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['nose']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"脸部轮廓\" name=\"face\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['face']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"贴花\" name=\"decal\">\n        <div class=\"m-facedat-decals\" id=\"decals\">\n          <div\n            class=\"c-facedat-group\"\n            v-for=\"(key, i) in group['decal']\"\n            :key=\"key + i\"\n          >\n            <template v-if=\"cleandata['tDecal'][key]\">\n              <ul class=\"u-decals\">\n                <li v-show=\"!clean || checkdecal_prop(key)\">\n                  <div class=\"u-title\">{{ dict[key][\"desc\"] }}</div>\n                  <img\n                    class=\"u-pic\"\n                    :src=\"\n                      getDecalIcon(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                  />\n                  <span class=\"u-dname\">{{\n                    getDecalName(key, cleandata[\"tDecal\"][key][\"nShowID\"])\n                  }}</span>\n                  <span\n                    class=\"u-dflip\"\n                    v-if=\"\n                      getDecalIsFlip(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                    >(翻转)</span\n                  >\n                  <span class=\"u-dcolor\"\n                    >(颜色:{{ cleandata[\"tDecal\"][key][\"nColorID\"] }})</span\n                  >\n                  <span\n                    class=\"u-free\"\n                    v-if=\"\n                      showDecalFree(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                  >\n                    <i class=\"el-icon-success\"></i> 新建角色可用\n                  </span>\n                  <span\n                    class=\"u-price\"\n                    v-if=\"\n                      showDecalPrice(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                  >\n                    <i class=\"el-icon-coin\"></i>\n                    {{\n                      showDecalPrice(key, cleandata[\"tDecal\"][key][\"nShowID\"])\n                    }}\n                    通宝\n                  </span>\n                </li>\n              </ul>\n            </template>\n          </div>\n          <div class=\"c-facedat-group\">\n            <ul class=\"u-decals\">\n              <div class=\"u-title\">装饰物</div>\n              <img\n                class=\"u-pic\"\n                :src=\"getDecorationIcon(cleandata['nDecorationID'])\"\n              />\n              <span class=\"u-dname\">{{\n                getDecorationName(cleandata[\"nDecorationID\"])\n              }}</span>\n              <span\n                class=\"u-price\"\n                v-if=\"showDecorationPrice(cleandata['nDecorationID'])\"\n              >\n                <i class=\"el-icon-coin\"></i>\n                {{ showDecorationPrice(cleandata[\"nDecorationID\"]) }} 通宝\n              </span>\n            </ul>\n          </div>\n          <div class=\"c-facedat-group\">\n            <ul class=\"u-decals\">\n              <div class=\"u-title\">总计</div>\n              <span class=\"u-total u-price\"\n                ><i class=\"el-icon-coin\"></i> <b>{{ total_coin }}</b> 通宝</span\n              >\n            </ul>\n          </div>\n        </div>\n      </el-tab-pane>\n    </el-tabs>\n    <div class=\"c-facedat-setting\">\n      <el-form\n        class=\"c-facedat-setting-form\"\n        ref=\"form\"\n        label-width=\"80px\"\n        label-position=\"left\"\n      >\n        <el-form-item label=\"高级\">\n          <el-checkbox v-model=\"clean\">清洗模式</el-checkbox>\n          <span class=\"u-warning\">\n            <i class=\"el-icon-warning-outline\"></i>\n            仅保留创建新角色时可用项，如提示非法数据也请尝试开启该模式\n          </span>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"c-facedat-btns\">\n      <el-button\n        class=\"u-btn\"\n        type=\"primary\"\n        @click=\"buildData('std')\"\n        icon=\"el-icon-receiving\"\n        >导出正式服</el-button\n      >\n      <el-button\n        class=\"u-btn\"\n        type=\"warning\"\n        @click=\"buildData('origin')\"\n        icon=\"el-icon-receiving\"\n        >导出怀旧服</el-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nimport axios from \"axios\";\nimport {\n  __ossMirror,\n  __iconPath,\n  __ossRoot,\n} from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport fixOldData from \"./fixOldData.js\";\n\nimport group from \"../assets/data/face/group.json\";\nimport dict from \"../assets/data/face/dict.json\";\nimport decal_group from \"../assets/data/face/decal_group.json\";\nimport decal_origin from \"../assets/data/face/decal_origin.json\";\nimport decal_std from \"../assets/data/face/decal_std.json\";\nimport decal_prop from \"../assets/data/face/decal_prop.json\";\nimport bone_range from \"../assets/data/face/bone_range.json\";\nimport bone_default from \"../assets/data/face/bone_default.json\";\nimport decal_default from \"../assets/data/face/decal_default.json\";\nimport versions from \"../assets/data/face/version.json\";\n\nimport { format } from \"lua-json\";\nimport { saveAs } from \"file-saver\";\nimport * as KData from \"./KData\";\n\nexport default {\n  name: \"Facedat\",\n  props: [\"data\", \"lock\", \"tab_type\"],\n  data: function () {\n    return {\n      active: \"eye\",\n\n      // 数据\n      body_type: \"\",\n      facedata: \"\",\n\n      // 骨骼\n      group,\n      dict,\n      bone_range,\n\n      // 妆容\n      decal_group,\n\n      // 导出设置\n      clean: false,\n      version: \"std\",\n\n      decalMap: \"\",\n      decorationMap: \"\",\n\n      // test\n      // data : JSON.stringify(olddata)\n    };\n  },\n  computed: {\n    ready: function () {\n      return !!(this.facedata && this.decalMap && this.decorationMap);\n    },\n    cleandata: function () {\n      if (this.clean && this.facedata) {\n        let _cleandata = _.cloneDeep(this.facedata);\n        _cleandata.nDecorationID = 0;\n        for (let key in _cleandata.tDecal) {\n          let CanUseInCreate = this.showDecalFree(\n            key,\n            _cleandata?.tDecal[key][\"nShowID\"]\n          );\n          if (!CanUseInCreate) {\n            _cleandata.tDecal[key][\"nShowID\"] = decal_default[key][\"nShowID\"];\n          }\n        }\n        return _cleandata;\n      } else {\n        return this.facedata;\n      }\n    },\n    // 自动检测数据版本\n    client: function () {\n      let _nMajorVersion = this.facedata?.nMajorVersion;\n      if (_nMajorVersion == 1 || !_nMajorVersion) {\n        return \"std\";\n      } else {\n        return \"origin\";\n      }\n    },\n    /* decalmap: function() {\n            if (this.client == \"std\" || !this.client) {\n                return decal_std;\n            } else {\n                return decal_origin;\n            }\n        }, */\n    output_std: function () {\n      // 1.默认需要修订版本号与客户端版本\n      let data = this.amendVersion(\"std\");\n      // 2.补全骨骼缺失数据\n      data.tBone = this.amendBone(data.tBone);\n      // 3.补全完整数据结构\n      // 如果没有开启清洗也需要对数据结构进行补充，以防上传的是古老的数据（缺失部分后加的属性）\n      // 同时部分古老数据即使存在该属性，但部分2级属性也是缺失的\n      // data.tDecal = this.amendDecal(data.tDecal)\n\n      // 废弃：如果开启了清洗直接回档整体默认贴花部分\n      // 正式服数据包含全部属性（shadow1~4），且有额外属性值（fValue1~3）\n      // 直接取一个demo数据，以防上传的是怀旧服数据缺失部分属性\n      if (this.clean) {\n        data.tDecal = _.cloneDeep(decal_default);\n      }\n\n      // 废弃：如果是清洗模式，还需要仅保留新建角色时存在的属性（移除shadow1~4等）\n      // if (this.clean){\n      //     for(let key in data.tDecal){\n      //         if (!decal_group.origin.includes(key)) {\n      //             delete data.tDecal[key];\n      //         }\n      //     }\n      // }\n      return data;\n    },\n    output_origin: function () {\n      // 1.默认需要修订版本号与客户端版本\n      let data = this.amendVersion(\"origin\");\n      // 2.补全骨骼缺失数据\n      data.tBone = this.amendBone(data.tBone);\n\n      // 3.贴花数据全部复位（怀旧服商城暂未上线）\n      for (let key in data.tDecal) {\n        if (decal_group.origin.includes(key)) {\n          // 3.2重置color和show_id\n          data.tDecal[key][\"nColorID\"] = decal_default[key][\"nColorID\"];\n          data.tDecal[key][\"nShowID\"] = decal_default[key][\"nShowID\"];\n          // 3.3移除正式服特有属性（fValue1~3）\n          for (let prop in data.tDecal[key]) {\n            if (!decal_prop.origin.includes(prop)) {\n              delete data.tDecal[key][prop];\n            }\n          }\n          // 3.1首先移除正式服特有的部分属性（shadow1~4）\n        } else {\n          delete data.tDecal[key];\n        }\n      }\n      return data;\n    },\n    output: function () {\n      let table = {};\n      let data =\n        this.version == \"origin\" ? this.output_origin : this.output_std;\n      try {\n        table = \"return \" + format(data, { eol: \"\", spaces: 0 }).slice(6);\n      } catch (e) {\n        console.log(\"导出转换失败\");\n        console.log(e);\n      }\n      return table;\n    },\n    total_coin: function () {\n      let sum = 0;\n      for (const [_, key] of Object.entries(this.group[\"decal\"]))\n        if (this.cleandata[\"tDecal\"][key])\n          sum += this.showDecalPrice(\n            key,\n            this.cleandata[\"tDecal\"][key][\"nShowID\"]\n          );\n      if (this.cleandata[\"nDecorationID\"])\n        sum += this.showDecorationPrice(this.cleandata[\"nDecorationID\"]);\n      return sum;\n    },\n  },\n  watch: {\n    data: {\n      deep: true,\n      handler: function (newdata) {\n        this.render();\n      },\n    },\n    cleandata: {\n      deep: true,\n      handler: function () {\n        this.$forceUpdate();\n      },\n    },\n    client: {\n      immediate: true,\n      handler: function (val) {\n        this.fetchDecal();\n        this.fetchDecoration();\n      },\n    },\n  },\n  methods: {\n    // 数据构建\n    render: function () {\n      // 是否为空\n      if (!this.data) {\n        this.body_type = \"\";\n        this.facedata = \"\";\n        return;\n      }\n\n      // json 转为 object\n      try {\n        let facedata = JSON.parse(this.data);\n        // 旧版数据\n        if (facedata.status) {\n          this.body_type = facedata.misc[0][\"value\"];\n          this.facedata = fixOldData(facedata);\n        } else {\n          this.body_type = facedata.nRoleType;\n          this.facedata = facedata;\n        }\n      } catch (e) {\n        this.facedata = \"\";\n        console.log(e);\n        this.$notify.error({\n          title: \"错误\",\n          message: \"脸型数据无法解析\",\n        });\n      }\n    },\n\n    // 贴花\n    getDecalName: function (key, val) {\n      return (\n        _.get(this.decalMap[this.body_type][dict[key][\"type\"]][val], \"name\") ||\n        \"无\"\n      );\n    },\n    getDecalIcon: function (key, val) {\n      let iconid = _.get(\n        this.decalMap[this.body_type][dict[key][\"type\"]][val],\n        \"iconid\"\n      );\n      if (iconid) {\n        return __iconPath + \"icon/\" + iconid + \".png\";\n      } else {\n        return __iconPath + \"icon/\" + \"undefined\" + \".png\";\n      }\n    },\n    getDecalIsFlip: function (key, val) {\n      return (\n        _.get(\n          this.decalMap[this.body_type][dict[key][\"type\"]][val],\n          \"IsFlip\"\n        ) || false\n      );\n    },\n    showDecalFree: function (key, val) {\n      return ~~this.decalMap?.[this.body_type]?.[dict[key]?.type]?.[val]\n        ?.CanUseInCreate;\n    },\n    showDecalPrice: function (key, val) {\n      return ~~this.decalMap?.[this.body_type]?.[dict[key]?.type]?.[val]\n        ?.CoinPrice;\n    },\n    checkdecal_prop: function (key) {\n      return decal_group.origin.includes(key);\n    },\n\n    // 装饰物\n    getDecorationName: function (id) {\n      return _.get(this.decorationMap[this.body_type][id], \"Name\") || \"无\";\n    },\n    getDecorationIcon: function (id) {\n      let iconid = _.get(this.decorationMap[this.body_type][id], \"IconID\");\n      if (iconid) {\n        return __iconPath + \"icon/\" + iconid + \".png\";\n      } else {\n        return __iconPath + \"icon/\" + \"undefined\" + \".png\";\n      }\n    },\n    showDecorationPrice: function (id) {\n      return ~~(\n        _.get(this.decorationMap[this.body_type][id], \"CoinPrice\") || \"0\"\n      );\n    },\n\n    // 按钮\n    buildData: function (v) {\n      this.version = v;\n      let outputWithHeader = KData.dump(this.output);\n      let blob = new Blob([outputWithHeader], {\n        type: \"application/dat;charset=utf-8\",\n      });\n      saveAs(blob, Date.now() + \".dat\");\n    },\n\n    // 数据修正\n    amendVersion: function (v) {\n      let data = _.cloneDeep(this.cleandata);\n      data.nDecorationID = v === \"origin\" ? 0 : data.nDecorationID;\n      data.nMajorVersion = versions[v][\"nMajorVersion\"];\n      data.nVersion = versions[v][\"nVersion\"];\n      return data;\n    },\n    amendBone: function (data) {\n      let _bone = _.cloneDeep(bone_default);\n      let _fixbone = Object.assign(_bone, data);\n      return _fixbone;\n    },\n    amendDecal: function (data) {\n      let _decal = _.cloneDeep(decal_default);\n      for (let key in decal_default) {\n        // 不存在补全属性\n        if (!data[key]) {\n          data[key] = _.cloneDeep(decal_default[key]);\n          // 存在则补全子属性\n        } else {\n          data[key] = Object.assign(decal_default[key], data[key]);\n        }\n      }\n      return data;\n    },\n    fetchWithLocalStorage: function (url, key, onFetch) {\n      const localData = JSON.parse(sessionStorage.getItem(key));\n      if (localData) {\n        if (onFetch) onFetch(localData);\n        return;\n      } else {\n        axios.get(url).then((res) => {\n          sessionStorage.setItem(key, JSON.stringify(res.data));\n          if (onFetch) onFetch(res.data);\n        });\n      }\n    },\n    fetchDecal: function (client = \"std\") {\n      try {\n        const url =\n          client === \"std\"\n            ? `${__ossMirror}data/face/decal_std.json`\n            : `${__ossMirror}data/face/decal_origin.json`;\n        const key = `decal_${client}`;\n        this.fetchWithLocalStorage(url, key, (data) => {\n          this.decalMap = data;\n        });\n      } catch (e) {\n        this.decalMap = \"\";\n        console.log(e);\n      }\n    },\n    fetchDecoration: function (client = \"std\") {\n      try {\n        const url =\n          client === \"std\"\n            ? `${__ossMirror}data/face/decoration_std.json`\n            : `${__ossMirror}data/face/decoration_origin.json`;\n        const key = `decoration_${client}`;\n        this.fetchWithLocalStorage(url, key, (data) => {\n          this.decorationMap = data;\n        });\n      } catch (e) {\n        this.decorationMap = \"\";\n        console.log(e);\n      }\n    },\n  },\n  mounted: function () {\n    this.render();\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/facedat.less\";\n</style>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Facedat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Facedat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Facedat.vue?vue&type=template&id=1bba7c60&\"\nimport script from \"./Facedat.vue?vue&type=script&lang=js&\"\nexport * from \"./Facedat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Facedat.vue?vue&type=style&index=0&id=1bba7c60&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Facedat.vue?vue&type=style&index=0&id=1bba7c60&prod&lang=less&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=style&index=0&id=322c0e0a&prod&lang=less&\""],"sourceRoot":""}