(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca9ff4aa"],{"03f7":function(t,e,i){"use strict";i("0d67")},"0d66":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{ref:"wrap",staticClass:"cross-wrapper"},[t.isShow?[e("div",{staticClass:"cross cross-left",class:!t.isInLeft&&"active",style:{width:t.width+"px","border-top-left-radius":t.radius+"px","border-bottom-left-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toLeft.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-left"})]),e("div",{staticClass:"cross cross-right",class:!t.isInRight&&"active",style:{width:t.width+"px","border-top-right-radius":t.radius+"px","border-bottom-right-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toRight.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-right"})])]:t._e(),e("div",{ref:"list",staticClass:"list"},t._l(t.list,(function(i,s){return e("div",{key:i.id||i.ID||s,staticClass:"item",style:{"margin-right":t.gap+"px"}},[t._t("default",null,{item:i})],2)})),0)],2)},a=[],n=(i("a9e3"),{name:"Cross",props:{list:{type:Array,required:!0},width:{type:Number,default:60},gap:{type:Number,default:20},radius:{type:Number,default:10}},data:function(){return{scrollLeft:0,isInLeft:!0,isInRight:!1,isShow:!1}},methods:{toLeft:function(t){t.preventDefault(),this.isInRight=!1,this.scroll(-1)},toRight:function(t){t.preventDefault(),this.isInLeft=!1,this.scroll(1)},scroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.$refs.list,s=i.scrollLeft,a=i.scrollWidth,n=i.clientWidth,r=n/2*e,o=null;o=setInterval((function(){1===e?(i.scrollLeft<s+r?i.scrollLeft+=Math.ceil(r/100):clearInterval(o),Math.ceil(i.scrollLeft+n)>=a&&(t.isInRight=!0,clearInterval(o))):-1===e&&(i.scrollLeft>s+r?i.scrollLeft+=Math.floor(r/100):clearInterval(o),i.scrollLeft<=0&&(t.isInLeft=!0,clearInterval(o)))}),1)}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list,i=e.clientWidth,s=e.scrollWidth;s>i&&(t.isShow=!0)}))}}),r=n,o=(i("9fac"),i("2877")),c=Object(o["a"])(r,s,a,!1,null,null,null);e["a"]=c.exports},"0d67":function(t,e,i){},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var s=i("6b75");function a(t){if(Array.isArray(t))return Object(s["a"])(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("a630");function n(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var r=i("06c5");i("d9e2");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||n(t)||Object(r["a"])(t)||o()}},"68e8":function(t,e,i){"use strict";i("badb")},"74e8":function(t,e,i){"use strict";i.r(e);i("99af"),i("b0c0"),i("a9e3");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"horse-single-wrapper"},[e("div",{staticClass:"back-wrap"},[e("el-button",{on:{click:t.goBack}},[t._v("返回列表")])],1),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"horse-single-content"},[e("div",{staticClass:"main-info-wrapper"},[t.item.ID?e("div",{staticClass:"title"},[t._v(t._s(t.item.Name)+" 的信息")]):t._e(),t.item.ID?e("div",{staticClass:"main-info-wrap"},[e("div",{staticClass:"img-wrap",class:"u-quality-bg--"+t.item.Quality},[15===t.item.SubType?e("img",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item)}}):t._e()]),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"info-item"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"info-item name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"info-item desc"},[t._v(" 分类: "+t._s(t.typeName+("2"!==t.type?" · ".concat(t.modeName," · ").concat(t.item.GetType):""))+" ")]),e("div",{staticClass:"info-item desc"},[t._v("品质: "+t._s(t.item.Level))]),"2"!==t.type?e("div",{staticClass:"info-item desc"},[t._v("跑速: "+t._s(t.speedName))]):t._e(),"2"!==t.type?e("div",{staticClass:"info-item desc"},[t._v("饲料: "+t._s(t.feedName))]):t._e(),e("div",{staticClass:"info-list"},[e("div",{staticClass:"title"},[t._v("基础属性")]),t.basicAttrs.length?e("div",{staticClass:"list"},t._l(t.basicAttrs,(function(i){return e("div",{key:i.id,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",staticStyle:{cursor:"default"},attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0):e("div",{staticClass:"no-data"},[t._v("无")])]),e("div",{staticClass:"info-list"},[e("div",{staticClass:"title"},[t._v("特殊属性")]),t.magicAttrs.length?e("div",{staticClass:"list"},t._l(t.magicAttrs,(function(i,s){return e("div",{key:s,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0):e("div",{staticClass:"no-data"},[t._v("无")])]),e("a",{staticClass:"u-link",attrs:{href:t.getLink("item",this.id),target:"_blank"}},[e("i",{staticClass:"el-icon-collection-tag"}),t._v(" 物品信息 ")])])]):e("div",[t._v("无此信息")])]),t.sameList.length?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.sameLoading,expression:"sameLoading"}],staticClass:"same-list-container"},[e("div",{staticClass:"title"},[t._v("同类坐骑")]),e("horse-cross",{attrs:{width:30,list:t.sameList},scopedSlots:t._u([{key:"default",fn:function(i){return[e("same-item",{attrs:{item:i.item},nativeOn:{click:function(e){return t.getHorse(i.item.ItemID)}}})]}}],null,!1,3449755589)})],1):t._e(),t.originDatas.length?e("div",{staticClass:"catch-container"},[e("div",{staticClass:"title"},[t._v("捕获地图")]),e("horse-map",{attrs:{name:t.item.Name,list:t.originDatas}})],1):t._e(),t.wiki_post&&t.wiki_post.post?e("div",{staticClass:"m-wiki-post-panel"},[e("WikiPanel",{attrs:{"wiki-post":t.wiki_post}},[e("template",{slot:"head-title"},[e("svg",{class:"u-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"512",height:"512",viewBox:"0 0 512 512","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[e("path",{attrs:{d:"M382.5 109.2C345.1 71.8 296.3 50 243.9 47v110.9c46.7 19.2 79.6 65.2 79.6 118.7 0 58-47.2 105.2-105.2 105.2-47.8 0-86.6-38.9-86.6-86.6 0-39.6 32.2-71.8 71.8-71.8 33.1 0 59.9 26.9 59.9 59.9h-25c0-19.3-15.7-34.9-34.9-34.9-25.8 0-46.8 21-46.8 46.8 0 34 27.6 61.6 61.6 61.6 44.2 0 80.1-35.9 80.1-80.1 0-57-46.3-103.3-103.3-103.3C122.3 173.3 63 232.6 63 305.6 63 398.4 138.5 474 231.4 474c57.1 0 110.7-22.2 151.1-62.6 40.4-40.4 62.6-94 62.6-151.1s-22.2-110.7-62.6-151.1z"}})]),e("span",{staticClass:"u-txt"},[t._v("坐骑攻略")])]),e("template",{slot:"head-actions"},[e("a",{staticClass:"el-button el-button--primary",attrs:{href:t.publish_url("item/".concat(t.id))}},[e("i",{staticClass:"el-icon-edit"}),e("span",[t._v("完善物品攻略")])])]),e("template",{slot:"body"},[t.compatible?e("div",{staticClass:"m-wiki-compatible"},[e("i",{staticClass:"el-icon-warning-outline"}),t._v(" 暂无缘起攻略，以下为重制攻略，仅作参考，"),e("a",{staticClass:"s-link",attrs:{href:t.publish_url("item/".concat(t.id))}},[t._v("参与修订")]),t._v("。 ")]):t._e(),e("Article",{attrs:{content:t.wiki_post.post.content}}),e("div",{staticClass:"m-wiki-signature"},[e("i",{staticClass:"el-icon-edit"}),t._v(" 本次修订由 "),e("b",[t._v(t._s(t.user_name))]),t._v(" 提交于"+t._s(t.updated_at)+" ")]),e("Thx",{key:"item-thx-"+t.id,staticClass:"m-thx",attrs:{postId:t.id,postType:"item",postTitle:t.wiki_post.source.Name,userId:t.author_id,adminBoxcoinEnable:!1,userBoxcoinEnable:!1,authors:t.authors,mode:"wiki",client:t.client}})],1)],2),e("WikiRevisions",{attrs:{type:"item","source-id":t.id}}),e("WikiComments",{attrs:{type:"item","source-id":t.id}})],1):e("div",{staticClass:"m-wiki-post-empty"},[e("i",{staticClass:"el-icon-s-opportunity"}),e("span",[t._v("暂无攻略，我要")]),e("a",{staticClass:"s-link",attrs:{href:t.publish_url("item/".concat(t.id))}},[t._v("完善攻略")])])])])},a=[],n=(i("7db0"),i("d3b7"),i("159b"),i("14d9"),i("d81d"),i("4de4"),i("fb6a"),i("ac1f"),i("466d"),i("5319"),i("f252")),r=i("85e4"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"same-item"},[e("div",{staticClass:"img-wrap",class:"u-quality-bg--"+t.item.Quality},[15===t.item.SubType?e("img",{staticClass:"u-image",attrs:{src:t.item.imgUrl}}):t._e()]),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"info-item name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"info-item name"},[t._v("ID: "+t._s(t.item.ID))]),e("div",{staticClass:"info-item u-attr-wrap"},[e("div",{staticClass:"u-attr-content"},t._l(t.item.MagicAttributes||[],(function(i,s){return e("div",{key:s,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[i.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((i.name||"")+(Number(i.level)?i.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(i.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:i.iconUrl,alt:i.name}})])],1)})),0)])]),e("div",{staticClass:"gradient-right"})])},c=[],l={name:"SameItem",props:{item:{type:Object,required:!0}},methods:{}},u=l,m=(i("cee45"),i("2877")),d=Object(m["a"])(u,o,c,!1,null,null,null),p=d.exports,f=i("0d66"),v=i("f34a"),h=i("ef56"),_=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-map"},[e("el-carousel",{attrs:{autoplay:!1,height:t.height}},t._l(t.mapDatas,(function(i,s){return e("el-carousel-item",{key:s},[e("jx3box-map",{attrs:{mapId:Number(s),datas:i},on:{resize:t.handleResize}})],1)})),1)],1)},g=[],y=i("b85c"),C=i("abab"),b={name:"HorseMap",props:{name:{type:String,required:!0},list:{type:Array,required:!0}},components:{Jx3boxMap:C["a"]},data:function(){return{height:"896px"}},computed:{mapDatas:function(){var t,e={},i=this.name,s=Object(y["a"])(this.list);try{for(s.s();!(t=s.n()).done;){var a=t.value,n=a.mapId;e[n]||(e[n]=[]);var r,o=Object(y["a"])(a.coordinates);try{for(o.s();!(r=o.n()).done;){var c=r.value;e[n].push({title:a.mapName,content:"\n                        马驹·".concat(i.indexOf("·")>-1?i.split("·")[0]:i,"\n                        <br /> 坐标：(").concat(c.x,",").concat(c.y,",").concat(c.z,")"),x:c.x,y:c.y,z:c.z})}}catch(l){o.e(l)}finally{o.f()}}}catch(l){s.e(l)}finally{s.f()}return e}},methods:{handleResize:function(t){this.height=t[1]+"px"}}},k=b,w=Object(m["a"])(k,_,g,!1,null,null,null),x=w.exports,I=i("9616"),L=i("1b86"),N=i("a974"),S=i("662c"),O=i("9307"),D=function(){var t=this,e=t._self._c;return e("WikiPanel",{staticClass:"c-wiki-comments",attrs:{scene:"detail"}},[e("template",{slot:"head-title"},[e("i",{staticClass:"el-icon-chat-line-round"}),e("span",[t._v("百科评论")])]),e("template",{slot:"body"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-comments-panel"},[t.comments&&t.comments.length?t._e():e("div",{staticClass:"u-empty"},[null===t.comments?e("span",[t._v("🎉 数据加载中...")]):t._e(),!1===t.comments?e("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.comments&&!t.comments.length?e("span",[t._v("💧 暂无评论")]):t._e()]),e("Comment",{attrs:{comments:t.comments,"source-id":t.sourceId}}),e("el-pagination",{staticClass:"u-pagination-box",attrs:{background:"","hide-on-single-page":"","current-page":t.page,total:t.total,"page-size":t.pageSize,layout:"prev, pager, next, total"},on:{"current-change":t.handleCurrentChange}}),e("div",{staticClass:"m-reply-form",attrs:{id:"m-reply-form"}},[e("h4",{staticClass:"u-title"},[e("i",{staticClass:"el-icon-chat-dot-round"}),e("span",[t._v("回复")])]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply_form.content,expression:"reply_form.content"}],staticClass:"u-reply-content",domProps:{value:t.reply_form.content},on:{input:function(e){e.target.composing||t.$set(t.reply_form,"content",e.target.value)}}}),e("div",{staticClass:"u-author"},[e("span",[t._v("昵称：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.reply_form.user_nickname,expression:"reply_form.user_nickname"}],attrs:{type:"text"},domProps:{value:t.reply_form.user_nickname},on:{input:function(e){e.target.composing||t.$set(t.reply_form,"user_nickname",e.target.value)}}})]),e("el-button",{staticClass:"u-submit",attrs:{type:"primary"},on:{click:function(e){return t.create_comment(t.reply_form)}}},[e("i",{staticClass:"el-icon-check"}),e("span",[t._v("提交")])])],1)],1)])],2)},j=[],R=(i("caad"),i("2532"),function(){var t=this,e=t._self._c;return e("ul",{staticClass:"u-comments"},t._l(t.comments,(function(i,s){return e("li",{key:s,staticClass:"u-comment-panel"},[e("div",{staticClass:"u-comment"},[e("div",{staticClass:"u-nickname-panel"},[e("a",{staticClass:"u-nickname",attrs:{href:i.user_id?t.author_url(i.user_id):null,target:"_blank"},domProps:{textContent:t._s(i.user_nickname)}}),i.parent_id?[e("span",[t._v(" 回复 ")]),e("a",{staticClass:"u-nickname",attrs:{href:i.parent.user_id?t.author_url(i.parent.user_id):null,target:"_blank"},domProps:{textContent:t._s(i.parent.user_nickname)}})]:t._e()],2),e("p",{staticClass:"u-content",domProps:{innerHTML:t._s(i.content)}}),e("div",{staticClass:"m-reply"},[i.reply_form&&i.reply_form.show?e("el-button",{staticClass:"u-reply",attrs:{type:"default"},on:{click:function(t){i.reply_form.show=!i.reply_form.show}}},[e("i",{staticClass:"el-icon-arrow-up"}),e("span",[t._v("收起")])]):e("el-button",{staticClass:"u-reply",attrs:{type:"primary",plain:""},on:{click:function(t){i.reply_form.show=!i.reply_form.show}}},[e("i",{staticClass:"el-icon-chat-dot-round"}),e("span",[t._v("回复")])]),e("span",{staticClass:"u-time",domProps:{textContent:t._s(t.ts2str(i.updated))}})],1),i.reply_form&&i.reply_form.show?e("div",{staticClass:"m-reply-form"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:i.reply_form.content,expression:"comment.reply_form.content"}],staticClass:"u-reply-content",domProps:{value:i.reply_form.content},on:{input:function(e){e.target.composing||t.$set(i.reply_form,"content",e.target.value)}}}),e("div",{staticClass:"u-author"},[e("span",[t._v("昵称：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:i.reply_form.user_nickname,expression:"comment.reply_form.user_nickname"}],attrs:{type:"text"},domProps:{value:i.reply_form.user_nickname},on:{input:function(e){e.target.composing||t.$set(i.reply_form,"user_nickname",e.target.value)}}})]),e("el-button",{staticClass:"u-submit",attrs:{type:"primary"},on:{click:function(e){return t.create_comment(i.reply_form,i.id)}}},[e("i",{staticClass:"el-icon-check"}),e("span",[t._v("提交")])])],1):t._e()]),i.children.length?e("WikiComment",{attrs:{comments:i.children,"source-id":t.sourceId}}):t._e()],1)})),0)}),z=[],A={name:"WikiComment",props:["comments","sourceId"],methods:{author_url:r["authorLink"],ts2str:r["ts2str"],create_comment:function(t,e){var i=this.$parent;i.create_comment||(i=i.$parent),i.create_comment?i.create_comment(t,e):this.$message({message:"发布评论异常，请联系管理员",type:"warning"})}}},$=A,P=Object(m["a"])($,R,z,!1,null,null,null),T=P.exports,M=i("c9d2"),W={name:"WikiComments",props:["type","sourceId"],data:function(){return{comments:null,reply_form:{content:"",user_nickname:M["a"].getInfo().name},page:1,pageSize:10,total:0,loading:!1}},computed:{client:function(){return location.href.includes("classic")||location.href.includes("origin")?"origin":"std"}},methods:{get_comments:function(){var t=this;function e(t,i){var s=[],a=function(){var a=t[n];if(!a)return"continue";if(a.parent_id===i){var r=e(a.children,a.id);a.children=r.map((function(t){return t.parent={user_id:a.user_id,user_nickname:a.user_nickname,id:a.id},t.reply_form={show:!1,content:"",user_nickname:M["a"].getInfo().name},t})),s.push(a)}};for(var n in t)a();return s}this.type&&this.sourceId&&(this.loading=!0,L["b"].list({type:this.type,id:this.sourceId},{client:this.client,page:this.page}).then((function(i){if(i=i.data,200===i.code){for(var s=i.data.comments,a=0;a<s.length;a++)s[a]["reply_form"]={show:!1,content:"",user_nickname:M["a"].getInfo().name};t.page=i.data.current_page,t.total=i.data.total,t.comments=e(s,0),t.loading=!1}}),(function(){t.comments=!1,t.loading=!1})))},create_comment:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.content){var s={comment:{type:this.type,source_id:this.sourceId,parent_id:i,user_nickname:t.user_nickname||M["a"].getInfo().name,content:t.content},client:this.client};L["b"].post({data:s},{}).then((function(i){i=i.data,200===i.code?(t.content="",e.$message({message:"提交成功，请等待审核",type:"success"})):e.$message({message:"".concat(i.message),type:"warning"})}),(function(){e.$message({message:"网络异常，提交失败",type:"warning"})})).finally((function(){t.show=!1}))}else this.$message({message:"请先填写评论内容再尝试提交",type:"warning"})},handleCurrentChange:function(t){this.page=t,this.get_comments()}},components:{WikiPanel:S["a"],Comment:T},watch:{sourceId:{immediate:!0,handler:function(){this.get_comments()}}}},U=W,H=(i("8c22"),Object(m["a"])(U,D,j,!1,null,null,null)),q=H.exports,F={name:"Single",inject:["__imgRoot","__imgRoot2"],components:{SameItem:p,HorseCross:f["a"],HorseMap:x,WikiPanel:S["a"],WikiRevisions:O["a"],WikiComments:q,Article:N["a"]},data:function(){return{loading:!1,sameLoading:!1,item:{},sameList:[],wiki_post:{source:{},post:null},compatible:!1,is_empty:!0}},computed:{originDatas:function(){var t=this.item.Name;if(t){var e=v.find((function(e){return t.indexOf(e.name)>-1}))?v.find((function(e){return t.indexOf(e.name)>-1})).mapList:[],i=[];return e.length&&e.forEach((function(t){i.push({mapId:t,mapName:h[t].mapName,coordinates:h[t].coordinates})})),i}return[]},id:function(){return this.$route.params.id},type:function(){return this.$route.query.type},client:function(){return this.$store.state.client},basicAttrs:function(){var t=this.item.MagicAttributes;return t&&t.length?t.filter((function(t){return!t.level||"0"===t.level})).map((function(t){return t.iconUrl=Object(r["iconLink"])(t.icon),t})):[]},magicAttrs:function(){var t=this.item.MagicAttributes;return t&&t.length?t.filter((function(t){return t.icon&&"0"!==t.level})).map((function(t){return t.iconUrl=Object(r["iconLink"])(t.icon),t})):[]},typeName:function(){var t=this.item,e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e},modeName:function(){var t="",e=this.item;return 15===e.SubType&&e.MagicAttributes&&e.MagicAttributes.length&&(t=e.MagicAttributes.find((function(t){return"15650"===t.id}))?e.MagicAttributes.find((function(t){return"15650"===t.id})).name:"单骑"),t},feedName:function(){var t=this.item,e="";if(15===t.SubType&&t.Feed){var i=t.Feed.FeedTip.indexOf("【"),s=t.Feed.FeedTip.indexOf("】");e=t.Feed.FeedTip.slice(i,s+1)}return e},speedName:function(){var t=this.item,e="";return t.MoveSpeed&&(e=t.MoveSpeedDesc.split("移动速度提高")[1]),e},post_id:function(){return this.$route.params.post_id},isRevision:function(){return!!this.$route.params.post_id},author_id:function(){var t,e;return~~(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_id)},user_name:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.user_nickname},updated_at:function(){var t,e;return Object(r["ts2str"])(null===(t=this.wiki_post)||void 0===t||null===(e=t.post)||void 0===e?void 0:e.updated)},fav_title:function(){var t,e;return null===(t=this.wiki_post)||void 0===t||null===(e=t.source)||void 0===e?void 0:e.Name},authors:function(){var t,e,i;return this.isRevision?[]:(null===(t=this.wiki_post)||void 0===t||null===(e=t.users)||void 0===e||null===(i=e.filter((function(t){return t.id})))||void 0===i?void 0:i.map((function(t){return{user_id:t.id,user_avatar:t.avatar,display_name:t.nickname}})))||[]}},watch:{id:{handler:function(){this.loadData()}},post_id:{handler:function(){this.loadRevision()}}},methods:{goBack:function(){this.$router.push({path:"/"})},getHorse:function(t){var e=this,i={id:t||this.id,client:this.client};"2"===this.type&&(i.type=2),this.loading=!0,Object(n["c"])(i).then((function(t){e.loading=!1,e.item=t.data||{};var i=t.data.Name;"普通坐骑"===e.typeName&&(i=t.data.Name.split("·")[0]),"2"!==e.type&&i&&e.getSameHorses(i)})).catch((function(){e.loading=!1})).finally((function(){e.loading=!1}))},getSameHorses:function(t){var e=this,i={page:1,pageSize:50,client:this.client,keyword:t};this.sameLoading=!0,Object(n["d"])(i).then((function(t){e.sameLoading=!1,e.sameList=t.data.list.filter((function(t){return t.ID!==e.item.ID})).map((function(t){return t.imgUrl=e.getImgSrc(t),t.MagicAttributes&&t.MagicAttributes.length&&t.MagicAttributes.map((function(t){return t.iconUrl=Object(r["iconLink"])(t.icon),t})),t}))})).catch((function(){e.sameLoading=!1}))},getImgSrc:function(t){var e=t.ImgPath;if(e){var i=e.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),s=i[1].replace(/\\/g,"/");return"default"==i[1]?this.__imgRoot+"homeland/".concat(this.client)+"/default/default.png":this.__imgRoot+"homeland/".concat(this.client)+s+".png"}return this.__imgRoot2+"".concat(this.client,"/")+t.ID+".png"},getLink:r["getLink"],publish_url:r["publishLink"],loadData:function(){var t=this;this.id&&L["a"].mix({type:"item",id:this.id,client:this.client},{supply:1}).then((function(e){var i=e.post,s=e.source,a=e.compatible,n=e.isEmpty,r=e.users;t.wiki_post={post:i,source:s,users:r},t.is_empty=n,t.compatible=a})),this.triggerStat()},loadRevision:function(){var t=this;L["a"].getById(this.post_id,{type:"item"}).then((function(e){var i;t.wiki_post=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data})),this.triggerStat()},triggerStat:function(){"origin"==this.client?Object(I["b"])("origin_item",this.id):Object(I["b"])("item",this.id)}},mounted:function(){this.getHorse(),this.post_id?this.loadRevision():this.loadData()}},B=F,E=(i("03f7"),Object(m["a"])(B,s,a,!1,null,null,null));e["default"]=E.exports},"8c22":function(t,e,i){"use strict";i("ac04")},9307:function(t,e,i){"use strict";i("9911"),i("99af");var s=function(){var t=this,e=t._self._c;return e("WikiPanel",{staticClass:"c-wiki-revisions",attrs:{scene:"detail"}},[e("template",{slot:"head-title"},[e("i",{staticClass:"el-icon-time"}),e("span",[t._v("历史版本")])]),e("template",{slot:"body"},[e("div",{staticClass:"m-revisions-panel"},[t.versions&&t.versions.length?t._e():e("div",{staticClass:"u-empty"},[null===t.versions?e("span",[t._v("🎉 数据加载中...")]):t._e(),!1===t.versions?e("span",[t._v("⚠️ 数据加载异常")]):t._e(),t.versions&&!t.versions.length?e("span",[t._v("💧 暂无数据")]):t._e()]),t.versions&&t.versions.length?e("table",{staticClass:"m-histories"},[e("tr",[e("th",[t._v("版本")]),e("th",[t._v("更新时间")]),e("th",[t._v("贡献者")]),e("th",[t._v("修订说明")])]),t._l(t.versions,(function(i,s){return e("tr",{key:s,staticClass:"history"},[e("td",[e("a",{attrs:{href:t.link(t.type,"".concat(i.source_id,"/").concat(i.id))},domProps:{textContent:t._s("v"+(t.versions.length-s))},on:{click:function(e){return t.redirectRevision(i,e)}}})]),e("td",{domProps:{textContent:t._s(t.ts2str(i.updated))}}),e("td",[e("a",{attrs:{href:i.user_id?t.author_url(i.user_id):null},domProps:{textContent:t._s(i.user_nickname)}})]),e("td",{domProps:{textContent:t._s(i.remark)}})])}))],2):t._e()])])],2)},a=[],n=(i("caad"),i("2532"),i("fb6a"),i("ac1f"),i("5319"),i("662c")),r=i("1b86"),o=i("85e4"),c=i("65c2"),l={name:"WikiRevisions",props:["type","sourceId","isGame"],data:function(){return{versions:null}},computed:{client:function(){return location.href.includes("classic")||location.href.includes("origin")?"origin":"std"},baseUrl:function(){return"origin"==this.client?c["__OriginRoot"]:c["__Root"]},prefix:function(){return this.isGame?this.baseUrl.slice(0,-1):""}},methods:{link:function(t,e){return this.prefix+Object(o["getLink"])(t,e)},author_url:function(t){return this.prefix+Object(o["authorLink"])(t)},ts2str:o["ts2str"],redirectRevision:function(t,e){!this.isGame&&this.$router&&(e.preventDefault(),this.$router.replace({path:"/view/".concat(t.source_id,"/").concat(t.id)}))}},components:{WikiPanel:n["a"]},watch:{sourceId:{immediate:!0,handler:function(){var t=this;this.sourceId&&r["a"].versions({type:this.type,id:this.sourceId},{client:this.client}).then((function(e){e=e.data,t.versions=200===e.code&&e.data.versions}),(function(){t.versions=!1}))}}}},u=l,m=(i("68e8"),i("2877")),d=Object(m["a"])(u,s,a,!1,null,null,null);e["a"]=d.exports},"9fac":function(t,e,i){"use strict";i("e56e")},ac04:function(t,e,i){},ac13:function(t,e,i){},badb:function(t,e,i){},cee45:function(t,e,i){"use strict";i("ac13")},e56e:function(t,e,i){},ef56:function(t){t.exports=JSON.parse('{"13":{"mapName":"金水镇","coordinates":[{"x":51547,"y":17586,"z":1056512}]},"21":{"mapName":"巴陵县","coordinates":[{"x":59030,"y":46042,"z":1056448}]},"22":{"mapName":"南屏山","coordinates":[{"x":87058,"y":61930,"z":1116416}]},"23":{"mapName":"龙门荒漠","coordinates":[{"x":36139,"y":62593,"z":1065728}]},"30":{"mapName":"昆仑","coordinates":[{"x":36263,"y":72466,"z":1073792}]},"74":{"mapName":"帮会领地","coordinates":[{"x":17193,"y":25286,"z":1100032}]},"100":{"mapName":"白龙口","coordinates":[{"x":39766,"y":99090,"z":1120704}]},"101":{"mapName":"无量山","coordinates":[{"x":78670,"y":112690,"z":1054784}]},"104":{"mapName":"黑龙沼","coordinates":[{"x":82823,"y":102579,"z":1054400}]},"105":{"mapName":"苍山洱海","coordinates":[{"x":21128,"y":13890,"z":1140800}]},"216":{"mapName":"阴山大草原","coordinates":[{"x":87078,"y":40830,"z":1089088}]},"217":{"mapName":"黑戈壁","coordinates":[{"x":91514,"y":61046,"z":1077056}]},"411":{"mapName":"鲲鹏岛","coordinates":[{"x":82174,"y":102429,"z":1092224}]}}')},f252:function(t,e,i){"use strict";i.d(e,"d",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return c}));var s=i("41cb"),a=Object(s["e"])();function n(t){return a.get("/horses",{params:t})}function r(t){return a.get("/horse",{params:t})}function o(t){return a.get("/horse/attrs",{params:t})}function c(t){return a.get("/horse/feeds ",{params:t})}},f34a:function(t){t.exports=JSON.parse('[{"name":"浮云","mapList":["74","105","216","217","411"]},{"name":"绝群","mapList":["74","105","216","217","411"]},{"name":"逸骠","mapList":["74","105","216","217","411"]},{"name":"紫燕骝","mapList":["74","105","216","217","411"]},{"name":"绿螭骢","mapList":["74","105","216","217","411"]},{"name":"龙子","mapList":["13","21","23","216","217","411"]},{"name":"麟驹","mapList":["13","21","23","216","217","411"]},{"name":"绝尘","mapList":["22","30","100","101","216","217","411"]},{"name":"赤蛇","mapList":["22","30","100","101","216","217","411"]},{"name":"闪电","mapList":["22","30","100","101","216","217","411"]},{"name":"里飞沙","mapList":["104","216","217","411"]},{"name":"赤兔","mapList":["216","217","411"]}]')}}]);
//# sourceMappingURL=chunk-ca9ff4aa.2e8a43ef.js.map