(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a05bd54"],{"015b":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wrap",staticClass:"cross-wrapper",class:"m-".concat(t.type)},[t.isShow?[e("div",{staticClass:"cross cross-left",class:!t.isInLeft&&"active",style:{width:t.width+"px","border-top-left-radius":t.radius+"px","border-bottom-left-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toLeft.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-left"})]),e("div",{staticClass:"cross cross-right",class:!t.isInRight&&"active",style:{width:t.width+"px","border-top-right-radius":t.radius+"px","border-bottom-right-radius":t.radius+"px"},on:{click:function(e){return e.stopPropagation(),t.toRight.apply(null,arguments)}}},[e("i",{staticClass:"el-icon-caret-right"})])]:t._e(),e("div",{ref:"list",staticClass:"list"},t._l(t.list,(function(i,a){return e("div",{key:i.id||i.ID+i.ItemID||a,staticClass:"item",style:{"margin-right":t.gap+"px"}},[t._t("default",null,{item:i})],2)})),0)],2)},s=[],n=(i("a9e3"),{name:"Cross",props:{list:{type:Array,required:!0},width:{type:Number,default:60},gap:{type:Number,default:20},radius:{type:Number,default:10},offset:{type:Object,default:function(){return{top:0,left:0,right:0,bottom:0}}},type:{type:String,default:"rare"},arrow:{type:Number,default:1}},data:function(){return{scrollLeft:0,isInLeft:!0,isInRight:!1,isShow:!1}},methods:{toLeft:function(t){t.preventDefault(),this.isInRight=!1,this.scroll(-this.arrow)},toRight:function(t){t.preventDefault(),this.isInLeft=!1,this.scroll(this.arrow)},scroll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=this.$refs.list,a=i.scrollLeft,s=i.scrollWidth,n=i.clientWidth,o=n/2*e,r=null;r=setInterval((function(){e===t.arrow?(i.scrollLeft<a+o?i.scrollLeft+=Math.ceil(o/100):clearInterval(r),Math.ceil(i.scrollLeft+n)>=s&&(t.isInRight=!0,clearInterval(r))):e===-t.arrow&&(i.scrollLeft>a+o?i.scrollLeft+=Math.floor(o/100):clearInterval(r),i.scrollLeft<=0&&(t.isInLeft=!0,clearInterval(r)))}),1)}},mounted:function(){var t=this;this.$nextTick((function(){var e=t.$refs.list,i=e.clientWidth,a=e.scrollWidth;a>i&&(t.isShow=!0)}))}}),o=n,r=(i("685d"),i("2877")),l=Object(r["a"])(o,a,s,!1,null,null,null);e["a"]=l.exports},"0f22":function(t,e,i){},1750:function(t,e,i){"use strict";i("0f22")},"4c2b":function(t,e,i){},"626d":function(t,e,i){"use strict";i("6320")},6320:function(t,e,i){},"685d":function(t,e,i){"use strict";i("4c2b")},"8bbb":function(t,e,i){"use strict";i("a1cc")},a1cc:function(t,e,i){},ffda:function(t,e,i){"use strict";i.r(e);var a=i("5530"),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"p-book"},[e("CommonToolbar",{staticClass:"m-reputation-tabs",attrs:{color:"#d16400",search:"",types:t.professions},on:{update:t.updateToolbar}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listRef",staticClass:"m-content"},[0===t.active?t._l(t.list,(function(i,s){return e("div",{key:i.label+s,staticClass:"m-book-list"},[i.list.length?[8!==i.id?e("CardBannerList",{attrs:{count:t.count,minw:190,data:Object(a["a"])(Object(a["a"])({},t.itemData),{},{type:i.id}),items:i.list},on:{"update:load":t.handleLoad},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[t._v(" 【"+t._s(i.label)+"】 "),e("span",{staticClass:"u-tips"},[t._v(" 共"),e("b",[t._v(t._s(i.total)+" ")]),t._v("本"+t._s(i.label)+" ")])])]},proxy:!0},{key:"action",fn:function(){return[8!==i.id?e("div",{on:{click:function(e){return t.clickTabs(i.id)}}},[t._v("查看全部")]):t._e()]},proxy:!0},{key:"default",fn:function(i){var a=i.item;return[e("BookCard",{attrs:{item:a,reporter:{aggregate:t.listId(t.list)}},on:{click:function(e){return t.setItem(a)}}})]}}],null,!0)}):e("list-cross",{key:"recentRead",ref:"recentRead",refInFor:!0,attrs:{list:i.list,radius:10,gap:20},scopedSlots:t._u([{key:"default",fn:function(t){return[e("BookCard",{attrs:{item:t.item}})]}}],null,!0)})]:t._e()],2)})):e("div",{staticClass:"m-book-all"},[e("div",{staticClass:"m-book-list"},[e("div",{staticClass:"u-type u-all-type"},[e("div",{staticClass:"u-title"},[t._v(t._s(t.typeName))]),0!==t.active?e("div",{staticClass:"m-operate"},t._l(t.showTypes,(function(i){return e("div",{key:i.value+Math.random(),staticClass:"m-item",class:t.showType===i.value&&"active",on:{click:function(e){t.showType=i.value}}},[t._v(" "+t._s(i.label)+" ")])})),0):t._e()]),t.subList.length?["card"===t.showType?e("div",{staticClass:"m-book-list--card"},t._l(t.subList,(function(i){return e("BookCard",{key:i.ID+Math.random(),attrs:{item:i,reporter:{aggregate:t.listId(t.subList)}}})})),1):t._e(),"list"===t.showType?e("div",{staticClass:"m-book-list--list"},[e("ListHead"),t._l(t.subList,(function(i){return e("BookItem",{key:i.ID+Math.random(),attrs:{item:i,reporter:{aggregate:t.listId(t.subList)}}})}))],2):t._e()]:t._e(),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",plain:"",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"current-change":t.changePage}})],2)])],2)],1)},n=[],o=i("2909"),r=(i("99af"),i("4de4"),i("c740"),i("d81d"),i("b0c0"),i("e9c4"),i("b64b"),i("d3b7"),i("ac1f"),i("841c"),i("159b"),i("015b")),l=i("023b"),c=i("e5d7"),u=i("6b19"),d=i("ed08"),p=i("2ef0"),f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-book-card",on:{click:function(e){return t.go(t.item.idKey)}}},[e("div",{staticClass:"u-name"},[e("item-icon",{attrs:{item_id:String(t.item.ItemID),size:36,vertical:!0}})],1),e("div",{staticClass:"u-name"},[t._v(" "+t._s(this.getProfessionType(t.item.ExtendProfessionID1))+" ")]),e("div",{staticClass:"u-name"},[e("span",[t._v(t._s(t.item.BookName))])]),e("div",{staticClass:"u-name"},[e("span",[t._v(t._s(t.item.Desc))])]),e("div",{staticClass:"u-path",class:"其它"!==t.getOrigin(t.item)&&"special"},[e("span",[t._v(t._s(t.getOrigin(t.item)))])])])},h=[],v=(i("7db0"),i("14d9"),i("a9e3"),i("06f9")),g=(i("65c2"),i("fe6d")),m=i("782e"),b={name:"BookCard",components:{ItemIcon:v["a"]},props:{item:{type:Object,required:!0}},methods:{getProfessionType:function(t){return u.find((function(e){return e.id===Number(t)}))?u.find((function(e){return e.id===Number(t)})).name:""},go:function(t){this.$router.push("/".concat(t))},getOrigin:function(t){var e=t.DoodadTemplateID,i=t.ShopNames,a=t.drops||[],s=null===t||void 0===t?void 0:t.Quests,n="";return e&&(n=n+(n?"/":"")+(this.bookMapInfo[e]?"碑铭":"其它")),i&&(n=n+(n?"/":"")+"商店"),a.length&&(n=n+(n?"/":"")+"秘境"),s&&(n=n+(n?"/":"")+"任务"),n||(n="其它"),n}},computed:{client:function(){return this.$store.state.client},bookMapInfo:function(){return"std"===this.client?g:m}}},y=b,k=(i("1750"),i("2877")),_=Object(k["a"])(y,f,h,!1,null,"1eeb7326",null),w=_.exports,C=i("e9e6"),I=function(t,e){return e._m(0)},L=[function(t,e){return t("div",{staticClass:"m-list-head list-sticky-head"},[t("div",[e._v("名称")]),t("div",[e._v("类型")]),t("div",[e._v("套书")]),t("div",[e._v("描述")]),t("div",{staticStyle:{color:"#6f42c1"}},[e._v("来源")])])}],O={name:"ListHead"},x=O,j=(i("626d"),Object(k["a"])(x,I,L,!0,null,"4ca35dd0",null)),D=j.exports,T=i("2f62"),N=i("1339"),P={name:"Index",components:{CardBannerList:l["a"],CommonToolbar:c["a"],BookCard:C["a"],BookItem:w,ListHead:D,ListCross:r["a"]},data:function(){return{loading:!1,keyword:"",active:0,data:[],itemData:{color:"#324148",width:"250",height:"380"},list:[{id:8,label:"最近阅读",page:1,pages:1,total:0,list:[]},{id:11,label:"杂集",page:1,pages:1,total:0,list:[]},{id:10,label:"道学",page:1,pages:1,total:0,list:[]},{id:9,label:"佛学",page:1,pages:1,total:0,list:[]}],page:1,total:0,per:0,count:0,showTypes:[{value:"list",label:"列表"},{value:"card",label:"卡片"}],showType:"card",appendMode:!1}},computed:Object(a["a"])(Object(a["a"])({professions:function(){var t=u.filter((function(t){return 8!==t.id})).map((function(t){return t.label=t.name,t.value=t.id,t}));return[{id:0,value:-1,name:"全部",label:"全部"}].concat(Object(o["a"])(t))}},Object(T["b"])(["recentReadList"])),{},{client:function(){return this.$store.state.client},params:function(){var t={client:this.client};return this.keyword&&(t.keyword=this.keyword),this.active&&(t.profession=this.active),t},typeName:function(){var t=this;return this.list.filter((function(e){return e.id==t.active}))[0].label},hasNextPage:function(){var t=this,e=this.list.filter((function(e){return e.id==t.active}))[0].pages;return e>1&&this.page<e},subList:function(){var t=this;return 0===this.active?null:this.list.filter((function(e){return e.id==t.active}))[0].list},isPhone:function(){return Object(d["b"])()},readingBook:function(){return localStorage.getItem("book_readings")||"[]"}}),watch:{params:{deep:!0,handler:function(){this.loadData()}},active:{immediate:!0,handler:function(){this.page=1}}},methods:{updateToolbar:function(t){var e=t.type,i=t.search;this.keyword=i,this.clickTabs(e)},clickTabs:function(t){this.active=-1==t?0:t,this.list=this.list.map((function(t){return t.page=1,t})),this.page=1},listId:function(t){return null!==t&&void 0!==t&&t.length?t.map((function(t){return t.ID})):[]},changePage:function(t){this.page=t,this.loadData()},setItem:function(t){var e=localStorage.getItem("book_readings")||"[]",i=[t].concat(Object(o["a"])(JSON.parse(e)));this.list[0].list.unshift(t),localStorage.setItem("book_readings",JSON.stringify(i))},showCount:function(){var t;if(this.isPhone)return this.per=8,void(this.count=8);var e=(null===(t=this.$refs.listRef)||void 0===t?void 0:t.clientWidth)-120;this.count=Math.floor(e/this.itemData.width),this.per=this.count},appendPage:function(){this.appendMode=!0,this.handleLoad(this.active,!0)},handleLoad:function(t,e){var i=this.list.filter((function(e){return e.id==t}))[0].page,a=Object(p["cloneDeep"])(this.params);a.page=i+1,a.per=e?3*this.count:this.per,a.profession=t,this.loadList(a,t)},loadData:function(){var t=this;this.loading=!0;var e=Object(p["omit"])(this.params,["profession"]);if(0===this.active){var i=this.list.filter((function(t){return 8!==t.id}));i.forEach((function(i){e.page=i.page,e.profession=i.id,e.per=t.per,t.loadList(e,i.id)}))}else e.page=this.page,e.per=3*this.count,this.loadList(Object(a["a"])(Object(a["a"])({},e),{},{profession:this.active}),this.active)},loadList:function(t,e){var i=this,a=this.list.findIndex((function(t){return t.id==e}));this.list[a].pages<t.page&&0===this.active&&(t.page=1),Object(N["b"])(t).then((function(t){var e=t.data,s=e.list,n=e.total,o=e.pages,r=e.page,l=e.per,c=i.appendMode?Object(p["concat"])(i.list[a].list,s):s;i.list[a].list=c||[],i.list[a].page=r||1,i.list[a].pages=o||1,i.list[a].total=n||0,0!==i.active&&(i.page=r||1),i.total=n,i.per=l})).finally((function(){i.loading=!1,i.appendMode=!1}))}},mounted:function(){this.showCount(),this.recentReadList.length&&(this.list[0].list=this.recentReadList,this.list[0].total=this.recentReadList.length)}},R=P,S=(i("8bbb"),Object(k["a"])(R,s,n,!1,null,null,null));e["default"]=S.exports}}]);
//# sourceMappingURL=chunk-5a05bd54.650b9238.js.map