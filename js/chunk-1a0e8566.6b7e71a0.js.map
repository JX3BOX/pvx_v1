{"version":3,"sources":["webpack:///./src/views/face/single.vue?db41","webpack:///./src/views/face/single.vue","webpack:///src/views/face/single.vue","webpack:///./src/views/face/single.vue?082d","webpack:///./src/views/face/single.vue?e65c"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","loading","expression","staticClass","attrs","on","goBack","_v","nativeOn","$event","type","indexOf","_k","keyCode","key","getFaceList","apply","arguments","model","search","callback","$$v","slot","post","original","user_id","user_avatar","user_avatar_frame","_e","_s","title","authorLink","display_name","author_link","author_name","updated_at","canEdit","editLink","id","star","class","client","showClientLabel","body_type","showBodyTypeLabel","remark","previewSrcList","length","showPic","activePic","carouselChange","_l","item","i","ref","refInFor","handlePreviewImage","price_type","has_buy","price_count","payBtnLoading","facePay","facedata","downFileList","created_at","getDownUrl","uuid","randomList","images","staticRenderFns","components","Comment","data","stat","client_map","downloadParams","pageIndex","pageSize","total","carouselActive","computed","isAuthor","watch","created","methods","showAvatar","showThumbnail","query","document","setTimeout","imageViewerChild","getData","getOneFaceInfo","then","catch","getStat","postStat","downloadPageQuery","getAccessoryList","finally","window","postType","PostId","priceType","priceCount","accessUserId","payUserId","payFace","loopPayStatus","getPayFaceStatus","clearInterval","message","getRandomFaceList","limit","getRandomFace","component"],"mappings":"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C,mBACA,gBAEAC,SACAC,uBACA,uCAEAC,0BACA,yCAEAvD,2BACAM,uBACAtB,uBACA,mBAAAjB,YAAAyF,OAAAzD,sBAEAxB,kBACAkF,+BACA,mBAAA1F,eAEA4C,4BACA,2BAEAE,8BACA,kBAEAM,2BACA,uBAEAM,+BAAA,WACAiC,uBACA,2CACAC,aACAA,iBACA,IAEAC,mBAAA,WACA,UACA,gBACAC,wBACAC,kBACA,6CACAL,4BACA,qBAEA,yBAEAM,mBACA,gBAGAC,iDACA,iBAEAC,iCAGAC,8BACA,gCACA,yBAEAC,4BAAA,WACAA,4CACAL,kBACA,kBACA,oBACA,YACA,sBACA,wCAGAM,oBACA,iBAGAlC,uBACAA,4CAAA,MACAmC,yEAGAvC,mBAAA,WACA,YACA,GACAwC,gBACAC,YACAC,uBACAC,yBACAC,uBACAC,gCAGA,sBACAC,oCACA,qBAEA,cACAC,oCACA,+CACA,UAIAC,+BACA,MACA,sBACAC,iBAEA,eACA,sBACAhF,WACAiF,kBAEA,OACA,sBACAD,iBACA,oBACAhF,WACAiF,mBAIAC,6BAAA,WACA,YACA,GACAvF,kBACAwF,SAEAC,oCACA,8CACA,mCAIAlE,oBACA,2CCvW6Z,I,wBCQzZmE,EAAY,eACd,EACA3H,EACA6E,GACA,EACA,KACA,KACA,MAIa,aAAA8C,E","file":"js/chunk-1a0e8566.6b7e71a0.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./single.vue?vue&type=style&index=0&id=31b4a1a4&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"v-face-single\"},[_c('div',{staticClass:\"m-navigation\"},[_c('el-button',{staticClass:\"u-goback\",attrs:{\"size\":\"medium\",\"icon\":\"el-icon-arrow-left\",\"plain\":\"\"},on:{\"click\":_vm.goBack}},[_vm._v(\"返回列表\")]),_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入搜索内容\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.getFaceList.apply(null, arguments)}},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"关键词\")]),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getFaceList},slot:\"append\"})],1)],1),_c('div',{staticClass:\"m-header\"},[(!!_vm.post.original)?_c('Avatar',{staticClass:\"u-avatar\",attrs:{\"uid\":_vm.post.user_id,\"url\":_vm.post.user_avatar,\"frame\":_vm.post.user_avatar_frame}}):_vm._e(),_c('h2',{staticClass:\"u-title\"},[_vm._v(_vm._s(_vm.post.title || \"无标题\"))]),_c('div',{staticClass:\"u-info\"},[_c('div',{staticClass:\"u-author\"},[_vm._v(\" By \"),(!!_vm.post.original)?_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm.authorLink(_vm.post.user_id),\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.post.display_name))]):(_vm.post.author_link)?_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm.post.author_link,\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.post.author_name))]):_c('span',{staticClass:\"u-name\"},[_vm._v(_vm._s(_vm.post.author_name))]),_c('time',{staticClass:\"u-time\"},[_vm._v(_vm._s(_vm.post.updated_at))]),(_vm.canEdit)?_c('a',{attrs:{\"href\":_vm.editLink('face', _vm.post.id),\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-edit-outline u-edit-icon\"}),_vm._v(\" 编辑 \")]):_vm._e()]),_c('div',{staticClass:\"u-meta\"},[(!!_vm.post.star)?_c('i',{staticClass:\"u-mark\"},[_vm._v(\"★ 编辑推荐\")]):_vm._e(),(!!_vm.post.original)?_c('i',{staticClass:\"u-original\"},[_vm._v(\"原创\")]):_vm._e(),_c('i',{staticClass:\"u-client\",class:_vm.post.client || 'std'},[_vm._v(_vm._s(_vm.showClientLabel(_vm.post.client)))]),(_vm.post.body_type)?_c('i',{staticClass:\"u-bodytype\",class:'u-bodytype-' + _vm.post.body_type},[_vm._v(_vm._s(_vm.showBodyTypeLabel(_vm.post.body_type)))]):_vm._e()])]),(_vm.post.remark)?_c('div',{staticClass:\"u-desc\"},[_vm._v(_vm._s(_vm.post.remark))]):_vm._e(),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-pie-chart\"}),_vm._v(\" 预览\")])],1),(_vm.previewSrcList && _vm.previewSrcList.length > 0)?_c('div',{staticClass:\"m-single-pics\"},[_c('div',{staticClass:\"u-bg\"},[_c('img',{attrs:{\"src\":_vm.showPic(_vm.activePic)}}),_c('div',{staticClass:\"u-mask\"})]),_c('el-carousel',{staticClass:\"m-carousel\",attrs:{\"interval\":4000,\"type\":\"card\",\"arrow\":\"always\"},on:{\"change\":_vm.carouselChange}},_vm._l((_vm.previewSrcList),function(item,i){return _c('el-carousel-item',{key:i},[_c('div',{staticClass:\"m-face-pic\"},[_c('el-image',{ref:\"previewImage\",refInFor:true,staticClass:\"u-pic\",attrs:{\"fit\":\"contain\",\"src\":_vm.showPic(item),\"preview-src-list\":_vm.previewSrcList},on:{\"!click\":function($event){return _vm.handlePreviewImage(i)}}})],1)])}),1)],1):_vm._e(),(_vm.post.price_type && _vm.post.price_type != 0 && !_vm.has_buy)?_c('div',{staticClass:\"m-face-pay\"},[_c('div',{staticClass:\"m-face-pay-info\"},[_vm._v(\" 价格： \"),_c('el-tag',{attrs:{\"effect\":\"plain\",\"type\":\"warning\"}},[(_vm.post.price_type == 1)?_c('span',[_vm._v(_vm._s(_vm.post.price_count)+\" 盒币\")]):_vm._e(),(_vm.post.price_type == 2)?_c('span',[_vm._v(_vm._s(_vm.post.price_count)+\" 金箔\")]):_vm._e()])],1),_c('div',{staticClass:\"m-face-pay-btn\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"icon\":\"el-icon-shopping-cart-2\",\"loading\":_vm.payBtnLoading},on:{\"click\":_vm.facePay}},[_vm._v(\"购买\")])],1)]):_vm._e(),(_vm.has_buy && _vm.facedata)?_c('div',{staticClass:\"m-single-data\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"独家数据分析\")]),(_vm.facedata)?_c('facedata',{attrs:{\"data\":_vm.facedata}}):_vm._e()],1):_vm._e(),(_vm.has_buy && _vm.downFileList && _vm.downFileList.length > 0)?_c('div',{staticClass:\"m-face-files\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"原始文件列表\")]),_c('ul',{staticClass:\"m-face-files-list\"},_vm._l((_vm.downFileList),function(item){return _c('li',{key:item.id},[_c('span',{staticClass:\"u-label\"},[_vm._v(\"版本 : \"+_vm._s(item.created_at))]),_c('el-button',{staticClass:\"u-action\",attrs:{\"icon\":\"el-icon-download\",\"size\":\"mini\",\"type\":\"primary\",\"round\":\"\"},on:{\"click\":function($event){return _vm.getDownUrl(item.uuid)}}},[_vm._v(\"下载\")])],1)}),0)],1):_vm._e(),_c('div',{staticClass:\"m-author\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"上传作者\")]),_c('a',{staticClass:\"u-author-info\",attrs:{\"href\":_vm.authorLink(_vm.post.user_id),\"target\":\"_blank\"}},[_c('Avatar',{staticClass:\"u-avatar\",attrs:{\"uid\":_vm.post.user_id,\"url\":_vm.post.user_avatar,\"frame\":_vm.post.user_avatar_frame}}),_c('div',{staticClass:\"u-name\"},[_vm._v(_vm._s(_vm.post.display_name))])],1)],1),_c('div',{staticClass:\"m-random-list\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"作者其他作品\")]),_c('div',{staticClass:\"u-list\"},_vm._l((_vm.randomList),function(item){return _c('a',{key:item.id,staticClass:\"u-item\",attrs:{\"href\":`/face/` + item.id,\"target\":\"_blank\"}},[_c('div',{staticClass:\"u-pic\"},[(item.images)?_c('el-image',{attrs:{\"fit\":\"cover\",\"src\":_vm.showPic(item.images[0])}},[_c('div',{staticClass:\"u-image-slot\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_c('i',{staticClass:\"el-icon-picture-outline\"})])]):_vm._e()],1),_c('div',{staticClass:\"u-name\",attrs:{\"title\":item.title}},[_vm._v(_vm._s(item.title || \"未命名\"))])])}),0)],1),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":\"face\",\"postTitle\":_vm.post.title || '无标题',\"userId\":_vm.post.user_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true}}),_c('div',[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"讨论\")]),_c('Comment',{attrs:{\"id\":_vm.id,\"category\":\"face\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"v-face-single\" v-loading=\"loading\">\n        <div class=\"m-navigation\">\n            <el-button class=\"u-goback\" size=\"medium\" icon=\"el-icon-arrow-left\" @click=\"goBack\" plain\n                >返回列表</el-button\n            >\n            <el-input\n                placeholder=\"请输入搜索内容\"\n                v-model=\"search\"\n                class=\"input-with-select\"\n                @keyup.enter.native=\"getFaceList\"\n            >\n                <span slot=\"prepend\">关键词</span>\n                <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getFaceList\"></el-button>\n            </el-input>\n        </div>\n        <!-- 海报banner -->\n        <!-- <div class=\"m-banner\" v-if=\"post.banner\">\n            <img :src=\"showThumbnail(post.banner)\" />\n        </div> -->\n        <!-- 基本信息 -->\n        <div class=\"m-header\">\n            <Avatar\n                :uid=\"post.user_id\"\n                :url=\"post.user_avatar\"\n                :frame=\"post.user_avatar_frame\"\n                class=\"u-avatar\"\n                v-if=\"!!post.original\"\n            />\n            <h2 class=\"u-title\">{{ post.title || \"无标题\" }}</h2>\n            <div class=\"u-info\">\n                <div class=\"u-author\">\n                    By\n                    <a class=\"u-name\" :href=\"authorLink(post.user_id)\" target=\"_blank\" v-if=\"!!post.original\">{{\n                        post.display_name\n                    }}</a>\n                    <a class=\"u-name\" :href=\"post.author_link\" target=\"_blank\" v-else-if=\"post.author_link\">{{\n                        post.author_name\n                    }}</a>\n                    <span class=\"u-name\" v-else>{{ post.author_name }}</span>\n                    <time class=\"u-time\">{{ post.updated_at }}</time>\n                    <a v-if=\"canEdit\" :href=\"editLink('face', post.id)\" target=\"_blank\">\n                        <i class=\"el-icon-edit-outline u-edit-icon\"></i>\n                        编辑\n                    </a>\n                </div>\n\n                <div class=\"u-meta\">\n                    <i class=\"u-mark\" v-if=\"!!post.star\">★ 编辑推荐</i>\n                    <i class=\"u-original\" v-if=\"!!post.original\">原创</i>\n                    <i class=\"u-client\" :class=\"post.client || 'std'\">{{ showClientLabel(post.client) }}</i>\n                    <i class=\"u-bodytype\" :class=\"'u-bodytype-' + post.body_type\" v-if=\"post.body_type\">{{\n                        showBodyTypeLabel(post.body_type)\n                    }}</i>\n                </div>\n            </div>\n            <div class=\"u-desc\" v-if=\"post.remark\">{{ post.remark }}</div>\n            <el-divider content-position=\"left\"> <i class=\"el-icon-pie-chart\"></i> 预览</el-divider>\n        </div>\n\n        <div class=\"m-single-pics\" v-if=\"previewSrcList && previewSrcList.length > 0\">\n            <!-- 动态改为当前图片 -->\n            <div class=\"u-bg\">\n                <img :src=\"showPic(activePic)\" />\n                <div class=\"u-mask\"></div>\n            </div>\n            <el-carousel class=\"m-carousel\" :interval=\"4000\" type=\"card\" arrow=\"always\" @change=\"carouselChange\">\n                <el-carousel-item v-for=\"(item, i) in previewSrcList\" :key=\"i\">\n                    <div class=\"m-face-pic\">\n                        <el-image\n                            ref=\"previewImage\"\n                            fit=\"contain\"\n                            :src=\"showPic(item)\"\n                            class=\"u-pic\"\n                            :preview-src-list=\"previewSrcList\"\n                            @click.capture=\"handlePreviewImage(i)\"\n                        ></el-image>\n                    </div>\n                </el-carousel-item>\n            </el-carousel>\n        </div>\n        <!-- 购买区 -->\n        <div class=\"m-face-pay\" v-if=\"post.price_type && post.price_type != 0 && !has_buy\">\n            <div class=\"m-face-pay-info\">\n                价格：\n                <el-tag effect=\"plain\" type=\"warning\">\n                    <span v-if=\"post.price_type == 1\">{{ post.price_count }} 盒币</span>\n                    <span v-if=\"post.price_type == 2\">{{ post.price_count }} 金箔</span>\n                </el-tag>\n            </div>\n            <div class=\"m-face-pay-btn\">\n                <el-button\n                    type=\"primary\"\n                    size=\"small\"\n                    icon=\"el-icon-shopping-cart-2\"\n                    @click=\"facePay\"\n                    :loading=\"payBtnLoading\"\n                    >购买</el-button\n                >\n            </div>\n        </div>\n\n        <!-- 数据区 -->\n        <div class=\"m-single-data\" v-if=\"has_buy && facedata\">\n            <el-divider content-position=\"left\">独家数据分析</el-divider>\n            <facedata v-if=\"facedata\" :data=\"facedata\" />\n        </div>\n        <!--下载区-->\n        <div class=\"m-face-files\" v-if=\"has_buy && downFileList && downFileList.length > 0\">\n            <el-divider content-position=\"left\">原始文件列表</el-divider>\n            <ul class=\"m-face-files-list\">\n                <li v-for=\"item in downFileList\" :key=\"item.id\">\n                    <span class=\"u-label\">版本 : {{ item.created_at }}</span>\n                    <el-button\n                        class=\"u-action\"\n                        icon=\"el-icon-download\"\n                        size=\"mini\"\n                        type=\"primary\"\n                        round\n                        @click=\"getDownUrl(item.uuid)\"\n                        >下载</el-button\n                    >\n                </li>\n            </ul>\n        </div>\n        <!-- 上传作者区域 -->\n        <div class=\"m-author\">\n            <el-divider content-position=\"left\">上传作者</el-divider>\n            <a class=\"u-author-info\" :href=\"authorLink(post.user_id)\" target=\"_blank\">\n                <Avatar :uid=\"post.user_id\" :url=\"post.user_avatar\" :frame=\"post.user_avatar_frame\" class=\"u-avatar\" />\n                <div class=\"u-name\">{{ post.display_name }}</div>\n            </a>\n        </div>\n        <!--作者随机作品-->\n        <div class=\"m-random-list\">\n            <el-divider content-position=\"left\">作者其他作品</el-divider>\n            <div class=\"u-list\">\n                <a class=\"u-item\" :href=\"`/face/` + item.id\" target=\"_blank\" v-for=\"item in randomList\" :key=\"item.id\">\n                    <div class=\"u-pic\">\n                        <el-image v-if=\"item.images\" fit=\"cover\" :src=\"showPic(item.images[0])\">\n                            <div slot=\"error\" class=\"u-image-slot\">\n                                <i class=\"el-icon-picture-outline\"></i>\n                            </div>\n                        </el-image>\n                    </div>\n                    <div class=\"u-name\" :title=\"item.title\">{{ item.title || \"未命名\" }}</div>\n                </a>\n            </div>\n        </div>\n        <!-- 点赞 -->\n        <Thx\n            class=\"m-thx\"\n            :postId=\"id\"\n            postType=\"face\"\n            :postTitle=\"post.title || '无标题'\"\n            :userId=\"post.user_id\"\n            :adminBoxcoinEnable=\"true\"\n            :userBoxcoinEnable=\"true\"\n        />\n        <!-- 评论 -->\n        <div>\n            <el-divider content-position=\"left\">讨论</el-divider>\n            <Comment :id=\"id\" category=\"face\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport { getOneFaceInfo, payFace, loopPayStatus, getAccessoryList, getDownUrl, getRandomFace } from \"@/service/face.js\";\nimport { getStat, postStat } from \"@jx3box/jx3box-common/js/stat\";\nimport facedata from \"@jx3box/jx3box-facedat/src/Facedat.vue\";\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport {\n    editLink,\n    showMinibanner,\n    showBanner,\n    showAvatar,\n    authorLink,\n    resolveImagePath,\n} from \"@jx3box/jx3box-common/js/utils\";\nimport User from \"@jx3box/jx3box-common/js/user\";\nimport { bodyMap } from \"@jx3box/jx3box-data/data/role/body.json\";\nimport { __clients } from \"@jx3box/jx3box-common/data/jx3box.json\";\nexport default {\n    name: \"single\",\n    components: { facedata, Comment },\n    data: function () {\n        return {\n            loading: false,\n            search: \"\", //搜索值\n            post: {},\n            stat: {},\n            has_buy: false, //是否购买\n            client_map: __clients,\n            downFileList: [],\n            downloadParams: {\n                pageIndex: 1,\n                pageSize: 4,\n                total: 0,\n            },\n            payBtnLoading: false,\n            randomList: [],\n            carouselActive: 0,\n        };\n    },\n    computed: {\n        id: function () {\n            return this.$route.params.id;\n        },\n        isAuthor: function () {\n            return this.post?.user_id == User.getInfo().uid || false;\n        },\n        facedata: function () {\n            return this.post?.data || \"\";\n        },\n        previewSrcList: function () {\n            return this.post?.images || [];\n        },\n        canEdit: function () {\n            return User.isEditor() || this.post?.user_id == User.getInfo().uid;\n        },\n        activePic: function () {\n            return this.previewSrcList[this.carouselActive];\n        },\n    },\n    watch: {},\n    created: function () {\n        this.getData();\n    },\n    methods: {\n        showAvatar(url) {\n            return showAvatar(url, \"l\");\n        },\n        showThumbnail(url) {\n            return resolveImagePath(url);\n        },\n        authorLink,\n        editLink,\n        getFaceList() {\n            this.$router.push({ name: \"list\", query: { title: this.search } });\n        },\n        goBack() {\n            document.title = \"捏脸分享 - JX3BOX\";\n            this.$router.push({ name: \"list\" });\n        },\n        showClientLabel: function (val) {\n            return this.client_map[val];\n        },\n        showBodyTypeLabel(val) {\n            return bodyMap[val];\n        },\n        carouselChange(val) {\n            this.carouselActive = val;\n        },\n        handlePreviewImage(index) {\n            setTimeout(() => {\n                const imageViewerChild = this.$refs.previewImage[index].$children[0];\n                imageViewerChild && imageViewerChild.reset();\n                imageViewerChild && (imageViewerChild.index = index);\n            }, 0);\n        },\n        getData() {\n            if (this.id) {\n                this.loading = true;\n                getOneFaceInfo(this.id)\n                    .then((res) => {\n                        this.post = this.$store.state.faceSingle = res.data.data;\n                        document.title = this.post.title;\n                        this.getAccessoryList();\n                        //获取作者作品\n                        this.getRandomFaceList();\n                    })\n                    .catch((err) => {\n                        this.loading = false;\n                    });\n\n                getStat(\"face\", this.id).then((res) => {\n                    this.stat = res.data;\n                });\n                postStat(\"face\", this.id);\n            }\n        },\n        downloadPageQuery(pageIndex) {\n            this.downloadParams.pageIndex = pageIndex;\n            this.getAccessoryList();\n        },\n        getAccessoryList() {\n            getAccessoryList(this.id, this.downloadParams)\n                .then((res) => {\n                    let data = res.data.data;\n                    this.has_buy = data.has_buy;\n                    if (data.has_buy) {\n                        this.downFileList = data.list;\n                        this.downloadParams.total = data.page.total;\n                    }\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        getDownUrl(uuid) {\n            getDownUrl(this.id, uuid).then((res) => {\n                window.location.href = res.data.data?.url;\n            });\n        },\n        facePay() {\n            let res = this.post;\n            let params = {\n                postType: \"face\",\n                PostId: res.id,\n                priceType: res.price_type,\n                priceCount: res.price_count,\n                accessUserId: res.user_id,\n                payUserId: User.getInfo().uid,\n            };\n            //支付\n            this.payBtnLoading = true;\n            payFace(params).then((res) => {\n                let payid = res.data.data.id;\n                // 轮询接口\n                let setIntervalId = setInterval(\n                    loopPayStatus(payid).then((d) => {\n                        this.getPayFaceStatus(d.data.data.pay_status, setIntervalId);\n                    }, 1000)\n                );\n            });\n        },\n        getPayFaceStatus(pay_status, setIntervalId) {\n            if (pay_status == 1) {\n                this.payBtnLoading = false;\n                clearInterval(setIntervalId);\n                //购买成功后需要重载数据，拉取下载列表\n                this.getData();\n                this.$notify.success({\n                    title: \"成功\",\n                    message: \"购买成功\",\n                });\n            } else if (pay_status == 2) {\n                this.payBtnLoading = false;\n                clearInterval(setIntervalId);\n                this.$notify.error({\n                    title: \"失败\",\n                    message: \"支付失败\",\n                });\n            }\n        },\n        getRandomFaceList() {\n            let post = this.post;\n            let params = {\n                user_id: post.user_id,\n                limit: 8,\n            };\n            getRandomFace(params).then((res) => {\n                if (res.data.data.list && res.data.data.list.length > 0) {\n                    this.randomList = res.data.data.list;\n                }\n            });\n        },\n        showPic(url) {\n            return resolveImagePath(url);\n        },\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/face/single.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./single.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./single.vue?vue&type=template&id=31b4a1a4&\"\nimport script from \"./single.vue?vue&type=script&lang=js&\"\nexport * from \"./single.vue?vue&type=script&lang=js&\"\nimport style0 from \"./single.vue?vue&type=style&index=0&id=31b4a1a4&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}