{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue?049b","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./src/views/face/Parse.vue","webpack:///src/views/face/Parse.vue","webpack:///./src/views/face/Parse.vue?99e2","webpack:///./src/views/face/Parse.vue?3bdc","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue","webpack:///node_modules/@jx3box/jx3box-facedat/src/Upload.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue?8ad8","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Upload.vue?55fa","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue?79c6","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/fixOldData.js","webpack:///node_modules/@jx3box/jx3box-facedat/src/Facedat.vue","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue?e0f2","webpack:///./node_modules/@jx3box/jx3box-facedat/src/Facedat.vue?ad63","webpack:///./src/views/face/Parse.vue?4054"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","r","l","t","Symbol","iterator","e","n","i","u","a","f","o","call","next","Object","done","push","value","length","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","$","$entries","entries","target","stat","O","render","_vm","this","_c","_self","staticClass","class","on","_v","attrs","handleSuccess","directives","name","rawName","expression","json","staticRenderFns","props","data","computed","methods","mounted","components","Facedat","Upload","component","support","resetData","filename","uploadData","selectData","_s","btnText","type","_e","String","default","file","object","types","bodyMap","txt","fileInput","document","getElementById","dispatchEvent","MouseEvent","files","parseData","vm","fr","FileReader","onload","console","log","parseFace","result","tBody","load","$notify","error","title","message","ex","$emit","_vm$types$vm$object$n","JSON","stringify","concat","nRoleType","toString","label","onerror","readAsArrayBuffer","filters","created","window","ready","tab_type","model","active","callback","$$v","_l","group","key","dict","facedata","bone_range","body_type","lock","$set","cleandata","clean","checkdecal_prop","getDecalIcon","getDecalName","getDecalIsFlip","showDecalFree","showDecalPrice","getDecorationIcon","getDecorationName","showDecorationPrice","total_coin","ref","$event","buildData","fixOldData","olddata","newdata","tBone","tDecal","misc","decal","forEach","nShowID","item","decal_group","version","decalMap","decorationMap","_cleandata","_","cloneDeep","nDecorationID","CanUseInCreate","decal_default","client","_this$facedata","_nMajorVersion","nMajorVersion","output_std","amendVersion","amendBone","output_origin","origin","includes","prop","decal_prop","output","table","format","eol","spaces","slice","sum","_i","_Object$entries","_Object$entries$_i","watch","deep","handler","$forceUpdate","immediate","val","fetchDecal","fetchDecoration","parse","status","get","iconid","__iconPath","_this$decalMap","_this$decalMap$this$b","_this$decalMap$this$b2","_this$decalMap$this$b3","_dict$key","_this$decalMap2","_this$decalMap2$this$","_this$decalMap2$this$2","_this$decalMap2$this$3","_dict$key2","CoinPrice","id","v","outputWithHeader","dumpFace","blob","Blob","saveAs","Date","now","versions","nVersion","_bone","bone_default","_fixbone","assign","amendDecal","fetchWithLocalStorage","url","onFetch","localData","sessionStorage","getItem","axios","then","res","setItem","_this","arguments","undefined","__ossMirror","_this2"],"mappings":"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","file":"js/chunk-63e11db2.2b8bea6b.js","sourcesContent":["export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Upload.vue?vue&type=style&index=0&id=5689071a&prod&lang=less&\"","'use strict';\nvar $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"m-facedata\"},[_c('div',{staticClass:\"m-face-parse\",class:{ on: _vm.done }},[_c('h1',{staticClass:\"m-face-parse-title\"},[_vm._v(\"捏脸数据解析器\")]),_c('Upload',{attrs:{\"type\":\"face\"},on:{\"success\":_vm.handleSuccess}}),_c('Facedat',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.done),expression:\"done\"}],staticClass:\"m-face-parse-preview\",attrs:{\"data\":_vm.json,\"lock\":false}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"m-facedata\">\n        <div class=\"m-face-parse\" :class=\"{ on: done }\">\n            <h1 class=\"m-face-parse-title\">捏脸数据解析器</h1>\n            <Upload type=\"face\" @success=\"handleSuccess\" />\n            <Facedat class=\"m-face-parse-preview\" :data=\"json\" :lock=\"false\" v-show=\"done\" />\n        </div>\n    </div>\n</template>\n\n<script>\nimport Facedat from \"@jx3box/jx3box-facedat/src/Facedat\";\nimport Upload from \"@jx3box/jx3box-facedat/src/Upload\";\nimport { __imgPath } from \"@jx3box/jx3box-common/data/jx3box.json\";\nexport default {\n    name: \"FacedataParse\",\n    props: [],\n    data: function () {\n        return {\n            data: \"\",\n            done: false,\n        };\n    },\n    computed: {\n        json: function () {\n            return this.data && this.data.json;\n        },\n    },\n    methods: {\n        handleSuccess: function (data) {\n            this.data = data;\n            if (data?.json) {\n                this.done = true;\n            } else {\n                this.done = false;\n            }\n        },\n    },\n    mounted: function () {\n    },\n    components: {\n        Facedat,\n        Upload,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/face/parse.less\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Parse.vue?vue&type=template&id=322c0e0a&\"\nimport script from \"./Parse.vue?vue&type=script&lang=js&\"\nexport * from \"./Parse.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Parse.vue?vue&type=style&index=0&id=322c0e0a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"c-facedat-upload\"},[(_vm.support)?_c('div',{staticClass:\"u-upload\"},[(!_vm.done)?[_c('input',{staticClass:\"u-input\",attrs:{\"type\":\"file\",\"id\":\"face_file\",\"accept\":\".dat,.jx3dat,.ini\"},on:{\"change\":_vm.uploadData}}),_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-upload2\"},on:{\"click\":_vm.selectData}},[_vm._v(_vm._s(_vm.btnText))]),(_vm.type === 'face')?_c('a',{staticClass:\"u-help\",attrs:{\"href\":\"/tool/746\",\"target\":\"_blank\"}},[_c('i',{staticClass:\"el-icon-collection\"}),_vm._v(\" 游戏脸型导入导出指南 \")]):_vm._e()]:[_c('div',{staticClass:\"u-result\"},[_c('el-button',{staticClass:\"u-reset\",attrs:{\"icon\":\"el-icon-refresh-left\"},on:{\"click\":_vm.resetData}},[_vm._v(\"清空重置\")]),_c('el-alert',{attrs:{\"title\":'当前文件为：' + _vm.filename,\"type\":\"success\",\"show-icon\":\"\"}})],1)]],2):_c('el-alert',{staticClass:\"u-notsupport\",attrs:{\"title\":\"浏览器不支持\",\"type\":\"warning\",\"description\":\"你的浏览器太老旧不支持本地读取,请更换chrome或其它现代浏览器\",\"show-icon\":\"\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"c-facedat-upload\">\n\t\t<div class=\"u-upload\" v-if=\"support\">\n\t\t\t<template v-if=\"!done\">\n\t\t\t\t<input class=\"u-input\" type=\"file\" id=\"face_file\" accept=\".dat,.jx3dat,.ini\" @change=\"uploadData\" />\n\t\t\t\t<el-button class=\"u-btn\" type=\"primary\" @click=\"selectData\" icon=\"el-icon-upload2\">{{ btnText }}</el-button>\n\t\t\t\t<a v-if=\"type === 'face'\" class=\"u-help\" href=\"/tool/746\" target=\"_blank\"> <i class=\"el-icon-collection\"></i> 游戏脸型导入导出指南 </a>\n\t\t\t</template>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"u-result\">\n\t\t\t\t\t<el-button class=\"u-reset\" @click=\"resetData\" icon=\"el-icon-refresh-left\">清空重置</el-button>\n\t\t\t\t\t<el-alert :title=\"'当前文件为：' + filename\" type=\"success\" show-icon></el-alert>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<el-alert v-else class=\"u-notsupport\" title=\"浏览器不支持\" type=\"warning\" description=\"你的浏览器太老旧不支持本地读取,请更换chrome或其它现代浏览器\" show-icon></el-alert>\n\t</div>\n</template>\n\n<script>\nimport { parseFace } from \"./faceParser.js\";\nimport { load } from \"./bodyParser.js\";\nimport types from \"../assets/data/index.json\";\n\nexport default {\n\tname: \"Upload\",\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\",\n\t\t},\n\t},\n\tcomponents: {},\n\tdata: function () {\n\t\treturn {\n\t\t\tsupport: true,\n\n\t\t\tfile: \"\", //文件对象\n\t\t\tjson: \"\", //json data\n\t\t\tobject: \"\", //js object\n\n\t\t\tdone: false,\n\t\t\ttypes: types.bodyMap,\n\t\t};\n\t},\n\tcomputed: {\n\t\tbtnText() {\n\t\t\tlet txt = \"上传脸型/体型数据\";\n\t\t\tif (this.type === \"face\") {\n\t\t\t\ttxt = \"上传脸型数据\";\n\t\t\t}\n\t\t\tif (this.type === \"body\") {\n\t\t\t\ttxt = \"上传体型数据\";\n\t\t\t}\n\t\t\treturn txt;\n\t\t},\n\t\tfilename: function () {\n\t\t\treturn this.file && this.file.name;\n\t\t},\n\t},\n\tmethods: {\n\t\t// 上传数据\n\t\tselectData: function (i) {\n\t\t\tlet fileInput = document.getElementById(\"face_file\");\n\t\t\tfileInput.dispatchEvent(new MouseEvent(\"click\"));\n\t\t},\n\t\tuploadData: function (e) {\n\t\t\tlet file = e.target.files[0];\n\t\t\tthis.file = file;\n\t\t\tthis.parseData(file);\n\t\t},\n\t\t// 读取与读取数据\n\t\tparseData: function (file) {\n\t\t\tif (!file) return; //空数据不读取\n\t\t\tconst vm = this;\n\n\t\t\t// 读入 File 转 ArrayBuffer 进行读取\n\t\t\tlet fr = new FileReader();\n\t\t\tfr.onload = function (e) {\n\t\t\t\tconsole.log(\"读取成功...开始执行分析...\");\n\t\t\t\ttry {\n\t\t\t\t\tif (!vm.type) {\n\t\t\t\t\t\t// 没有指定type\n\t\t\t\t\t\tconst object = parseFace(e.target.result);\n\t\t\t\t\t\tif (object.tBody) {\n\t\t\t\t\t\t\tvm.object = load(e.target.result);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvm.object = object;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (vm.type === \"face\") {\n\t\t\t\t\t\tvm.object = parseFace(e.target.result);\n\t\t\t\t\t\tif (vm.object.tBody) {\n\t\t\t\t\t\t\treturn vm.$notify.error({\n\t\t\t\t\t\t\t\ttitle: \"错误\",\n\t\t\t\t\t\t\t\tmessage: \"请导入脸型数据\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (vm.type === \"body\") {\n\t\t\t\t\t\tvm.object = load(e.target.result);\n\t\t\t\t\t}\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tconsole.log(ex);\n\t\t\t\t\tvm.$notify.error({\n\t\t\t\t\t\ttitle: \"错误\",\n\t\t\t\t\t\tmessage: \"无法读取数据\",\n\t\t\t\t\t});\n\t\t\t\t\tvm.$emit(\"fail\", {\n\t\t\t\t\t\tfile: vm.file,\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// 读取成功才分析\n\t\t\t\tif (vm.object) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvm.json = JSON.stringify(vm.object);\n\t\t\t\t\t\tvm.$notify({\n\t\t\t\t\t\t\ttitle: \"成功\",\n\t\t\t\t\t\t\tmessage: `${vm.types[vm.object.nRoleType.toString()]?.label || \"\"}${vm.type === \"face\" ? \"脸型\" : vm.type === \"body\" ? \"体型\" : \"\"}数据读取成功`,\n\t\t\t\t\t\t\ttype: \"success\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvm.done = true;\n\t\t\t\t\t\tvm.$emit(\"success\", {\n\t\t\t\t\t\t\tfile: vm.file,\n\t\t\t\t\t\t\tjson: vm.json,\n\t\t\t\t\t\t\tobject: vm.object,\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tvm.$notify.error({\n\t\t\t\t\t\t\ttitle: \"错误\",\n\t\t\t\t\t\t\tmessage: \"无法读取数据\",\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvm.$emit(\"fail\", {\n\t\t\t\t\t\t\tfile: vm.file,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tfr.onerror = function (e) {\n\t\t\t\tvm.$notify.error({\n\t\t\t\t\ttitle: \"错误\",\n\t\t\t\t\tmessage: \"文件读取异常\",\n\t\t\t\t});\n\t\t\t};\n\t\t\tfr.readAsArrayBuffer(file);\n\t\t},\n\t\t// 重置上传\n\t\tresetData: function () {\n\t\t\tthis.done = false;\n\n\t\t\tthis.file = \"\";\n\t\t\tthis.json = \"\";\n\t\t\tthis.object = \"\";\n\t\t\tthis.$emit(\"success\", {\n\t\t\t\tfile: \"\",\n\t\t\t\tjson: \"\",\n\t\t\t\tobject: \"\",\n\t\t\t});\n\t\t},\n\t},\n\tfilters: {},\n\tcreated: function () {},\n\tmounted: function () {\n\t\tthis.support = !!window.FileReader;\n\t},\n};\n</script>\n\n<style lang=\"less\">\n.c-facedat-upload {\n\t.u-tip {\n\t\t.fz(12px);\n\t\tcolor: #999;\n\t}\n\t.mt(20px);\n\t.u-input {\n\t\t.none;\n\t}\n\t.u-upload {\n\t\t.x;\n\t}\n\t.u-help {\n\t\t.fz(12px,3);\n\t\tcolor: @color-link;\n\t\t.underline(@color-link);\n\t\ti {\n\t\t\t.fz(14px);\n\t\t\t.y(-1px);\n\t\t}\n\t}\n\t.u-btn {\n\t\t.db;\n\t\tmargin: 0 auto;\n\t\t.size(200px,50px);\n\t}\n\t.u-file {\n\t\t.fz(14px,2);\n\t\tcolor: #49c10f;\n\t\t.bold;\n\t}\n\t.u-reset {\n\t\t.mb(10px);\n\t}\n}\n</style>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Upload.vue?vue&type=template&id=5689071a&\"\nimport script from \"./Upload.vue?vue&type=script&lang=js&\"\nexport * from \"./Upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Upload.vue?vue&type=style&index=0&id=5689071a&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../vue-loader/lib/loaders/stylePostLoader.js!../../../postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Facedat.vue?vue&type=style&index=0&id=2cf9c020&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.ready)?_c('div',{staticClass:\"c-facedat\"},[_c('el-tabs',{staticClass:\"c-facedat-preivew\",attrs:{\"type\":_vm.tab_type},model:{value:(_vm.active),callback:function ($$v) {_vm.active=$$v},expression:\"active\"}},[_c('el-tab-pane',{attrs:{\"label\":\"眼部轮廓\",\"name\":\"eye\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['eye']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"嘴部轮廓\",\"name\":\"mouth\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['mouth']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"鼻子轮廓\",\"name\":\"nose\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['nose']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"脸部轮廓\",\"name\":\"face\"}},[_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.group['face']),function(key,i){return _c('li',{key:key + i},[_c('label',[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('span',[_vm._v(_vm._s(_vm.facedata[\"tBone\"][key]))]),_c('el-slider',{staticClass:\"u-range\",attrs:{\"min\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['min'],\"max\":_vm.bone_range[_vm.body_type][_vm.dict[key]['type']]['max'],\"disabled\":_vm.lock},model:{value:(_vm.facedata['tBone'][key]),callback:function ($$v) {_vm.$set(_vm.facedata['tBone'], key, $$v)},expression:\"facedata['tBone'][key]\"}})],1)}),0)])]),_c('el-tab-pane',{attrs:{\"label\":\"贴花\",\"name\":\"decal\"}},[_c('div',{staticClass:\"m-facedat-decals\",attrs:{\"id\":\"decals\"}},[_vm._l((_vm.group['decal']),function(key,i){return _c('div',{key:key + i,staticClass:\"c-facedat-group\"},[(_vm.cleandata['tDecal'][key])?[_c('ul',{staticClass:\"u-decals\"},[_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.clean || _vm.checkdecal_prop(key)),expression:\"!clean || checkdecal_prop(key)\"}]},[_c('div',{staticClass:\"u-title\"},[_vm._v(_vm._s(_vm.dict[key][\"desc\"]))]),_c('img',{staticClass:\"u-pic\",attrs:{\"src\":_vm.getDecalIcon(key, _vm.cleandata['tDecal'][key]['nShowID'])}}),_c('span',{staticClass:\"u-dname\"},[_vm._v(_vm._s(_vm.getDecalName(key, _vm.cleandata[\"tDecal\"][key][\"nShowID\"])))]),(\n                    _vm.getDecalIsFlip(key, _vm.cleandata['tDecal'][key]['nShowID'])\n                  )?_c('span',{staticClass:\"u-dflip\"},[_vm._v(\"(翻转)\")]):_vm._e(),_c('span',{staticClass:\"u-dcolor\"},[_vm._v(\"(颜色:\"+_vm._s(_vm.cleandata[\"tDecal\"][key][\"nColorID\"])+\")\")]),(\n                    _vm.showDecalFree(key, _vm.cleandata['tDecal'][key]['nShowID'])\n                  )?_c('span',{staticClass:\"u-free\"},[_c('i',{staticClass:\"el-icon-success\"}),_vm._v(\" 新建角色可用 \")]):_vm._e(),(\n                    _vm.showDecalPrice(key, _vm.cleandata['tDecal'][key]['nShowID'])\n                  )?_c('span',{staticClass:\"u-price\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"+_vm._s(_vm.showDecalPrice(key, _vm.cleandata[\"tDecal\"][key][\"nShowID\"]))+\" 通宝 \")]):_vm._e()])])]:_vm._e()],2)}),_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-decals\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(\"装饰物\")]),_c('img',{staticClass:\"u-pic\",attrs:{\"src\":_vm.getDecorationIcon(_vm.cleandata['nDecorationID'])}}),_c('span',{staticClass:\"u-dname\"},[_vm._v(_vm._s(_vm.getDecorationName(_vm.cleandata[\"nDecorationID\"])))]),(_vm.showDecorationPrice(_vm.cleandata['nDecorationID']))?_c('span',{staticClass:\"u-price\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"+_vm._s(_vm.showDecorationPrice(_vm.cleandata[\"nDecorationID\"]))+\" 通宝 \")]):_vm._e()])]),_c('div',{staticClass:\"c-facedat-group\"},[_c('ul',{staticClass:\"u-decals\"},[_c('div',{staticClass:\"u-title\"},[_vm._v(\"总计\")]),_c('span',{staticClass:\"u-total u-price\"},[_c('i',{staticClass:\"el-icon-coin\"}),_vm._v(\" \"),_c('b',[_vm._v(_vm._s(_vm.total_coin))]),_vm._v(\" 通宝\")])])])],2)])],1),_c('div',{staticClass:\"c-facedat-setting\"},[_c('el-form',{ref:\"form\",staticClass:\"c-facedat-setting-form\",attrs:{\"label-width\":\"80px\",\"label-position\":\"left\"}},[_c('el-form-item',{attrs:{\"label\":\"高级\"}},[_c('el-checkbox',{model:{value:(_vm.clean),callback:function ($$v) {_vm.clean=$$v},expression:\"clean\"}},[_vm._v(\"清洗模式\")]),_c('span',{staticClass:\"u-warning\"},[_c('i',{staticClass:\"el-icon-warning-outline\"}),_vm._v(\" 仅保留创建新角色时可用项，如提示非法数据也请尝试开启该模式 \")])],1)],1)],1),_c('div',{staticClass:\"c-facedat-btns\"},[_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-receiving\"},on:{\"click\":function($event){return _vm.buildData('std')}}},[_vm._v(\"导出正式服\")]),_c('el-button',{staticClass:\"u-btn\",attrs:{\"type\":\"warning\",\"icon\":\"el-icon-receiving\"},on:{\"click\":function($event){return _vm.buildData('origin')}}},[_vm._v(\"导出怀旧服\")])],1)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 将早期数据统一成当前格式\nfunction fixOldData(olddata) {\n    let newdata = {\n        tBone: {},\n        tDecal: {},\n        nRoleType: ~~olddata.misc[0].value,\n    };\n\n    olddata.decal.forEach((decal) => {\n        newdata.tDecal[decal.name] = {\n            nShowID : ~~decal.value\n        }\n    })\n\n    let arr = ['eye','mouth','nose','face']\n    arr.forEach((key) => {\n        olddata[key].forEach((item) => {\n            newdata.tBone[item.name] = ~~item.value\n        })\n    })\n\n    return newdata\n}\n\nexport default fixOldData;\n","<template>\n  <div class=\"c-facedat\" v-if=\"ready\">\n    <el-tabs class=\"c-facedat-preivew\" v-model=\"active\" :type=\"tab_type\">\n      <el-tab-pane label=\"眼部轮廓\" name=\"eye\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['eye']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"嘴部轮廓\" name=\"mouth\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['mouth']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"鼻子轮廓\" name=\"nose\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['nose']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"脸部轮廓\" name=\"face\">\n        <div class=\"c-facedat-group\">\n          <ul class=\"u-list\">\n            <li v-for=\"(key, i) in group['face']\" :key=\"key + i\">\n              <label>{{ dict[key][\"desc\"] }}</label>\n              <span>{{ facedata[\"tBone\"][key] }}</span>\n              <el-slider\n                class=\"u-range\"\n                :min=\"bone_range[body_type][dict[key]['type']]['min']\"\n                :max=\"bone_range[body_type][dict[key]['type']]['max']\"\n                v-model=\"facedata['tBone'][key]\"\n                :disabled=\"lock\"\n              ></el-slider>\n            </li>\n          </ul>\n        </div>\n      </el-tab-pane>\n      <el-tab-pane label=\"贴花\" name=\"decal\">\n        <div class=\"m-facedat-decals\" id=\"decals\">\n          <div\n            class=\"c-facedat-group\"\n            v-for=\"(key, i) in group['decal']\"\n            :key=\"key + i\"\n          >\n            <template v-if=\"cleandata['tDecal'][key]\">\n              <ul class=\"u-decals\">\n                <li v-show=\"!clean || checkdecal_prop(key)\">\n                  <div class=\"u-title\">{{ dict[key][\"desc\"] }}</div>\n                  <img\n                    class=\"u-pic\"\n                    :src=\"\n                      getDecalIcon(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                  />\n                  <span class=\"u-dname\">{{\n                    getDecalName(key, cleandata[\"tDecal\"][key][\"nShowID\"])\n                  }}</span>\n                  <span\n                    class=\"u-dflip\"\n                    v-if=\"\n                      getDecalIsFlip(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                    >(翻转)</span\n                  >\n                  <span class=\"u-dcolor\"\n                    >(颜色:{{ cleandata[\"tDecal\"][key][\"nColorID\"] }})</span\n                  >\n                  <span\n                    class=\"u-free\"\n                    v-if=\"\n                      showDecalFree(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                  >\n                    <i class=\"el-icon-success\"></i> 新建角色可用\n                  </span>\n                  <span\n                    class=\"u-price\"\n                    v-if=\"\n                      showDecalPrice(key, cleandata['tDecal'][key]['nShowID'])\n                    \"\n                  >\n                    <i class=\"el-icon-coin\"></i>\n                    {{\n                      showDecalPrice(key, cleandata[\"tDecal\"][key][\"nShowID\"])\n                    }}\n                    通宝\n                  </span>\n                </li>\n              </ul>\n            </template>\n          </div>\n          <div class=\"c-facedat-group\">\n            <ul class=\"u-decals\">\n              <div class=\"u-title\">装饰物</div>\n              <img\n                class=\"u-pic\"\n                :src=\"getDecorationIcon(cleandata['nDecorationID'])\"\n              />\n              <span class=\"u-dname\">{{\n                getDecorationName(cleandata[\"nDecorationID\"])\n              }}</span>\n              <span\n                class=\"u-price\"\n                v-if=\"showDecorationPrice(cleandata['nDecorationID'])\"\n              >\n                <i class=\"el-icon-coin\"></i>\n                {{ showDecorationPrice(cleandata[\"nDecorationID\"]) }} 通宝\n              </span>\n            </ul>\n          </div>\n          <div class=\"c-facedat-group\">\n            <ul class=\"u-decals\">\n              <div class=\"u-title\">总计</div>\n              <span class=\"u-total u-price\"\n                ><i class=\"el-icon-coin\"></i> <b>{{ total_coin }}</b> 通宝</span\n              >\n            </ul>\n          </div>\n        </div>\n      </el-tab-pane>\n    </el-tabs>\n    <div class=\"c-facedat-setting\">\n      <el-form\n        class=\"c-facedat-setting-form\"\n        ref=\"form\"\n        label-width=\"80px\"\n        label-position=\"left\"\n      >\n        <el-form-item label=\"高级\">\n          <el-checkbox v-model=\"clean\">清洗模式</el-checkbox>\n          <span class=\"u-warning\">\n            <i class=\"el-icon-warning-outline\"></i>\n            仅保留创建新角色时可用项，如提示非法数据也请尝试开启该模式\n          </span>\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"c-facedat-btns\">\n      <el-button\n        class=\"u-btn\"\n        type=\"primary\"\n        @click=\"buildData('std')\"\n        icon=\"el-icon-receiving\"\n        >导出正式服</el-button\n      >\n      <el-button\n        class=\"u-btn\"\n        type=\"warning\"\n        @click=\"buildData('origin')\"\n        icon=\"el-icon-receiving\"\n        >导出怀旧服</el-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nimport axios from \"axios\";\nimport {\n  __ossMirror,\n  __iconPath,\n  __ossRoot,\n} from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport fixOldData from \"./fixOldData.js\";\n\nimport group from \"../assets/data/face/group.json\";\nimport dict from \"../assets/data/face/dict.json\";\nimport decal_group from \"../assets/data/face/decal_group.json\";\nimport decal_origin from \"../assets/data/face/decal_origin.json\";\nimport decal_std from \"../assets/data/face/decal_std.json\";\nimport decal_prop from \"../assets/data/face/decal_prop.json\";\nimport bone_range from \"../assets/data/face/bone_range.json\";\nimport bone_default from \"../assets/data/face/bone_default.json\";\nimport decal_default from \"../assets/data/face/decal_default.json\";\nimport versions from \"../assets/data/face/version.json\";\n\nimport { format } from \"lua-json\";\nimport { saveAs } from \"file-saver\";\nimport { dumpFace } from \"./faceParser.js\";\n\nexport default {\n  name: \"Facedat\",\n  props: [\"data\", \"lock\", \"tab_type\"],\n  data: function () {\n    return {\n      active: \"eye\",\n\n      // 数据\n      body_type: \"\",\n      facedata: \"\",\n\n      // 骨骼\n      group,\n      dict,\n      bone_range,\n\n      // 妆容\n      decal_group,\n\n      // 导出设置\n      clean: false,\n      version: \"std\",\n\n      decalMap: \"\",\n      decorationMap: \"\",\n\n      // test\n      // data : JSON.stringify(olddata)\n    };\n  },\n  computed: {\n    ready: function () {\n      return !!(this.facedata && this.decalMap && this.decorationMap);\n    },\n    cleandata: function () {\n      if (this.clean && this.facedata) {\n        let _cleandata = _.cloneDeep(this.facedata);\n        _cleandata.nDecorationID = 0;\n        for (let key in _cleandata.tDecal) {\n          let CanUseInCreate = this.showDecalFree(\n            key,\n            _cleandata?.tDecal[key][\"nShowID\"]\n          );\n          if (!CanUseInCreate) {\n            _cleandata.tDecal[key][\"nShowID\"] = decal_default[key][\"nShowID\"];\n          }\n        }\n        return _cleandata;\n      } else {\n        return this.facedata;\n      }\n    },\n    // 自动检测数据版本\n    client: function () {\n      let _nMajorVersion = this.facedata?.nMajorVersion;\n      if (_nMajorVersion == 1 || !_nMajorVersion) {\n        return \"std\";\n      } else {\n        return \"origin\";\n      }\n    },\n    /* decalmap: function() {\n            if (this.client == \"std\" || !this.client) {\n                return decal_std;\n            } else {\n                return decal_origin;\n            }\n        }, */\n    output_std: function () {\n      // 1.默认需要修订版本号与客户端版本\n      let data = this.amendVersion(\"std\");\n      // 2.补全骨骼缺失数据\n      data.tBone = this.amendBone(data.tBone);\n      // 3.补全完整数据结构\n      // 如果没有开启清洗也需要对数据结构进行补充，以防上传的是古老的数据（缺失部分后加的属性）\n      // 同时部分古老数据即使存在该属性，但部分2级属性也是缺失的\n      // data.tDecal = this.amendDecal(data.tDecal)\n\n      // 废弃：如果开启了清洗直接回档整体默认贴花部分\n      // 正式服数据包含全部属性（shadow1~4），且有额外属性值（fValue1~3）\n      // 直接取一个demo数据，以防上传的是怀旧服数据缺失部分属性\n      if (this.clean) {\n        data.tDecal = _.cloneDeep(decal_default);\n      }\n\n      // 废弃：如果是清洗模式，还需要仅保留新建角色时存在的属性（移除shadow1~4等）\n      // if (this.clean){\n      //     for(let key in data.tDecal){\n      //         if (!decal_group.origin.includes(key)) {\n      //             delete data.tDecal[key];\n      //         }\n      //     }\n      // }\n      return data;\n    },\n    output_origin: function () {\n      // 1.默认需要修订版本号与客户端版本\n      let data = this.amendVersion(\"origin\");\n      // 2.补全骨骼缺失数据\n      data.tBone = this.amendBone(data.tBone);\n\n      // 3.贴花数据全部复位（怀旧服商城暂未上线）\n      for (let key in data.tDecal) {\n        if (decal_group.origin.includes(key)) {\n          // 3.2重置color和show_id\n          data.tDecal[key][\"nColorID\"] = decal_default[key][\"nColorID\"];\n          data.tDecal[key][\"nShowID\"] = decal_default[key][\"nShowID\"];\n          // 3.3移除正式服特有属性（fValue1~3）\n          for (let prop in data.tDecal[key]) {\n            if (!decal_prop.origin.includes(prop)) {\n              delete data.tDecal[key][prop];\n            }\n          }\n          // 3.1首先移除正式服特有的部分属性（shadow1~4）\n        } else {\n          delete data.tDecal[key];\n        }\n      }\n      return data;\n    },\n    output: function () {\n      let table = {};\n      let data =\n        this.version == \"origin\" ? this.output_origin : this.output_std;\n      try {\n        table = \"return \" + format(data, { eol: \"\", spaces: 0 }).slice(6);\n      } catch (e) {\n        console.log(\"导出转换失败\");\n        console.log(e);\n      }\n      return table;\n    },\n    total_coin: function () {\n      let sum = 0;\n      for (const [_, key] of Object.entries(this.group[\"decal\"]))\n        if (this.cleandata[\"tDecal\"][key])\n          sum += this.showDecalPrice(\n            key,\n            this.cleandata[\"tDecal\"][key][\"nShowID\"]\n          );\n      if (this.cleandata[\"nDecorationID\"])\n        sum += this.showDecorationPrice(this.cleandata[\"nDecorationID\"]);\n      return sum;\n    },\n  },\n  watch: {\n    data: {\n      deep: true,\n      handler: function (newdata) {\n        this.render();\n      },\n    },\n    cleandata: {\n      deep: true,\n      handler: function () {\n        this.$forceUpdate();\n      },\n    },\n    client: {\n      immediate: true,\n      handler: function (val) {\n        this.fetchDecal();\n        this.fetchDecoration();\n      },\n    },\n  },\n  methods: {\n    // 数据构建\n    render: function () {\n      // 是否为空\n      if (!this.data) {\n        this.body_type = \"\";\n        this.facedata = \"\";\n        return;\n      }\n\n      // json 转为 object\n      try {\n        let facedata = JSON.parse(this.data);\n        // 旧版数据\n        if (facedata.status) {\n          this.body_type = facedata.misc[0][\"value\"];\n          this.facedata = fixOldData(facedata);\n        } else {\n          this.body_type = facedata.nRoleType;\n          this.facedata = facedata;\n        }\n      } catch (e) {\n        this.facedata = \"\";\n        console.log(e);\n        this.$notify.error({\n          title: \"错误\",\n          message: \"脸型数据无法解析\",\n        });\n      }\n    },\n\n    // 贴花\n    getDecalName: function (key, val) {\n      return (\n        _.get(this.decalMap[this.body_type][dict[key][\"type\"]][val], \"name\") ||\n        \"无\"\n      );\n    },\n    getDecalIcon: function (key, val) {\n      let iconid = _.get(\n        this.decalMap[this.body_type][dict[key][\"type\"]][val],\n        \"iconid\"\n      );\n      if (iconid) {\n        return __iconPath + \"icon/\" + iconid + \".png\";\n      } else {\n        return __iconPath + \"icon/\" + \"undefined\" + \".png\";\n      }\n    },\n    getDecalIsFlip: function (key, val) {\n      return (\n        _.get(\n          this.decalMap[this.body_type][dict[key][\"type\"]][val],\n          \"IsFlip\"\n        ) || false\n      );\n    },\n    showDecalFree: function (key, val) {\n      return ~~this.decalMap?.[this.body_type]?.[dict[key]?.type]?.[val]\n        ?.CanUseInCreate;\n    },\n    showDecalPrice: function (key, val) {\n      return ~~this.decalMap?.[this.body_type]?.[dict[key]?.type]?.[val]\n        ?.CoinPrice;\n    },\n    checkdecal_prop: function (key) {\n      return decal_group.origin.includes(key);\n    },\n\n    // 装饰物\n    getDecorationName: function (id) {\n      return _.get(this.decorationMap[this.body_type][id], \"Name\") || \"无\";\n    },\n    getDecorationIcon: function (id) {\n      let iconid = _.get(this.decorationMap[this.body_type][id], \"IconID\");\n      if (iconid) {\n        return __iconPath + \"icon/\" + iconid + \".png\";\n      } else {\n        return __iconPath + \"icon/\" + \"undefined\" + \".png\";\n      }\n    },\n    showDecorationPrice: function (id) {\n      return ~~(\n        _.get(this.decorationMap[this.body_type][id], \"CoinPrice\") || \"0\"\n      );\n    },\n\n    // 按钮\n    buildData: function (v) {\n      this.version = v;\n      let outputWithHeader = dumpFace(this.output);\n      let blob = new Blob([outputWithHeader], {\n        type: \"application/dat;charset=utf-8\",\n      });\n      saveAs(blob, Date.now() + \".dat\");\n    },\n\n    // 数据修正\n    amendVersion: function (v) {\n      let data = _.cloneDeep(this.cleandata);\n      data.nDecorationID = v === \"origin\" ? 0 : data.nDecorationID;\n      data.nMajorVersion = versions[v][\"nMajorVersion\"];\n      data.nVersion = versions[v][\"nVersion\"];\n      return data;\n    },\n    amendBone: function (data) {\n      let _bone = _.cloneDeep(bone_default);\n      let _fixbone = Object.assign(_bone, data);\n      return _fixbone;\n    },\n    amendDecal: function (data) {\n      let _decal = _.cloneDeep(decal_default);\n      for (let key in decal_default) {\n        // 不存在补全属性\n        if (!data[key]) {\n          data[key] = _.cloneDeep(decal_default[key]);\n          // 存在则补全子属性\n        } else {\n          data[key] = Object.assign(decal_default[key], data[key]);\n        }\n      }\n      return data;\n    },\n    fetchWithLocalStorage: function (url, key, onFetch) {\n      const localData = JSON.parse(sessionStorage.getItem(key));\n      if (localData) {\n        if (onFetch) onFetch(localData);\n        return;\n      } else {\n        axios.get(url).then((res) => {\n          sessionStorage.setItem(key, JSON.stringify(res.data));\n          if (onFetch) onFetch(res.data);\n        });\n      }\n    },\n    fetchDecal: function (client = \"std\") {\n      try {\n        const url =\n          client === \"std\"\n            ? `${__ossMirror}data/face/decal_std.json`\n            : `${__ossMirror}data/face/decal_origin.json`;\n        const key = `decal_${client}`;\n        this.fetchWithLocalStorage(url, key, (data) => {\n          this.decalMap = data;\n        });\n      } catch (e) {\n        this.decalMap = \"\";\n        console.log(e);\n      }\n    },\n    fetchDecoration: function (client = \"std\") {\n      try {\n        const url =\n          client === \"std\"\n            ? `${__ossMirror}data/face/decoration_std.json`\n            : `${__ossMirror}data/face/decoration_origin.json`;\n        const key = `decoration_${client}`;\n        this.fetchWithLocalStorage(url, key, (data) => {\n          this.decorationMap = data;\n        });\n      } catch (e) {\n        this.decorationMap = \"\";\n        console.log(e);\n      }\n    },\n  },\n  mounted: function () {\n    this.render();\n  },\n};\n</script>\n\n<style lang=\"less\">\n@import \"../assets/css/facedat.less\";\n</style>\n","import mod from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Facedat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../cache-loader/dist/cjs.js??ref--13-0!../../../thread-loader/dist/cjs.js!../../../babel-loader/lib/index.js!../../../cache-loader/dist/cjs.js??ref--1-0!../../../vue-loader/lib/index.js??vue-loader-options!../../../vue-svg-inline-loader/dist/index.min.js!./Facedat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Facedat.vue?vue&type=template&id=2cf9c020&\"\nimport script from \"./Facedat.vue?vue&type=script&lang=js&\"\nexport * from \"./Facedat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Facedat.vue?vue&type=style&index=0&id=2cf9c020&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./Parse.vue?vue&type=style&index=0&id=322c0e0a&prod&lang=less&\""],"sourceRoot":""}