(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1690e640"],{"2fd5":function(t,a,e){},"5b02":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"v-share-list"},[e("ShareSearch",{on:{onSearchKey:t.onSearchKey}}),e("ShareTabs",{on:{onShareData:t.onShareData}}),t.list.length>0?[e("div",{staticClass:"m-share-list"},t._l(t.list,(function(t,a){return e("ShareItem",{key:a,attrs:{item:t}})})),1),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a},"current-change":t.changePage}})]:e("el-alert",{staticClass:"m-archive-null",attrs:{title:t.title,type:"info",center:"","show-icon":""}})],2)},n=[],i=(e("ac1f"),e("841c"),e("d3b7"),e("99af"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-share-search"},[e("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:t.publish_link}},[t._v("+ 分享捏脸")]),e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(a){t.search=a},expression:"search"}},[e("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("关键词")]),e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)}),r=[],c=e("85e4"),o={name:"search",data:function(){return{search:""}},computed:{publish_link:function(t){return Object(c["publishLink"])("share")}},watch:{search:function(t){this.$emit("onSearchKey",t)}}},u=o,l=e("2877"),h=Object(l["a"])(u,i,r,!1,null,null,null),p=h.exports,m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-share-tabs"},[e("div",{staticClass:"u-tabs"},t._l(t.subtypes,(function(a,s){return e("div",{key:s,staticClass:"u-tab-item",class:s==t.activeIndex?"active":"",on:{click:function(a){return t.clickTabs(s)}}},[e("img",{staticClass:"u-icon-img",attrs:{src:t.getThumbnail(a),alt:a}}),e("span",{staticClass:"u-tabs-span"},[t._v(t._s(a))])])})),0),e("div",{staticClass:"u-marks"},[e("el-radio-group",{on:{change:t.toMark},model:{value:t.mark,callback:function(a){t.mark=a},expression:"mark"}},t._l(t.marks,(function(a){return e("el-radio-button",{key:a.key,attrs:{label:a.key}},[t._v(" "+t._s(a.name)+" ")])})),1)],1)])},d=[],f=e("65c2"),b={name:"tabs",props:[],data:function(){return{subtypes:["全部","成男","成女","正太","萝莉"],marks:[{key:"all",name:"全部"},{key:"newbie",name:"热门"},{key:"advanced",name:"推荐"},{key:"recommended",name:"精选"}],activeIndex:0,mark:"all",subtype:"全部"}},computed:{params:function(){return{mark:this.mark,subtype:this.subtype}}},methods:{clickTabs:function(t){this.activeIndex=t,this.subtype=this.subtypes[t]},toMark:function(t){this.mark=t},getThumbnail:function(t){return f["__imgPath"]+"image/face/"+t+".jpg"}},watch:{params:{deep:!0,immediate:!0,handler:function(t){this.$emit("onShareData",t)}}}},g=b,k=Object(l["a"])(g,m,d,!1,null,null,null),v=k.exports,y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"m-share-item"},[e("router-link",{staticClass:"u-face",attrs:{to:"/"+t.item.ID}},[e("i",{staticClass:"u-img"},[e("img",{staticClass:"u-pic",attrs:{src:t.showThumb(t.imgLink),loading:"lazy"}})]),e("span",{staticClass:"u-author"},[t._v("@"+t._s(t.author))])]),t.isEditor?e("span",{staticClass:"u-op"},[e("i",{staticClass:"u-op-hot",class:{on:t.hasMark(t.item,"newbie")},attrs:{title:"设为热门"},on:{click:function(a){return t.setMark(t.item,"newbie")}}},[t._v("♥")]),e("i",{staticClass:"u-op-rec",class:{on:t.hasMark(t.item,"advanced")},attrs:{title:"设为推荐"},on:{click:function(a){return t.setMark(t.item,"advanced")}}},[t._v("✿")]),e("i",{staticClass:"u-op-star",class:{on:t.hasMark(t.item,"recommended")},attrs:{title:"设为精选"},on:{click:function(a){return t.setMark(t.item,"recommended")}}},[t._v("★")])]):e("span",{staticClass:"u-op u-readOnly"},[t.hasMark(t.item,"newbie")?e("i",{staticClass:"u-op-hot",class:{on:t.hasMark(t.item,"newbie")}},[t._v("♥")]):t._e(),t.hasMark(t.item,"advanced")?e("i",{staticClass:"u-op-rec",class:{on:t.hasMark(t.item,"advanced")}},[t._v("✿")]):t._e(),t.hasMark(t.item,"recommended")?e("i",{staticClass:"u-op-star",class:{on:t.hasMark(t.item,"recommended")}},[t._v("★")]):t._e()])],1)},_=[],w=(e("caad"),e("2532"),e("c9d2")),C=e("635b"),M={name:"item",props:["item"],data:function(){return{search:"",markmap:{newbie:"热门",advanced:"推荐",recommended:"精选"},isEditor:w["a"].isEditor()}},computed:{author:function(){return this.item.post_meta.author||"匿名"},imgLink:function(){var t;return(null===(t=this.item.post_meta.pics[0])||void 0===t?void 0:t.url)||f["__imgPath"]+"image/face/null2.png"}},methods:{hasMark:function(t,a){var e;return null===(e=t.mark)||void 0===e?void 0:e.includes(a)},setMark:function(t,a){var e,s=this,n=null===(e=t.mark)||void 0===e?void 0:e.includes(a);t.mark=n?[]:[a];var i=n?"取消":"设置";i+=this.markmap[a],i+="成功",Object(C["c"])(t.ID,{mark:t.mark}).then((function(t){s.$notify({title:"成功",message:i,type:"success"})}))},showThumb:function(t){return Object(c["showBanner"])(t,"face")},showBanner:function(t){return Object(c["showMinibanner"])(t)}}},S=M,j=Object(l["a"])(S,y,_,!1,null,null,null),x=j.exports,O={name:"shareList",components:{ShareSearch:p,ShareTabs:v,ShareItem:x},data:function(){return{loading:!1,list:[],search:"",mark:"",subtype:"",page:1,total:1,pages:1,per:40,appendMode:!1}},computed:{title:function(){return this.search?"没找到对应的捏脸，请重新选择条件或关键词搜索":"没有找到相关的捏脸"},params:function(){var t={per:this.per,sticky:1,page:this.page,type:"share"};return this.search&&(t.search=this.search),this.mark&&"all"!==this.mark&&(t.mark=this.mark),this.subtype&&"全部"!==this.subtype&&(t.subtype=this.subtype),t},hasNextPage:function(){return this.pages>1&&this.page<this.total}},methods:{onShareData:function(t){this.mark=t.mark,this.subtype=t.subtype,this.page=1},onSearchKey:function(t){this.search=t},getData:function(){var t=this;this.loading=!0,Object(C["b"])(this.params,this).then((function(a){t.appendMode?t.list=t.list.concat(a.data.data.list):t.list=a.data.data.list,t.total=a.data.data.total,t.pages=a.data.data.pages})).finally((function(){t.appendMode=!1,t.loading=!1}))},changePage:function(t){this.page=t},appendPage:function(){this.appendMode=!0,this.page=this.page+1}},watch:{params:{deep:!0,immediate:!0,handler:function(t){t&&this.getData()}}},mounted:function(){}},P=O,D=(e("a13c"),Object(l["a"])(P,s,n,!1,null,null,null));a["default"]=D.exports},"635b":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"a",(function(){return i})),e.d(a,"c",(function(){return r}));var s=e("41cb");function n(t){var a={type:"share"};return t&&(a=Object.assign(a,t)),Object(s["a"])().get("/api/cms/posts",{params:a})}function i(t){return Object(s["a"])().get("/api/cms/post/".concat(t))}function r(t,a){return Object(s["a"])().put("/api/cms/post/".concat(t,"/setting"),a)}},a13c:function(t,a,e){"use strict";e("2fd5")}}]);
//# sourceMappingURL=chunk-1690e640.020c8607.js.map