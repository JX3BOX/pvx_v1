(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e0149c8"],{"1c17":function(t,e,a){},5469:function(t,e,a){"use strict";a("1c17")},"55dc":function(t,e,a){},"58e7":function(t,e,a){"use strict";a("55dc")},6231:function(t,e,a){"use strict";a.r(e);var i=a("5530"),s=(a("4de4"),a("b0c0"),a("d3b7"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"horse-home-wrapper"},[e("CommonToolbar",{staticClass:"m-horse-tabs",attrs:{active:t.active,color:"#d16400",search:"",types:t.list},on:{update:t.updateToolbar},scopedSlots:t._u([{key:"filter",fn:function(){return[e("div",{staticClass:"u-filter"},[e("el-popover",{ref:"popover",attrs:{placement:t.isPhone?"right":"bottom",width:!t.isPhone&&420,trigger:"click"}},[e("div",{staticClass:"filter-content"},[t._l(t.searchType,(function(a,i){return e("div",{key:i,staticClass:"filter-item"},[e("div",{staticClass:"check-box-wrapper"},[e("div",{staticClass:"name"},[t._v(t._s(a.name))]),e("el-checkbox-group",{model:{value:t.searchType[i].checked,callback:function(e){t.$set(t.searchType[i],"checked",e)},expression:"searchType[i].checked"}},t._l(a.list,(function(t){return e("el-checkbox-button",{key:t.value,attrs:{label:t.label}})})),1)],1)])})),e("el-row",[e("el-col",{attrs:{offset:20,span:4}},[e("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:t.reset}},[t._v("重置")])],1)],1)],2),e("template",{slot:"reference"},[e("svg",{attrs:{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"},on:{click:function(e){t.filter=!0}}},[e("rect",{attrs:{width:"40",height:"40",rx:"20",fill:"transparent"}}),e("path",{attrs:{d:"M12.25 13.61C14.27 16.2 18 21 18 21v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39a.998.998 0 00-.79-1.61H13.04c-.83 0-1.3.95-.79 1.61z",fill:"tranparent"}})])])],2)],1)]},proxy:!0}])}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"listRef",staticClass:"m-horse-content"},[""===t.active?["std"===t.client?e("HorseBroadcastV2"):t._e(),t._l(t.typeList,(function(a,s){return e("div",{key:s,staticClass:"m-list-wrapper"},[a.list&&a.list.length?[e("div",{staticClass:"u-type"},[e("div",{staticClass:"u-title"},[t._v(" "+t._s(a.name)+" ")]),e("div",{staticClass:"u-all",on:{click:function(e){return t.clickTabs(a.value)}}},[t._v("查看全部")])]),e("CommonList",{attrs:{data:Object(i["a"])(Object(i["a"])({},t.itemData),{},{type:a.type})},on:{"update:load":t.handleLoad}},[e("div",{staticClass:"m-common-list"},[2!==a.type?t._l(a.list,(function(a){return e("HorseCard",{key:a.ID,style:t.isPhone?"":"width: calc(100% / ".concat(t.count," - 20px)"),attrs:{item:a,reporter:{aggregate:t.listId(a.list)}}})})):t._l(a.list,(function(a){return e("SameItem",{key:a.ID,style:t.isPhone?"":"width: calc(100% / ".concat(t.count," - 20px)"),attrs:{item:a,reporter:{aggregate:t.listId(a.list)}}})}))],2)])]:t._e()],2)}))]:e("div",{staticClass:"m-horse-list"},[e("div",{staticClass:"u-type u-all-type"},[e("div",{staticClass:"u-title"},[t._v(t._s(t.typeName))]),""!==t.active?e("div",{staticClass:"m-operate"},t._l(t.showTypes,(function(a){return e("div",{key:a.value,staticClass:"m-item",class:t.showType===a.value&&"active",on:{click:function(e){t.showType=a.value}}},[t._v(" "+t._s(a.label)+" ")])})),0):t._e()]),t.subList.length?["card"===t.showType?e("div",{staticClass:"m-horse-list--card"},[2!==t.active?t._l(t.subList,(function(a){return e("HorseCard",{key:a.ID,style:t.isPhone?"":"width: calc(100% / ".concat(t.count," - 20px)"),attrs:{item:a,reporter:{aggregate:t.listId(t.subList)}}})})):t._l(t.subList,(function(a){return e("SameItem",{key:a.ID,style:t.isPhone?"":"width: calc(100% / ".concat(t.count," - 20px)"),attrs:{item:a,reporter:{aggregate:t.listId(a.list)}}})}))],2):t._e(),"list"===t.showType?e("div",{staticClass:"m-horse-list--list"},[e("ListHead"),t._l(t.subList,(function(a){return e("HorseItem",{key:a.ID,attrs:{item:a,reporter:{aggregate:t.listId(t.subList)}}})}))],2):t._e()]:t._e(),e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.hasNextPage,expression:"hasNextPage"}],staticClass:"m-archive-more",attrs:{type:"primary",plain:"",loading:t.loading,icon:"el-icon-arrow-down"},on:{click:t.appendPage}},[t._v("加载更多")]),e("el-pagination",{staticClass:"m-archive-pages",attrs:{background:"",layout:"total, prev, pager, next, jumper","hide-on-single-page":!0,"page-size":t.per,total:t.total,"current-page":t.page},on:{"current-change":t.changePage}})],2)],2)],1)}),n=[],r=(a("7db0"),a("c740"),a("a15b"),a("d81d"),a("14d9"),a("fb6a"),a("ac1f"),a("841c"),a("159b"),a("f252")),c=a("c42f"),o=a("a790"),l=a("e5d7"),u=(a("a9e3"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-broadcast"},[e("div",{staticClass:"m-horse-broadcast__header"},[e("div",{staticClass:"u-title"},[t._v("抓马播报")]),e("el-select",{staticClass:"u-select",attrs:{placeholder:"请选择服务器",size:"mini"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}},t._l(t.servers,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t.listData.length&&t.listData[t.active].map_id?e("div",{staticClass:"m-horse-broadcast__list"},[e("jx3box-map",{key:t.listData[t.active].map_id,staticClass:"u-horse-map",attrs:{mapId:Number(t.listData[t.active].map_id),overview:!1,datas:t.listData[t.active].mapDatas&&t.listData[t.active].mapDatas[t.listData[t.active].map_id]||[]}}),e("div",{staticClass:"m-list"},t._l(t.listData,(function(a,i){return e("div",{key:i,staticClass:"m-item"},[a.is_chitu?e("span",{staticClass:"m-horse no-horse"},[t._v("本周赤兔尚未刷新")]):e("div",{staticClass:"m-horse",class:{active:t.active===i},on:{click:function(e){return t.changeHorse(a,i)}}},[a.fromTime?e("div",{staticClass:"u-col u-times",class:"foreshow"===a.subtype&&"u-times-lately"},[e("span",[t._v(t._s(a.fromTime))]),e("span",[t._v(" ~ ")]),e("span",[t._v(t._s(a.toTime))])]):t._e(),e("span",{staticClass:"u-col u-name"},[t._v(t._s(a.map_name))]),a.horses&&a.horses.length?e("div",{staticClass:"u-col"},t._l(t.horseList(a),(function(a){return e("div",{key:a,staticClass:"u-horse",on:{click:function(e){return t.go(a)}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a,placement:"top"}},[e("el-image",{staticClass:"u-image",attrs:{src:t.getImgSrc(a)}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("img",{attrs:{src:t.getImgSrc(a,!0)},on:{error:t.replaceByDefault}})])])],1)],1)})),0):t._e()])])})),0)],1):e("div",{staticClass:"w-no-data"},[t._v(t._s(t.server)+" 暂无播报")])])}),d=[],p=a("3835"),h=(a("99af"),a("cb29"),a("0481"),a("4e82"),a("4069"),a("4ec9"),a("25f0"),a("3ca3"),a("466d"),a("498a"),a("ddb0"),a("abab")),m=a("c9d2"),v=a("12d4"),f=a("a59a"),g=a("ef56"),y=a("238b"),b=a("24cf"),_={name:"HorseBroadcast",components:{Jx3boxMap:h["a"]},inject:["__imgRoot2"],data:function(){return{list:[],timer:null,server:"",chituMap:{"方问":411,"小赤":216,"杨新":411},hasExist:!1,existData:{},chituTip:"\n                <p>CD: 周二7点 ~ 下周一7点。</p>\n                <p>地图: 黑戈壁、阴山大草原、鲲鹏岛。</p>\n                <p>必备: <卦文龟甲>交大战时有几率获得，赤兔刷新后再到信使处领取，有效期7天。</p>\n            ",chituLoading:!1,active:0}},computed:{params:function(){return{pageIndex:1,pageSize:50,type:"horse",server:this.server}},client:function(){return this.$store.state.client},servers:function(){return"std"==this.client?v:f},listData:function(){var t=this,e=Math.floor((document.body.clientWidth-460)/350);e=e>2?2:e;var a=this.list||[],i=this.isPhone?[]:new Array(4*e-1-a.length).fill({});return a=a.sort((function(e,a){return t.convertTime(e.fromTime)-t.convertTime(a.fromTime)})),a.concat(this.existData,i)||[]},isPhone:function(){return document.documentElement.clientWidth<=820}},watch:{server:function(){this.list=[],this.existData={},this.getGameReporter(),this.loadChituData()}},methods:{loadChituData:function(){var t=this,e=this.server;this.chituLoading=!0,Object(r["b"])(e).then((function(e){var a,s,n,r,c=(null===(a=e.data)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.list)||[],o=(null===c||void 0===c||null===(n=c[0])||void 0===n?void 0:n.content)||"",l=/\]\[(.*)\]大声喊/.exec(o)[1].trim()||"",u=216,d=(null===(r=t.chituMap)||void 0===r?void 0:r[l])||u,p=g[d],h={},m=p.coordinates[0],v=["赤兔·飞虹"],f=p.mapName;h[d]=[Object(i["a"])({content:"".concat(v.join(),"\n                    <br />坐标：(").concat(m.x,",").concat(m.y,",").concat(m.z,")")},m)];var y=b["a"].tz((null===c||void 0===c?void 0:c[0].created_at)||b["a"].tz()),_=b["a"].tz(),C=_.day(),D=_.hour(),k=_.day(2).hour(7).minute(0).second(0).millisecond(0),w=k.add(1,"week").add(-1,"millisecond");(C<=1||2===C&&D<7)&&(k=b["a"].tz(k).add(-1,"week"),w=b["a"].tz(w).add(-1,"week"));var T=b["a"].tz(y).isBetween(k,w);t.hasExist=T;var I={horses:v,map_name:f,map_id:d+"",mapDatas:h,is_chitu:!0,time:""};T&&(I.time=b["a"].tz(y).format("YYYY-MM-DD HH:mm:ss")),t.existData=I})).finally((function(){t.chituLoading=!1}))},replaceByDefault:function(t){t.target.src=a("d47d")},go:function(t){var e,a=(null===(e=y[t])||void 0===e?void 0:e.itemId)||0,i=1;this.$router.push({path:"".concat(a),query:{type:i}})},getImgSrc:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=a?this.client:"std",s=(null===(e=y[t])||void 0===e?void 0:e.id)||0;return this.__imgRoot2+"".concat(i,"/")+s+".png"},getOriginDatas:function(t){var e="",a="",s=[],n={},r=[];if("npc_chat"===t.subtype)e=t.map_id,a=t.map_name,s=g[e].coordinates,r=g[e].horses[t.horseIndex];else for(var c in a=t.content.match(/在(\S*)出没/)?t.content.match(/在(\S*)出没/)[1]:"",g)g[c].mapName===a&&(e=c,s=g[c].coordinates,r=g[e].horses.flat());var o=s[0];n[e]=[Object(i["a"])({content:"".concat(r.join(),"\n                    <br />坐标：(").concat(o.x,",").concat(o.y,",").concat(o.z,")")},o)];var l={mapDatas:n,map_id:e,map_name:a,horses:r};return l},getGameReporter:function(){var t=this,e=this.params;Object(r["d"])(e).then((function(e){var a,s=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data,n=(null===s||void 0===s?void 0:s.list)||[],r=new Map,c=n.filter((function(t){return t.map_id&&!r.has(t.map_id)&&r.set(t.map_id,1)})),o=n.filter((function(t){return!t.map_id&&((new Date).valueOf()-new Date(t.created_at).valueOf())/1e3/60<=15})),l=[];c.forEach((function(t){t.content.split("\n\n").forEach((function(e,a){if(e&&(e.match(/还有(\S*)分钟/)||e.match("即将出世"))){var s=e.match(/还有(\S*)分钟/)?Number(e.match(/还有(\S*)分钟/)[1]):0,n=new Date(t.created_at).valueOf()+60*(s+15)*1e3>=(new Date).valueOf();n&&l.push(Object(i["a"])(Object(i["a"])({},t),{},{id:a?Number(a+t.id.toString()):t.id,content:e,minute:s,horseIndex:a}))}}))}));var u=l.concat(o);t.list=u.map((function(e){var a="",s="";return"minute"in e?(a=b["a"].tz(new Date(e.created_at).valueOf()+60*(e.minute+5)*1e3).format("HH:mm"),s=b["a"].tz(new Date(e.created_at).valueOf()+60*(e.minute+10)*1e3).format("HH:mm")):(a=b["a"].tz(new Date(e.created_at).valueOf()+3e5).format("HH:mm"),s=b["a"].tz(new Date(e.created_at).valueOf()+6e5).format("HH:mm")),Object(i["a"])(Object(i["a"])(Object(i["a"])({},e),t.getOriginDatas(e)),{},{fromTime:a,toTime:s})}))}))},convertTime:function(t){var e=t.split(":").map(Number),a=Object(p["a"])(e,2),i=a[0],s=a[1];return 60*i+s},horseList:function(t){return this.isPhone?t.horses:t.horses.slice(0,3)},changeHorse:function(t,e){t.map_id&&(this.active=e)}},mounted:function(){var t=this;m["a"].isLogin()?Object(r["g"])().then((function(e){var a,i;t.server=(null===(a=e.data)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.jx3_server)||"梦江南"})):this.server="梦江南",this.timer=setInterval((function(){t.getGameReporter()}),3e4)},beforeDestroy:function(){clearInterval(this.timer),this.timer=null}},C=_,D=(a("b7df"),a("2877")),k=Object(D["a"])(C,u,d,!1,null,null,null),w=k.exports,T=a("2efc"),I=function(){var t=this,e=t._self._c;return e("a",{staticClass:"same-item",attrs:{href:t.getLink(t.item),target:"_blank"}},[e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"img-wrap",class:"u-quality-bg--"+t.item.Quality},[15===t.item.SubType?e("el-image",{staticClass:"u-image",attrs:{src:t.getImgSrc(t.item)}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("img",{attrs:{src:t.getImgSrc(t.item,!0)},on:{error:t.replaceByDefault}})])]):e("item-icon",{attrs:{item_id:String(t.item.ItemID),isLink:!1,size:48,onlyIcon:!0}})],1),e("div",{staticClass:"m-info"},[e("div",{staticClass:"info-item name"},[t._v(t._s(t.item.Name))]),e("div",{staticClass:"info-item id"},[t._v("ID: "+t._s(t.item.ID))])])]),e("div",{staticClass:"info-item"},[t._l(t.MagicAttributes,(function(a,i){return e("el-tooltip",{key:i,attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[a.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((a.name||"")+(Number(a.level)?a.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(a.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:a.iconUrl,alt:a.name}})])})),t.count?e("span",{staticClass:"u-more"},[t._v("+"+t._s(t.count))]):t._e()],2)])},x=[],L=(a("5319"),a("ed08")),O=a("bf15"),j={name:"SameItem",props:{item:{type:Object,required:!0}},components:{ItemIcon:O["a"]},computed:{isPhone:function(){return Object(L["b"])()},MagicAttributes:function(){return this.isPhone&&this.item.MagicAttributes,this.item.MagicAttributes.length<=4?this.item.MagicAttributes:this.item.MagicAttributes.slice(0,3)||[]},count:function(){return this.isPhone||this.item.MagicAttributes.length<=4?0:this.item.MagicAttributes.slice(3).length}},methods:{getLink:function(t){var e=t.ItemID,a=15===t.SubType?1:2;return"/horse/".concat(e,"?type=").concat(a)},replaceByDefault:function(t){t.target.src=a("d47d")},getImgSrc:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e?this.client:"std",i=t.ImgPath;if(i){var s=i.toLowerCase().match(/.*[\/,\\]homeland(.*?).tga/),n=null===s||void 0===s?void 0:s[1].replace(/\\/g,"/");return"default"==(null===s||void 0===s?void 0:s[1])?this.__imgRoot+"homeland/".concat(a)+"/default/default.png":this.__imgRoot+"homeland/".concat(a)+n+".png"}return this.__imgRoot2+"".concat(a,"/")+t.ID+".png"}}},M=j,S=(a("eace"),Object(D["a"])(M,I,x,!1,null,null,null)),H=S.exports,N=function(t,e){return e._m(0)},P=[function(t,e){return t("div",{staticClass:"m-list-head list-sticky-head"},[t("div",[e._v("名称")]),t("div",[e._v("类型")]),t("div",[e._v("骑乘")]),t("div",[e._v("品质等级")]),t("div",[e._v("跑速")]),t("div",[e._v("喂食饲料")]),t("div",[e._v("获取方式")]),t("div",[e._v("属性")])])}],z={name:"ListHead"},A=z,R=(a("58e7"),Object(D["a"])(A,N,P,!0,null,null,null)),B=R.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"m-horse-item",on:{click:function(e){return t.go(t.item)}}},[e("div",{staticClass:"u-name"},[e("item-icon",{attrs:{item_id:String(t.item.ItemID),size:36,vertical:!0}})],1),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.typeName))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.modeName))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.Level))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.speed))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.feedName))]),e("div",{staticClass:"u-desc"},[t._v(t._s(t.item.GetType))]),e("div",{staticClass:"u-attr-wrap"},t._l(t.item.MagicAttributes||[],(function(a,i){return e("div",{key:i,staticClass:"u-attr"},[e("el-tooltip",{attrs:{trigger:"hover",placement:"top"}},[e("div",{staticClass:"u-attr-pop",attrs:{slot:"content"},slot:"content"},[a.name?e("div",{staticClass:"u-attr-name"},[t._v(" "+t._s((a.name||"")+(Number(a.level)?a.level+"级":""))+" ")]):t._e(),e("div",{staticClass:"u-attr-desc"},[t._v(t._s(a.desc))])]),e("img",{staticClass:"u-attr-icon",attrs:{src:a.iconUrl,alt:a.name}})])],1)})),0)])},$=[],q={name:"HorseItem",components:{ItemIcon:O["a"]},props:{item:{type:Object,required:!0}},methods:{go:function(t){var e=t.ItemID,a=15===t.SubType?1:2;this.$router.push({path:"".concat(e),query:{type:a}})}},computed:{client:function(){return this.$store.state.client}}},G=q,J=(a("dd43"),Object(D["a"])(G,E,$,!1,null,null,null)),Y=J.exports,F=a("2ef0"),U=a("85e4"),W={name:"HorseHome",components:{SameItem:H,HorseCard:T["a"],HorseBroadcastV2:w,CommonList:o["a"],CommonToolbar:l["a"],ListHead:B,HorseItem:Y},data:function(){return{loading:!1,showType:"card",keyword:"",active:"",page:1,total:0,per:0,count:0,itemData:{color:"#E86F00",width:"220"},appendMode:!1,feeds:[],attrs:[],filter:!1,typeList:[],list:c["a"],searchType:c["b"],showTypes:c["c"]}},computed:{client:function(){return this.$store.state.client},params:function(){var t={client:this.client,per:this.per};return this.keyword&&(t.keyword=this.keyword),""!==this.active&&(t.type=this.active),t},hasNextPage:function(){var t=this,e=this.typeList.filter((function(e){return e.type===t.active}))[0].pages;return e>1&&this.page<e},typeName:function(){var t=this;return this.typeList.filter((function(e){return e.type==t.active}))[0].name},subList:function(){var t=this;return""===this.active?null:this.typeList.filter((function(e){return e.type===t.active}))[0].list},isPhone:function(){return Object(L["b"])()}},watch:{list:{immediate:!0,handler:function(t){this.typeList=Object(F["cloneDeep"])(t)}},params:{deep:!0,handler:function(){this.loadData()}},searchType:{deep:!0,handler:function(){var t=this.searchType[0].checked.join(","),e=this.searchType[1].checked.join(",");this.page=1,this.filter&&this.loadData(Object(i["a"])(Object(i["a"])({},this.params),{},{feed:t,attr:e}))}}},methods:{iconLink:U["iconLink"],clickTabs:function(t){var e=this.typeList.filter((function(e){return e.value==t}))[0].type;this.active=e,this.typeList=this.typeList.map((function(t){return t.page=1,t})),this.page=1},loadInfoData:function(){var t=this;Object(r["c"])({client:this.client}).then((function(e){var a=e.data.map((function(t){var e=t.tip.indexOf("【"),a=t.tip.indexOf("】");return t.feed=t.tip.slice(e+1,a),t})),i=[];a.forEach((function(t){var e=i.findIndex((function(e){return e.feed===t.feed}));e>-1?i[e].id+=","+t.id:i.push(t)})),t.feeds=i.map((function(t){return{label:t.feed,value:t.id}})),t.searchType[0].list=t.feeds})),Object(r["a"])({client:this.client}).then((function(e){var a=e.data,i=a.map((function(t){return{label:t.name,value:t.name}}));t.attrs=i,t.searchType[1].list=t.attrs}))},getFeed:function(t){var e="";return 15===t.SubType&&(e=this.feeds.find((function(e){return e.id===t.DetailType}))?this.feeds.find((function(e){return e.id===t.DetailType})).feed:""),e},canDouble:function(t){var e="";return 15===t.SubType&&t.MagicAttributes&&t.MagicAttributes.length&&(e=t.MagicAttributes.find((function(t){return"15650"===t.id}))?t.MagicAttributes.find((function(t){return"15650"===t.id})).name:"单骑"),e},getType:function(t){var e="";return 15===t.SubType?e=0===t.DetailType?"普通坐骑":"奇趣坐骑":23===t.SubType&&(e=0===t.DetailType?"头饰":1===t.DetailType?"鞍饰":2===t.DetailType?"足饰":3===t.DetailType?"马饰":"马具"),e},listId:function(t){return null!==t&&void 0!==t&&t.length?t.map((function(t){return t.ID})):[]},changePage:function(t){this.page=t,this.loadData()},showCount:function(){var t;if(this.isPhone)this.per=8;else{var e=(null===(t=this.$refs.listRef)||void 0===t?void 0:t.clientWidth)-120;this.count=Math.floor(e/this.itemData.width),this.per=this.count}},appendPage:function(){this.appendMode=!0,this.handleLoad(this.active,!0)},handleLoad:function(t,e){var a=this.typeList.filter((function(e){return e.type===t}))[0].page,i=Object(F["cloneDeep"])(this.params);i.page=a+1,i.per=e?3*this.per:this.per,i.type=t,this.loadList(i,t)},loadData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params;if(this.loading=!0,e=Object(F["omit"])(e,["type","value","label"]),""===this.active){var a=this.typeList.filter((function(t){return""!==t.type}));a.forEach((function(a){e.page=a.page,e.type=a.type,e.per=t.per,t.loadList(e,a.type)}))}else e.page=this.page,e.per=3*this.per,this.loadList(Object(i["a"])(Object(i["a"])({},e),{},{type:this.active}),this.active)},loadList:function(t,e){var a=this,i=this.typeList.findIndex((function(t){return t.type===e}));this.typeList[i].pages<t.page&&""===this.active&&(t.page=1),Object(r["f"])(t).then((function(t){var e=t.data,s=e.list,n=e.total,r=e.pages,c=e.page,o=a.appendMode?Object(F["concat"])(a.typeList[i].list,s):s,l=o.map((function(t){return t.typeName=a.getType(t),t.modeName=a.canDouble(t),t.feedName=a.getFeed(t),t.MoveSpeed&&(t.speed=t.MoveSpeedDesc.split("移动速度提高")[1]),t.MagicAttributes&&t.MagicAttributes.length&&t.MagicAttributes.map((function(t){return t.iconUrl=a.iconLink(t.icon),t})),t}));a.typeList[i].list=l||[],a.typeList[i].page=c||1,a.typeList[i].pages=r||1,""!==a.active&&(a.page=c||1),a.total=n})).finally((function(){a.loading=!1,a.appendMode=!1}))},checkboxChange:function(t){var e=this.checkboxData[t];this[t]=e.join(",")},reset:function(){this.searchType=this.searchType.map((function(t){return t.checked=[],t})),this.feed=[],this.attr=[]},updateToolbar:function(t){var e=t.type,a=t.search;this.keyword=a,this.clickTabs(e)}},mounted:function(){this.showCount(),this.loadInfoData()}},V=W,Q=(a("5469"),Object(D["a"])(V,s,n,!1,null,null,null));e["default"]=Q.exports},"70f9":function(t,e,a){},"80e1":function(t,e,a){},a15b:function(t,e,a){"use strict";var i=a("23e7"),s=a("e330"),n=a("44ad"),r=a("fc6a"),c=a("a640"),o=s([].join),l=n!==Object,u=l||!c("join",",");i({target:"Array",proto:!0,forced:u},{join:function(t){return o(r(this),void 0===t?",":t)}})},b7df:function(t,e,a){"use strict";a("70f9")},c42f:function(t){t.exports=JSON.parse('{"a":[{"type":"","value":-1,"name":"全部","label":"全部","page":1,"pages":1,"list":[]},{"type":0,"value":1,"name":"普通坐骑","label":"普通坐骑","page":1,"pages":1,"list":[]},{"type":1,"value":2,"name":"奇趣坐骑","label":"奇趣坐骑","page":1,"pages":1,"list":[]},{"type":2,"value":3,"name":"马具","label":"马具","page":1,"pages":1,"list":[]}],"b":[{"key":"feed","type":"checkbox","name":"喂食饲料","list":[],"checked":[]},{"key":"attr","type":"checkbox","name":"属性","list":[],"checked":[]}],"c":[{"value":"list","label":"列表"},{"value":"card","label":"卡片"}]}')},dd43:function(t,e,a){"use strict";a("dfc2")},dfc2:function(t,e,a){},eace:function(t,e,a){"use strict";a("80e1")}}]);
//# sourceMappingURL=chunk-4e0149c8.d6079513.js.map